{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/ts-loader/index.js??ref--15-3!/app/node_modules/@rancher/shell/components/form/labeled-select-utils/labeled-select-pagination.ts","dependencies":[{"path":"/app/node_modules/@rancher/shell/components/form/labeled-select-utils/labeled-select-pagination.ts","mtime":1764051444754},{"path":"/app/pkg/rancher-support-ui/babel.config.js","mtime":1764051174054},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764051466330},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764051466564},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764051472143},{"path":"/app/node_modules/ts-loader/index.js","mtime":1764051473071}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBMQUJFTF9TRUxFQ1RfTk9UX09QVElPTl9LSU5EUywgTEFCRUxfU0VMRUNUX0tJTkRTIH0gZnJvbSAnQHNoZWxsL3R5cGVzL2NvbXBvbmVudHMvbGFiZWxlZFNlbGVjdCc7Ci8qKgogKiAnbWl4aW4nIHRvIHByb3ZpZGUgcGFnaW5hdGlvbiBzdXBwb3J0IHRvIExhYmVsZWRTZWxlY3QKICovCmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgcHJvcHM6IHsKICAgIHBhZ2luYXRlOiB7CiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICAgIHR5cGU6IEZ1bmN0aW9uCiAgICB9LAogICAgaW5TdG9yZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjbHVzdGVyJwogICAgfSwKICAgIC8qKgogICAgICogUmVzb3VyY2UgdG8gc2hvdwogICAgICovCiAgICByZXNvdXJjZVR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gSW50ZXJuYWwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHNlYXJjaDogJycsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgcGFnZXM6IDAsCiAgICAgIGRlYm91bmNlZFJlcXVlc3RQYWdpbmF0aW9uOiBkZWJvdW5jZSh0aGlzLnJlcXVlc3RQYWdpbmF0aW9uLCA3MDApLAogICAgICAvLyBFeHRlcm5hbAogICAgICBwYWdlOiBbXSwKICAgICAgdG90YWxSZXN1bHRzOiAwLAogICAgICBwYWdpbmF0aW5nOiBmYWxzZQogICAgfTsKICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5jYW5QYWdpbmF0ZSkgewogICAgICBhd2FpdCB0aGlzLnJlcXVlc3RQYWdpbmF0aW9uKCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgY2FuUGFnaW5hdGUoKSB7CiAgICAgIHJldHVybiAhIXRoaXMucGFnaW5hdGUgJiYgISF0aGlzLnJlc291cmNlVHlwZSAmJiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2Ake3RoaXMuaW5TdG9yZX0vcGFnaW5hdGlvbkVuYWJsZWRgXSh0aGlzLnJlc291cmNlVHlwZSk7CiAgICB9LAogICAgY2FuTG9hZE1vcmUoKSB7CiAgICAgIHJldHVybiB0aGlzLnBhZ2VzID4gdGhpcy5jdXJyZW50UGFnZTsKICAgIH0sCiAgICBvcHRpb25zSW5QYWdlKCkgewogICAgICAvLyBOdW1iZXIgb2YgZ2VudWluZSBvcHRpb25zIChub3QgZ3JvdXBzLCBkaXZpZGVycywgZXRjKQogICAgICByZXR1cm4gdGhpcy5jYW5QYWdpbmF0ZSA/IHRoaXMuX29wdGlvbnMuZmlsdGVyKG8gPT4gewogICAgICAgIHJldHVybiBvLmtpbmQgIT09IExBQkVMX1NFTEVDVF9LSU5EUy5OT05FICYmICFMQUJFTF9TRUxFQ1RfTk9UX09QVElPTl9LSU5EUy5pbmNsdWRlcyhvLmtpbmQpOwogICAgICB9KS5sZW5ndGggOiAwOwogICAgfSwKICAgIG9wdGlvbkNvdW50cygpIHsKICAgICAgaWYgKCF0aGlzLmNhblBhZ2luYXRlIHx8IHRoaXMub3B0aW9uc0luUGFnZSA9PT0gdGhpcy50b3RhbFJlc3VsdHMpIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCdsYWJlbFNlbGVjdC5wYWdpbmF0aW9uLmNvdW50cycsIHsKICAgICAgICBjb3VudDogdGhpcy5vcHRpb25zSW5QYWdlLAogICAgICAgIHRvdGFsQ291bnQ6IHRoaXMudG90YWxSZXN1bHRzCiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbG9hZE1vcmUoKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UrKzsKICAgICAgdGhpcy5yZXF1ZXN0UGFnaW5hdGlvbigpOwogICAgfSwKICAgIHNldFBhZ2luYXRpb25GaWx0ZXIoZmlsdGVyKSB7CiAgICAgIHRoaXMucGFnaW5hdGluZyA9IHRydWU7IC8vIERvIHRoaXMgYmVmb3JlIGRlYm91bmNlCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOwogICAgICB0aGlzLnNlYXJjaCA9IGZpbHRlcjsKICAgICAgdGhpcy5kZWJvdW5jZWRSZXF1ZXN0UGFnaW5hdGlvbih0cnVlKTsKICAgIH0sCiAgICBhc3luYyByZXF1ZXN0UGFnaW5hdGlvbihyZXNldFBhZ2UgPSBmYWxzZSkgewogICAgICB0aGlzLnBhZ2luYXRpbmcgPSB0cnVlOwogICAgICBjb25zdCBwYWdpbmF0ZSA9IHRoaXMucGFnaW5hdGU7IC8vIENoZWNraW5nIGlzIGRvbmUgdmlhIHByb3AKICAgICAgY29uc3QgewogICAgICAgIHBhZ2UsCiAgICAgICAgcGFnZXMsCiAgICAgICAgdG90YWwKICAgICAgfSA9IGF3YWl0IHBhZ2luYXRlKHsKICAgICAgICByZXNldFBhZ2UsCiAgICAgICAgcGFnZUNvbnRlbnQ6IHRoaXMucGFnZSB8fCBbXSwKICAgICAgICBwYWdlOiB0aGlzLmN1cnJlbnRQYWdlLAogICAgICAgIGZpbHRlcjogdGhpcy5zZWFyY2gsCiAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUKICAgICAgfSk7CiAgICAgIHRoaXMucGFnZSA9IHBhZ2U7CiAgICAgIHRoaXMucGFnZXMgPSBwYWdlcyB8fCAwOwogICAgICB0aGlzLnRvdGFsUmVzdWx0cyA9IHRvdGFsIHx8IDA7CiAgICAgIHRoaXMucGFnaW5hdGluZyA9IGZhbHNlOwogICAgfQogIH0KfSk7"},{"version":3,"names":["debounce","defineComponent","LABEL_SELECT_NOT_OPTION_KINDS","LABEL_SELECT_KINDS","props","paginate","default","type","Function","inStore","String","resourceType","data","currentPage","search","pageSize","pages","debouncedRequestPagination","requestPagination","page","totalResults","paginating","mounted","canPaginate","computed","$store","getters","canLoadMore","optionsInPage","_options","filter","o","kind","NONE","includes","length","optionCounts","count","totalCount","methods","loadMore","setPaginationFilter","resetPage","total","pageContent"],"sources":["/app/node_modules/@rancher/shell/components/form/labeled-select-utils/labeled-select-pagination.ts"],"sourcesContent":["import { debounce } from 'lodash';\nimport { PropType, defineComponent } from 'vue';\nimport { ComputedOptions, MethodOptions } from 'vue/types/v3-component-options';\nimport { LabelSelectPaginateFn, LABEL_SELECT_NOT_OPTION_KINDS, LABEL_SELECT_KINDS } from '@shell/types/components/labeledSelect';\n\ninterface Props {\n  paginate?: LabelSelectPaginateFn\n}\n\ninterface Data {\n  currentPage: number,\n  search: string,\n  pageSize: number,\n\n  page: any[],\n  pages: number,\n  totalResults: number,\n\n  paginating: boolean,\n\n  debouncedRequestPagination: Function\n}\n\ninterface Computed extends ComputedOptions {\n  canPaginate: () => boolean,\n\n  canLoadMore: () => boolean,\n\n  optionsInPage: () => number,\n\n  optionCounts: () => string,\n}\n\ninterface Methods extends MethodOptions {\n  loadMore: () => void\n  setPaginationFilter: (filter: string) => void\n  requestPagination: () => Promise<any>;\n}\n\n/**\n * 'mixin' to provide pagination support to LabeledSelect\n */\nexport default defineComponent<Props, any, Data, Computed, Methods>({\n  props: {\n    paginate: {\n      default: null,\n      type:    Function as PropType<LabelSelectPaginateFn>,\n    },\n\n    inStore: {\n      type:    String,\n      default: 'cluster',\n    },\n\n    /**\n     * Resource to show\n     */\n    resourceType: {\n      type:    String,\n      default: null,\n    },\n  },\n\n  data(): Data {\n    return {\n      // Internal\n      currentPage: 1,\n      search:      '',\n      pageSize:    10,\n      pages:       0,\n\n      debouncedRequestPagination: debounce(this.requestPagination, 700),\n\n      // External\n      page:         [],\n      totalResults: 0,\n      paginating:   false,\n    };\n  },\n\n  async mounted() {\n    if (this.canPaginate) {\n      await this.requestPagination();\n    }\n  },\n\n  computed: {\n    canPaginate() {\n      return !!this.paginate && !!this.resourceType && this.$store.getters[`${ this.inStore }/paginationEnabled`](this.resourceType);\n    },\n\n    canLoadMore() {\n      return this.pages > this.currentPage;\n    },\n\n    optionsInPage() {\n      // Number of genuine options (not groups, dividers, etc)\n      return this.canPaginate ? this._options.filter((o: any) => {\n        return o.kind !== LABEL_SELECT_KINDS.NONE && !LABEL_SELECT_NOT_OPTION_KINDS.includes(o.kind);\n      }).length : 0;\n    },\n\n    optionCounts() {\n      if (!this.canPaginate || this.optionsInPage === this.totalResults) {\n        return '';\n      }\n\n      return this.$store.getters['i18n/t']('labelSelect.pagination.counts', {\n        count:      this.optionsInPage,\n        totalCount: this.totalResults\n      });\n    },\n  },\n\n  methods: {\n    loadMore() {\n      this.currentPage++;\n      this.requestPagination();\n    },\n\n    setPaginationFilter(filter: string) {\n      this.paginating = true; // Do this before debounce\n      this.currentPage = 1;\n      this.search = filter;\n      this.debouncedRequestPagination(true);\n    },\n\n    async requestPagination(resetPage = false) {\n      this.paginating = true;\n      const paginate: LabelSelectPaginateFn = this.paginate as LabelSelectPaginateFn; // Checking is done via prop\n\n      const {\n        page,\n        pages,\n        total\n      } = await paginate({\n        resetPage,\n        pageContent: this.page || [],\n        page:        this.currentPage,\n        filter:      this.search,\n        pageSize:    this.pageSize,\n      });\n\n      this.page = page;\n      this.pages = pages || 0;\n      this.totalResults = total || 0;\n\n      this.paginating = false;\n    }\n  }\n});\n"],"mappings":"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","ignoreList":[]}]}