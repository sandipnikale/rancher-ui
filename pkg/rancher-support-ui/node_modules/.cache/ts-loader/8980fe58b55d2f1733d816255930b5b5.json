{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/ts-loader/index.js??ref--15-3!/app/node_modules/@rancher/shell/store/type-map.utils.ts","dependencies":[{"path":"/app/node_modules/@rancher/shell/store/type-map.utils.ts","mtime":1764051444754},{"path":"/app/pkg/rancher-support-ui/babel.config.js","mtime":1764051174054},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764051466330},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764051466564},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764051472143},{"path":"/app/node_modules/ts-loader/index.js","mtime":1764051473071}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZmluZEJ5LCBpbnNlcnRBdCwgcmVtb3ZlT2JqZWN0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgQ09VTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKY29uc3QgRklFTERfUkVHRVggPSAvXlwkXC5tZXRhZGF0YVwuZmllbGRzXFsoWzAtOV0qKVxdLzsKLyoqCiAqIENyZWF0ZSB0aGUgaGVhZGVycyB1c2VkIGluIGxpc3RzIHRvIHNob3cgYSByZXNvdXJjZQogKgogKiBUaGVzZSBjb3VsZCBiZQogKiAtIFByZS1jb25maWd1cmVkIHZpYSB0aGUgcHJvZHVjdCAoZWl0aGVyIG5vbi1wYWdpbmF0ZWQgb3IgcGFnaW5hdGVkKQogKiAtIEdlbmVyYXRlZCBkeW5hbWljYWxseSBmcm9tIHNjaGVtYSdzIGF0dHJpYnV0ZXMuY29sdW1ucwogKgogKiBUaGVyZSdzIGFsc28gc29tZSBhZGRpdGlvbmFsIG9uZXMgbGlrZSBzdGF0ZSwgYWdlLCBhbmQgYXQgbGVhc3Qgb25lIG9mIG5hbWUgb3IgaWQKICoKICogVGhlIG9yZGVyIG9mIHRoZXNlIGFyZSBtYXNzYWdlZCBhcyB3ZWxsCiAqLwpleHBvcnQgZnVuY3Rpb24gY3JlYXRlSGVhZGVycyhjdHgsIG9wdCkgewogIHZhciBfYTsKICBjb25zdCB7CiAgICBoZWFkZXJzLAogICAgdHlwZU9wdGlvbnMsCiAgICBzY2hlbWEsCiAgICBjb2x1bW5zLAogICAgcGFnaW5hdGlvbgogIH0gPSBvcHQ7CiAgY29uc3QgewogICAgc3RhdGU6IHN0YXRlQ29sdW1uLAogICAgbmFtZTogbmFtZUNvbHVtbiwKICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlQ29sdW1uLAogICAgaWQ6IGlkQ29sdW1uLAogICAgYWdlOiBhZ2VDb2x1bW4KICB9ID0gY29sdW1uczsKICBjb25zdCB7CiAgICByb290R2V0dGVycwogIH0gPSBjdHg7CiAgY29uc3Qgb3V0ID0gdHlwZU9wdGlvbnMuc2hvd1N0YXRlID8gW3N0YXRlQ29sdW1uXSA6IFtdOwogIGNvbnN0IGF0dHJpYnV0ZXMgPSBzY2hlbWEuYXR0cmlidXRlcyB8fCB7fTsKICBjb25zdCBjb2x1bW5zRnJvbVNjaGVtYSA9IGF0dHJpYnV0ZXMuY29sdW1ucyB8fCBbXTsKICAvLyBBIHNwZWNpZmljIGxpc3QgaGFzIGJlZW4gcHJvdmlkZWQKICBpZiAoKF9hID0gaGVhZGVycyA9PT0gbnVsbCB8fCBoZWFkZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBoZWFkZXJzW3NjaGVtYS5pZF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpIHsKICAgIHJldHVybiBoZWFkZXJzW3NjaGVtYS5pZF0ubWFwKGVudHJ5ID0+IHsKICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBjb25zdCBjb2wgPSBmaW5kQnkoY29sdW1uc0Zyb21TY2hlbWEsICduYW1lJywgZW50cnkpOwogICAgICAgIGlmIChjb2wpIHsKICAgICAgICAgIHJldHVybiBoZWFkZXJGcm9tU2NoZW1hQ29sKGNvbCwgcm9vdEdldHRlcnMsIHBhZ2luYXRpb24sIGFnZUNvbHVtbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZW50cnk7CiAgICAgIH0KICAgIH0pLmZpbHRlcihjb2wgPT4gISFjb2wpOwogIH0KICAvLyBPdGhlcndpc2UgbWFrZSBvbmUgdXAgZnJvbSBzY2hlbWEKICBsZXQgaGFzTmFtZSA9IGZhbHNlOwogIGNvbnN0IG5hbWVzcGFjZWQgPSBhdHRyaWJ1dGVzLm5hbWVzcGFjZWQgfHwgZmFsc2U7CiAgZm9yIChjb25zdCBjb2wgb2YgY29sdW1uc0Zyb21TY2hlbWEpIHsKICAgIGlmIChjb2wuZm9ybWF0ID09PSAnbmFtZScpIHsKICAgICAgaGFzTmFtZSA9IHRydWU7CiAgICAgIG91dC5wdXNoKG5hbWVDb2x1bW4gfHwgaGVhZGVyRnJvbVNjaGVtYUNvbChjb2wsIHJvb3RHZXR0ZXJzLCBwYWdpbmF0aW9uLCBhZ2VDb2x1bW4pKTsKICAgICAgaWYgKG5hbWVzcGFjZWQpIHsKICAgICAgICBvdXQucHVzaChuYW1lc3BhY2VDb2x1bW4pOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBvdXQucHVzaChoZWFkZXJGcm9tU2NoZW1hQ29sKGNvbCwgcm9vdEdldHRlcnMsIHBhZ2luYXRpb24sIGFnZUNvbHVtbikpOwogICAgfQogIH0KICAvLyBBbHdheXMgdHJ5IHRvIGhhdmUgYW4gaWRlbnRpZmllcgogIGlmICghaGFzTmFtZSkgewogICAgaW5zZXJ0QXQob3V0LCAxLCBpZENvbHVtbiB8fCBuYW1lQ29sdW1uKTsKICAgIGlmIChuYW1lc3BhY2VkKSB7CiAgICAgIGluc2VydEF0KG91dCwgMiwgbmFtZXNwYWNlQ29sdW1uKTsKICAgIH0KICB9CiAgLy8gQWdlIGFsd2F5cyBnb2VzIGxhc3QKICBjb25zdCBhZ2VDb2x1bW5BY3R1YWwgPSBvdXQuZmluZChvID0+IG8ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSAnYWdlJyk7CiAgaWYgKGFnZUNvbHVtbkFjdHVhbCkgewogICAgcmVtb3ZlT2JqZWN0KG91dCwgYWdlQ29sdW1uQWN0dWFsKTsKICAgIGlmICh0eXBlT3B0aW9ucy5zaG93QWdlKSB7CiAgICAgIG91dC5wdXNoKGFnZUNvbHVtbkFjdHVhbCk7CiAgICB9CiAgfQogIHJldHVybiBvdXQ7Cn0KLyoqCiAqIEdpdmVuIGEgc2NoZW1hJ3MgYXR0cmlidXRlLmNvbHVtbiB2YWx1ZSBjcmVhdGUgYSBoZWFkZXIKICovCmV4cG9ydCBmdW5jdGlvbiBoZWFkZXJGcm9tU2NoZW1hQ29sKGNvbCwgcm9vdEdldHRlcnMsIHBhZ2luYXRpb24sIGFnZUNvbHVtbikgewogIGxldCBmb3JtYXR0ZXIsIHdpZHRoLCBmb3JtYXR0ZXJPcHRzOwogIGlmICgoY29sLmZvcm1hdCA9PT0gJycgfHwgY29sLmZvcm1hdCA9PT0gJ2RhdGUnKSAmJiBjb2wubmFtZSA9PT0gJ0FnZScgJiYgYWdlQ29sdW1uKSB7CiAgICByZXR1cm4gYWdlQ29sdW1uOwogIH0KICBpZiAoY29sLmZvcm1hdCA9PT0gJ2RhdGUnIHx8IGNvbC50eXBlID09PSAnZGF0ZScpIHsKICAgIGZvcm1hdHRlciA9ICdEYXRlJzsKICAgIHdpZHRoID0gMTIwOwogICAgZm9ybWF0dGVyT3B0cyA9IHsKICAgICAgbXVsdGlsaW5lOiB0cnVlCiAgICB9OwogIH0KICBpZiAoY29sLnR5cGUgPT09ICdudW1iZXInIHx8IGNvbC50eXBlID09PSAnaW50JykgewogICAgZm9ybWF0dGVyID0gJ051bWJlcic7CiAgfQogIGNvbnN0IGNvbE5hbWUgPSBjb2wubmFtZS5pbmNsdWRlcygnICcpID8gY29sLm5hbWUuc3BsaXQoJyAnKS5tYXAod29yZCA9PiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zdWJzdHJpbmcoMSkpLmpvaW4oJycpIDogY29sLm5hbWU7CiAgY29uc3QgZXhpc3RzID0gcm9vdEdldHRlcnNbJ2kxOG4vZXhpc3RzJ107CiAgY29uc3QgdCA9IHJvb3RHZXR0ZXJzWydpMThuL3QnXTsKICBjb25zdCBsYWJlbEtleSA9IGB0YWJsZUhlYWRlcnMuJHtjb2xOYW1lLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgY29sTmFtZS5zbGljZSgxKX1gOwogIGNvbnN0IGRlc2NyaXB0aW9uID0gY29sLmRlc2NyaXB0aW9uIHx8ICcnOwogIGNvbnN0IHRvb2x0aXAgPSBkZXNjcmlwdGlvbiAmJiBkZXNjcmlwdGlvbltkZXNjcmlwdGlvbi5sZW5ndGggLSAxXSA9PT0gJy4nID8gZGVzY3JpcHRpb24uc2xpY2UoMCwgLTEpIDogZGVzY3JpcHRpb247CiAgY29uc3QgcGF0aCA9IHJvd1ZhbHVlR2V0dGVyKGNvbCwgZmFsc2UpOwogIC8vIElmIHdlJ3JlIG5vdCBwYWdpbmF0aW5nIHVzZSBhIGZ1bmN0aW9uIHRvIGdldCB0aGUgdmFsdWUsIG90aGVyd2lzZSB1c2UgdGhlIHN0cmluZyBwYXRoCiAgY29uc3QgYWx0UGF0aCA9IHBhZ2luYXRpb24gPyBwYXRoIDogcm93VmFsdWVHZXR0ZXIoY29sLCB0cnVlKTsKICByZXR1cm4gewogICAgbmFtZTogY29sLm5hbWUudG9Mb3dlckNhc2UoKSwKICAgIGxhYmVsOiBleGlzdHMobGFiZWxLZXkpID8gdChsYWJlbEtleSkgOiBjb2wubmFtZSwKICAgIHZhbHVlOiBhbHRQYXRoLAogICAgc29ydDogW3BhdGhdLAogICAgc2VhcmNoOiBwYXRoLAogICAgZm9ybWF0dGVyLAogICAgZm9ybWF0dGVyT3B0cywKICAgIHdpZHRoLAogICAgdG9vbHRpcAogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIHJvd1ZhbHVlR2V0dGVyKGNvbCwgYXNGbiA9IHRydWUpIHsKICAvLyAnZmllbGQnIGNvbWVzIGZyb20gdGhlIHNjaGVtYSAtIHR5cGljYWxseSBpdCBpcyBvZiB0aGUgZm9ybSAkLm1ldGFkYXRhLmZpZWxkW05dCiAgLy8gV2Ugd2lsbCB1c2UgSnNvblBhdGggdG8gbG9vayB1cCB0aGlzIHZhbHVlLCB3aGljaCBpcyBjb3N0bHkgLSBzbyBpZiB3ZSBjYW4gZGV0ZWN0IHRoaXMgZm9ybWF0CiAgLy8gVXNlIGEgbW9yZSBlZmZpY2llbnQgZnVuY3Rpb24gdG8gZ2V0IHRoZSB2YWx1ZQogIGNvbnN0IHZhbHVlID0gY29sLmZpZWxkLnN0YXJ0c1dpdGgoJy4nKSA/IGAkJHtjb2wuZmllbGR9YCA6IGNvbC5maWVsZDsKICBjb25zdCBmb3VuZCA9IHZhbHVlLm1hdGNoKEZJRUxEX1JFR0VYKTsKICBpZiAoZm91bmQgJiYgZm91bmQubGVuZ3RoID09PSAyKSB7CiAgICBjb25zdCBmaWVsZEluZGV4ID0gcGFyc2VJbnQoZm91bmRbMV0sIDEwKTsKICAgIGlmIChhc0ZuKSB7CiAgICAgIHJldHVybiByb3cgPT4gewogICAgICAgIHZhciBfYSwgX2I7CiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IHJvdy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpZWxkcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW2ZpZWxkSW5kZXhdOwogICAgICB9OwogICAgfQogICAgcmV0dXJuIGBtZXRhZGF0YS5maWVsZHMuJHtmaWVsZEluZGV4fWA7CiAgfQogIHJldHVybiB2YWx1ZTsKfQovKioKICogQ29uZGl0aW9uYWxseSBkZXRlcm1pbmUgaWYgYSByZXNvdXJjZSBzaG91bGQgdXNlIG5haXZlIGt1YmUgcGFnaW5hdGlvbiBhcGkgdG8gZmV0Y2ggYWxsIHJlc3VsdHMKICogKG5vdCBqdXN0IGZpcnN0IHBhZ2UpCiAqLwpleHBvcnQgY29uc3QgY29uZGl0aW9uYWxEZXBhZ2luYXRlID0gKGRlcGFnaW5hdGUsIGRlcGFnaW5hdGVBcmdzKSA9PiB7CiAgaWYgKHR5cGVvZiBkZXBhZ2luYXRlID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gISFkZXBhZ2luYXRlQXJncyA/IGRlcGFnaW5hdGUoZGVwYWdpbmF0ZUFyZ3MpIDogZmFsc2U7CiAgfQogIHJldHVybiBkZXBhZ2luYXRlOwp9OwovKioKICogU2V0dXAgYSBmdW5jdGlvbiB0aGF0IHdpbGwgZGV0ZXJtaW5lIGlmIGEgcmVzb3VyY2Ugc2hvdWxkIHVzZSBuYXRpdmUga3ViZSBwYWdpbmF0aW9uIGFwaSB0byBmZXRjaCBhbGwgcmVzb3VyY2VzCiAqIChub3QganVzdCB0aGUgZmlyc3QgcGFnZSkKICovCmV4cG9ydCBjb25zdCBjb25maWd1cmVDb25kaXRpb25hbERlcGFnaW5hdGUgPSAoewogIG1heFJlc291cmNlQ291bnQsCiAgaXNOb3JtYW4gPSBmYWxzZQp9KSA9PiB7CiAgcmV0dXJuIGZuQXJncyA9PiB7CiAgICB2YXIgX2EsIF9iOwogICAgY29uc3QgewogICAgICByb290R2V0dGVycwogICAgfSA9IGZuQXJncy5jdHg7CiAgICBjb25zdCB7CiAgICAgIHR5cGUKICAgIH0gPSBmbkFyZ3MuYXJnczsKICAgIGNvbnN0IHNhZmVUeXBlID0gaXNOb3JtYW4gPyBgbWFuYWdlbWVudC5jYXR0bGUuaW8uJHt0eXBlfWAgOiB0eXBlOwogICAgY29uc3QgaW5TdG9yZSA9IHJvb3RHZXR0ZXJzWydjdXJyZW50U3RvcmUnXShzYWZlVHlwZSk7CiAgICBjb25zdCByZXNvdXJjZUNvdW50cyA9IChfYSA9IHJvb3RHZXR0ZXJzW2Ake2luU3RvcmV9L2FsbGBdKENPVU5UKVswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvdW50c1tzYWZlVHlwZV07CiAgICBjb25zdCByZXNvdXJjZUNvdW50ID0gKF9iID0gcmVzb3VyY2VDb3VudHMgPT09IG51bGwgfHwgcmVzb3VyY2VDb3VudHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc291cmNlQ291bnRzLnN1bW1hcnkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jb3VudDsKICAgIHJldHVybiByZXNvdXJjZUNvdW50ICE9PSB1bmRlZmluZWQgPyByZXNvdXJjZUNvdW50IDwgbWF4UmVzb3VyY2VDb3VudCA6IGZhbHNlOwogIH07Cn07"},{"version":3,"names":["findBy","insertAt","removeObject","COUNT","FIELD_REGEX","createHeaders","ctx","opt","headers","typeOptions","schema","columns","pagination","state","stateColumn","name","nameColumn","namespace","namespaceColumn","id","idColumn","age","ageColumn","rootGetters","out","showState","attributes","columnsFromSchema","_a","length","map","entry","col","headerFromSchemaCol","filter","hasName","namespaced","format","push","ageColumnActual","find","o","toLocaleLowerCase","showAge","formatter","width","formatterOpts","type","multiline","colName","includes","split","word","charAt","toUpperCase","substring","join","exists","t","labelKey","toLowerCase","slice","description","tooltip","path","rowValueGetter","altPath","label","value","sort","search","asFn","field","startsWith","found","match","fieldIndex","parseInt","row","_b","metadata","fields","conditionalDepaginate","depaginate","depaginateArgs","configureConditionalDepaginate","maxResourceCount","isNorman","fnArgs","args","safeType","inStore","resourceCounts","counts","resourceCount","summary","count","undefined"],"sources":["/app/node_modules/@rancher/shell/store/type-map.utils.ts"],"sourcesContent":["import { SchemaAttribute, SchemaAttributeColumn } from '@shell/plugins/steve/schema';\nimport { TableColumn } from '@shell/types/store/type-map';\nimport { VuexStoreGetters } from '@shell/types/store/vuex';\nimport { findBy, insertAt, removeObject } from '@shell/utils/array';\nimport { COUNT } from '@shell/config/types';\nimport { ActionFindAllArgs } from '@shell/types/store/dashboard-store.types';\n\nconst FIELD_REGEX = /^\\$\\.metadata\\.fields\\[([0-9]*)\\]/;\n\ntype StoreColumns = { [schemaId: string]: TableColumn[]}\n\n/**\n * Create the headers used in lists to show a resource\n *\n * These could be\n * - Pre-configured via the product (either non-paginated or paginated)\n * - Generated dynamically from schema's attributes.columns\n *\n * There's also some additional ones like state, age, and at least one of name or id\n *\n * The order of these are massaged as well\n */\nexport function createHeaders(\n  ctx: {\n    getters: VuexStoreGetters,\n    rootGetters: VuexStoreGetters,\n    state: any,\n  },\n  opt: {\n    headers: StoreColumns,\n    typeOptions: any,\n    schema: any, // Once the schema-diet changes go in this can be typed\n    columns: {\n      /**\n       * Always show this column (if showState is true)\n       */\n      state: TableColumn,\n      /**\n        * If dynamically creating columns, use specific column for name, if required\n        */\n      name?: TableColumn,\n      /**\n        * If dynamically creating columns, use specific column for id, if required\n        */\n      id?: TableColumn\n      /**\n        * If dynamically creating columns, use specific column for namespace, if required\n        */\n      namespace: TableColumn,\n      /**\n        * If dynamically creating columns, use specific column for age, if required\n        */\n      age: TableColumn,\n    },\n    pagination: boolean\n  }): TableColumn[] {\n  const {\n    headers, typeOptions, schema, columns, pagination\n  } = opt;\n  const {\n    state: stateColumn, name: nameColumn, namespace: namespaceColumn, id: idColumn, age: ageColumn\n  } = columns;\n  const { rootGetters } = ctx;\n  const out = typeOptions.showState ? [stateColumn] : [];\n  const attributes = (schema.attributes as SchemaAttribute) || {};\n  const columnsFromSchema = attributes.columns || [];\n\n  // A specific list has been provided\n  if ( headers?.[schema.id]?.length ) {\n    return headers[schema.id].map((entry: any) => {\n      if ( typeof entry === 'string' ) {\n        const col = findBy(columnsFromSchema, 'name', entry);\n\n        if ( col ) {\n          return headerFromSchemaCol(col, rootGetters, pagination, ageColumn);\n        } else {\n          return null;\n        }\n      } else {\n        return entry;\n      }\n    }).filter((col: SchemaAttributeColumn) => !!col);\n  }\n\n  // Otherwise make one up from schema\n  let hasName = false;\n  const namespaced = attributes.namespaced || false;\n\n  for ( const col of columnsFromSchema ) {\n    if ( col.format === 'name' ) {\n      hasName = true;\n      out.push(nameColumn || headerFromSchemaCol(col, rootGetters, pagination, ageColumn));\n      if ( namespaced ) {\n        out.push(namespaceColumn);\n      }\n    } else {\n      out.push(headerFromSchemaCol(col, rootGetters, pagination, ageColumn));\n    }\n  }\n\n  // Always try to have an identifier\n  if ( !hasName ) {\n    insertAt(out, 1, idColumn || nameColumn);\n    if ( namespaced ) {\n      insertAt(out, 2, namespaceColumn);\n    }\n  }\n\n  // Age always goes last\n  const ageColumnActual = out.find((o) => o.name.toLocaleLowerCase() === 'age');\n\n  if ( ageColumnActual ) {\n    removeObject(out, ageColumnActual);\n    if ( typeOptions.showAge ) {\n      out.push(ageColumnActual);\n    }\n  }\n\n  return out;\n}\n\n/**\n * Given a schema's attribute.column value create a header\n */\nexport function headerFromSchemaCol(col: SchemaAttributeColumn, rootGetters: VuexStoreGetters, pagination: boolean, ageColumn: TableColumn): TableColumn {\n  let formatter, width, formatterOpts;\n\n  if ( (col.format === '' || col.format === 'date') && col.name === 'Age' && ageColumn ) {\n    return ageColumn;\n  }\n\n  if ( col.format === 'date' || col.type === 'date' ) {\n    formatter = 'Date';\n    width = 120;\n    formatterOpts = { multiline: true };\n  }\n\n  if ( col.type === 'number' || col.type === 'int' ) {\n    formatter = 'Number';\n  }\n\n  const colName = col.name.includes(' ') ? col.name.split(' ').map((word) => word.charAt(0).toUpperCase() + word.substring(1) ).join('') : col.name;\n\n  const exists = rootGetters['i18n/exists'];\n  const t = rootGetters['i18n/t'];\n  const labelKey = `tableHeaders.${ colName.charAt(0).toLowerCase() + colName.slice(1) }`;\n  const description = col.description || '';\n  const tooltip = description && description[description.length - 1] === '.' ? description.slice(0, -1) : description;\n\n  const path = rowValueGetter(col, false) as string;\n  // If we're not paginating use a function to get the value, otherwise use the string path\n  const altPath = pagination ? path : rowValueGetter(col, true) as Function;\n\n  return {\n    name:   col.name.toLowerCase(),\n    label:  exists(labelKey) ? t(labelKey) : col.name,\n    value:  altPath,\n    sort:   [path],\n    search: path,\n    formatter,\n    formatterOpts,\n    width,\n    tooltip\n  };\n}\n\nexport function rowValueGetter(col: SchemaAttributeColumn, asFn = true): string | ((row: any) => string) {\n  // 'field' comes from the schema - typically it is of the form $.metadata.field[N]\n  // We will use JsonPath to look up this value, which is costly - so if we can detect this format\n  // Use a more efficient function to get the value\n  const value = col.field.startsWith('.') ? `$${ col.field }` : col.field;\n  const found = value.match(FIELD_REGEX);\n\n  if (found && found.length === 2) {\n    const fieldIndex = parseInt(found[1], 10);\n\n    if (asFn) {\n      return (row: any) => row.metadata?.fields?.[fieldIndex];\n    }\n\n    return `metadata.fields.${ fieldIndex }`;\n  }\n\n  return value;\n}\n\ntype conditionalDepaginateArgs ={\n  ctx: { rootGetters: VuexStoreGetters},\n  args: { type: string, opt: ActionFindAllArgs},\n};\ntype conditionalDepaginateFn = (args: conditionalDepaginateArgs) => boolean\n\n/**\n * Conditionally determine if a resource should use naive kube pagination api to fetch all results\n * (not just first page)\n */\nexport const conditionalDepaginate = (\n  depaginate?: conditionalDepaginateFn | boolean,\n  depaginateArgs?: conditionalDepaginateArgs\n): boolean => {\n  if (typeof depaginate === 'function') {\n    return !!depaginateArgs ? depaginate(depaginateArgs) : false;\n  }\n\n  return depaginate as boolean;\n};\n\n/**\n * Setup a function that will determine if a resource should use native kube pagination api to fetch all resources\n * (not just the first page)\n */\nexport const configureConditionalDepaginate = (\n  { maxResourceCount, isNorman = false }: { maxResourceCount: number, isNorman: boolean },\n): conditionalDepaginateFn => {\n  return (fnArgs: conditionalDepaginateArgs ): boolean => {\n    const { rootGetters } = fnArgs.ctx;\n    const { type } = fnArgs.args;\n    const safeType = isNorman ? `management.cattle.io.${ type }` : type;\n\n    const inStore = rootGetters['currentStore'](safeType);\n    const resourceCounts = rootGetters[`${ inStore }/all`](COUNT)[0]?.counts[safeType];\n    const resourceCount = resourceCounts?.summary?.count;\n\n    return resourceCount !== undefined ? resourceCount < maxResourceCount : false;\n  };\n};\n"],"mappings":"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","ignoreList":[]}]}