{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/ts-loader/index.js??ref--15-3!/app/node_modules/@rancher/shell/composables/useLabeledFormElement.ts","dependencies":[{"path":"/app/node_modules/@rancher/shell/composables/useLabeledFormElement.ts","mtime":1764054237091},{"path":"/app/pkg/rancher-support-ui/babel.config.js","mtime":1764051174054},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910},{"path":"/app/node_modules/ts-loader/index.js","mtime":1764054259329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IF9WSUVXLCBfRURJVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKZXhwb3J0IGNvbnN0IGxhYmVsZWRGb3JtRWxlbWVudFByb3BzID0gewogIHRvb2x0aXBLZXk6IHsKICAgIHR5cGU6IFN0cmluZywKICAgIGRlZmF1bHQ6IG51bGwKICB9LAogIHBsYWNlaG9sZGVyOiB7CiAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgZGVmYXVsdDogJycKICB9LAogIHBsYWNlaG9sZGVyS2V5OiB7CiAgICB0eXBlOiBTdHJpbmcsCiAgICBkZWZhdWx0OiBudWxsCiAgfSwKICBsYWJlbDogewogICAgdHlwZTogU3RyaW5nLAogICAgZGVmYXVsdDogbnVsbAogIH0sCiAgbGFiZWxLZXk6IHsKICAgIHR5cGU6IFN0cmluZywKICAgIGRlZmF1bHQ6IG51bGwKICB9LAogIHZhbHVlOiB7CiAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXIsIE9iamVjdF0sCiAgICBkZWZhdWx0OiAnJwogIH0sCiAgbW9kZTogewogICAgdHlwZTogU3RyaW5nLAogICAgZGVmYXVsdDogX0VESVQKICB9LAogIHJ1bGVzOiB7CiAgICBkZWZhdWx0OiAoKSA9PiBbXSwKICAgIHR5cGU6IEFycmF5LAogICAgLy8gd2Ugb25seSB3YW50IGZ1bmN0aW9ucyBpbiB0aGUgcnVsZXMgYXJyYXkKICAgIHZhbGlkYXRvcjogcnVsZXMgPT4gcnVsZXMuZXZlcnkocnVsZSA9PiBbJ2Z1bmN0aW9uJ10uaW5jbHVkZXModHlwZW9mIHJ1bGUpKQogIH0sCiAgcmVxdWlyZWQ6IHsKICAgIHR5cGU6IEJvb2xlYW4sCiAgICBkZWZhdWx0OiBmYWxzZQogIH0sCiAgZGlzYWJsZWQ6IHsKICAgIHR5cGU6IEJvb2xlYW4sCiAgICBkZWZhdWx0OiBmYWxzZQogIH0KfTsKZXhwb3J0IGNvbnN0IHVzZUxhYmVsZWRGb3JtRWxlbWVudCA9IChwcm9wcywgZW1pdCkgPT4gewogIGNvbnN0IHJhaXNlZCA9IHJlZihwcm9wcy5tb2RlID09PSBfVklFVyB8fCAhIWAke3Byb3BzLnZhbHVlfWApOwogIGNvbnN0IGZvY3VzZWQgPSByZWYoZmFsc2UpOwogIGNvbnN0IGJsdXJyZWQgPSByZWYobnVsbCk7CiAgY29uc3QgcmVxdWlyZWRGaWVsZCA9IGNvbXB1dGVkKCgpID0+IHsKICAgIHZhciBfYTsKICAgIHJldHVybiBwcm9wcy5yZXF1aXJlZCB8fCAoKF9hID0gcHJvcHMucnVsZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zb21lKHJ1bGUgPT4gKHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS5uYW1lKSA9PT0gJ3JlcXVpcmVkJykpOwogIH0pOwogIGNvbnN0IGlzVmlldyA9IGNvbXB1dGVkKCgpID0+IHsKICAgIHJldHVybiBwcm9wcy5tb2RlID09PSBfVklFVzsKICB9KTsKICBjb25zdCBpc0Rpc2FibGVkID0gY29tcHV0ZWQoKCkgPT4gewogICAgcmV0dXJuIHByb3BzLmRpc2FibGVkIHx8IGlzVmlldy52YWx1ZTsKICB9KTsKICBjb25zdCB2YWxpZGF0aW9uTWVzc2FnZSA9IGNvbXB1dGVkKCgpID0+IHsKICAgIGNvbnN0IHJlcXVpcmVkUnVsZSA9IHByb3BzLnJ1bGVzLmZpbmQocnVsZSA9PiAocnVsZSA9PT0gbnVsbCB8fCBydWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBydWxlLm5hbWUpID09PSAncmVxdWlyZWQnKTsKICAgIGNvbnN0IHJ1bGVNZXNzYWdlcyA9IFtdOwogICAgY29uc3QgdmFsdWUgPSBwcm9wcy52YWx1ZTsKICAgIGlmIChyZXF1aXJlZFJ1bGUgJiYgYmx1cnJlZC52YWx1ZSAmJiAhZm9jdXNlZC52YWx1ZSkgewogICAgICBjb25zdCBtZXNzYWdlID0gcmVxdWlyZWRSdWxlKHZhbHVlKTsKICAgICAgaWYgKCEhbWVzc2FnZSkgewogICAgICAgIHJldHVybiBtZXNzYWdlOwogICAgICB9CiAgICB9CiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgcHJvcHMucnVsZXMpIHsKICAgICAgY29uc3QgbWVzc2FnZSA9IHJ1bGUodmFsdWUpOwogICAgICBpZiAoISFtZXNzYWdlICYmIHJ1bGUubmFtZSAhPT0gJ3JlcXVpcmVkJykgewogICAgICAgIHJ1bGVNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpOwogICAgICB9CiAgICB9CiAgICBpZiAocnVsZU1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgKGJsdXJyZWQudmFsdWUgfHwgZm9jdXNlZC52YWx1ZSkpIHsKICAgICAgcmV0dXJuIHJ1bGVNZXNzYWdlcy5qb2luKCcsICcpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KICB9KTsKICBjb25zdCBvbkZvY3VzTGFiZWxlZCA9ICgpID0+IHsKICAgIHJhaXNlZC52YWx1ZSA9IHRydWU7CiAgICBmb2N1c2VkLnZhbHVlID0gdHJ1ZTsKICB9OwogIGNvbnN0IG9uQmx1ckxhYmVsZWQgPSAoKSA9PiB7CiAgICBmb2N1c2VkLnZhbHVlID0gZmFsc2U7CiAgICBpZiAoIXByb3BzLnZhbHVlKSB7CiAgICAgIHJhaXNlZC52YWx1ZSA9IGZhbHNlOwogICAgfQogICAgYmx1cnJlZC52YWx1ZSA9IERhdGUubm93KCk7CiAgfTsKICByZXR1cm4gewogICAgcmFpc2VkLAogICAgZm9jdXNlZCwKICAgIGJsdXJyZWQsCiAgICBvbkZvY3VzTGFiZWxlZCwKICAgIG9uQmx1ckxhYmVsZWQsCiAgICBpc0Rpc2FibGVkLAogICAgdmFsaWRhdGlvbk1lc3NhZ2UsCiAgICByZXF1aXJlZEZpZWxkCiAgfTsKfTs="},{"version":3,"names":["ref","computed","_VIEW","_EDIT","labeledFormElementProps","tooltipKey","type","String","default","placeholder","Number","placeholderKey","label","labelKey","value","Object","mode","rules","Array","validator","every","rule","includes","required","Boolean","disabled","useLabeledFormElement","props","emit","raised","focused","blurred","requiredField","_a","some","name","isView","isDisabled","validationMessage","requiredRule","find","ruleMessages","message","push","length","join","undefined","onFocusLabeled","onBlurLabeled","Date","now"],"sources":["/app/node_modules/@rancher/shell/composables/useLabeledFormElement.ts"],"sourcesContent":["import { ref, computed, ComputedRef, Ref } from 'vue';\nimport { _VIEW, _EDIT } from '@shell/config/query-params';\n\ninterface LabeledFormElementProps {\n  mode: string;\n  value: string | number | Record<string, any>\n  required: boolean;\n  disabled: boolean;\n  rules: Array<any>;\n}\n\ninterface UseLabeledFormElement {\n  raised: Ref<boolean>;\n  focused: Ref<boolean>;\n  blurred: Ref<number | null>;\n  requiredField: ComputedRef<any>;\n  isDisabled: ComputedRef<any>;\n  validationMessage: ComputedRef<any>;\n  onFocusLabeled: () => void;\n  onBlurLabeled: () => void;\n}\n\nexport const labeledFormElementProps = {\n  tooltipKey: {\n    type:    String,\n    default: null\n  },\n  placeholder: {\n    type:    [String, Number],\n    default: ''\n  },\n  placeholderKey: {\n    type:    String,\n    default: null\n  },\n  label: {\n    type:    String,\n    default: null\n  },\n  labelKey: {\n    type:    String,\n    default: null\n  },\n  value: {\n    type:    [String, Number, Object],\n    default: ''\n  },\n  mode: {\n    type:    String,\n    default: _EDIT,\n  },\n  rules: {\n    default:   (): Array<unknown> => [],\n    type:      Array,\n    // we only want functions in the rules array\n    validator: (rules: Array<unknown>): boolean => rules.every((rule: unknown) => ['function'].includes(typeof rule))\n  },\n  required: {\n    type:    Boolean,\n    default: false,\n  },\n  disabled: {\n    type:    Boolean,\n    default: false,\n  },\n};\n\nexport const useLabeledFormElement = (props: LabeledFormElementProps, emit: (event: string, ...args: any[]) => void): UseLabeledFormElement => {\n  const raised = ref(props.mode === _VIEW || !!`${ props.value }`);\n  const focused = ref(false);\n  const blurred = ref<number | null>(null);\n\n  const requiredField = computed(() => {\n    return props.required || props.rules?.some((rule: any) => rule?.name === 'required');\n  });\n\n  const isView = computed(() => {\n    return props.mode === _VIEW;\n  });\n\n  const isDisabled = computed(() => {\n    return props.disabled || isView.value;\n  });\n\n  const validationMessage = computed(() => {\n    const requiredRule = props.rules.find((rule: any) => rule?.name === 'required') as Function;\n    const ruleMessages = [];\n    const value = props.value;\n\n    if (requiredRule && blurred.value && !focused.value) {\n      const message = requiredRule(value);\n\n      if (!!message) {\n        return message;\n      }\n    }\n\n    for (const rule of props.rules) {\n      const message = rule(value);\n\n      if (!!message && rule.name !== 'required') {\n        ruleMessages.push(message);\n      }\n    }\n\n    if (ruleMessages.length > 0 && (blurred.value || focused.value)) {\n      return ruleMessages.join(', ');\n    } else {\n      return undefined;\n    }\n  });\n\n  const onFocusLabeled = () => {\n    raised.value = true;\n    focused.value = true;\n  };\n\n  const onBlurLabeled = () => {\n    focused.value = false;\n\n    if (!props.value) {\n      raised.value = false;\n    }\n\n    blurred.value = Date.now();\n  };\n\n  return {\n    raised,\n    focused,\n    blurred,\n    onFocusLabeled,\n    onBlurLabeled,\n    isDisabled,\n    validationMessage,\n    requiredField\n  };\n};\n"],"mappings":"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","ignoreList":[]}]}