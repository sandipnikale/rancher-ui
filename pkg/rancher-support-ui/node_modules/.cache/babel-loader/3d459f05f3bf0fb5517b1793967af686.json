{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/@rancher/shell/utils/promise.js","dependencies":[{"path":"/app/node_modules/@rancher/shell/utils/promise.js","mtime":1764054237091},{"path":"/app/pkg/rancher-support-ui/babel.config.js","mtime":1764051174054},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFF1ZXVlIGZyb20gJy4vcXVldWUnOwphc3luYyBmdW5jdGlvbiBfaGFzaChoYXNoLCBmbk5hbWUpIHsKICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoaGFzaCk7CiAgY29uc3QgcHJvbWlzZXMgPSBPYmplY3QudmFsdWVzKGhhc2gpOwogIGNvbnN0IHJlcyA9IGF3YWl0IFByb21pc2VbZm5OYW1lXShwcm9taXNlcyk7CiAgY29uc3Qgb3V0ID0ge307CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7CiAgICBvdXRba2V5c1tpXV0gPSByZXNbaV07CiAgfQogIHJldHVybiBvdXQ7Cn0KZXhwb3J0IGZ1bmN0aW9uIGFsbEhhc2goaGFzaCkgewogIHJldHVybiBfaGFzaChoYXNoLCAnYWxsJyk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGFsbEhhc2hTZXR0bGVkKGhhc2gpIHsKICByZXR1cm4gX2hhc2goaGFzaCwgJ2FsbFNldHRsZWQnKTsKfQpleHBvcnQgZnVuY3Rpb24gZWFjaExpbWl0KGl0ZW1zLCBsaW1pdCwgaXRlcmF0b3IsIGRlYnVnID0gZmFsc2UpIHsKICBpZiAoZGVidWcpIHsKICAgIGNvbnNvbGUubG9nKCdlYWNoTGltaXQgb2YnLCBpdGVtcy5sZW5ndGgsICcgaXRlbXMnLCBsaW1pdCwgJ2F0IGEgdGltZScpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICB9CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIGNvbnN0IHF1ZXVlID0gbmV3IFF1ZXVlKCk7CiAgICBsZXQgcGVuZGluZyA9IDA7CiAgICBsZXQgZmFpbGVkID0gZmFsc2U7CiAgICBjb25zdCBvdXQgPSBbXTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgcXVldWUuZW5xdWV1ZSh7CiAgICAgICAgaXRlbTogaXRlbXNbaV0sCiAgICAgICAgaWR4OiBpCiAgICAgIH0pOwogICAgfQogICAgcHJvY2VzcygpOwogICAgZnVuY3Rpb24gcHJvY2VzcygpIHsKICAgICAgaWYgKGRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coYHByb2Nlc3MsIHF1ZXVlPSR7cXVldWUuZ2V0TGVuZ3RoKCl9LCBwZW5kaW5nPSR7cGVuZGluZ30sIGZhaWxlZD0ke2ZhaWxlZH1gKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgIH0KICAgICAgaWYgKGZhaWxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAocXVldWUuaXNFbXB0eSgpICYmIHBlbmRpbmcgPT09IDApIHsKICAgICAgICByZXR1cm4gcmVzb2x2ZShvdXQpOwogICAgICB9CiAgICAgIHdoaWxlICghcXVldWUuaXNFbXB0eSgpICYmIHBlbmRpbmcgPCBsaW1pdCAmJiAhZmFpbGVkKSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgaXRlbSwKICAgICAgICAgIGlkeAogICAgICAgIH0gPSBxdWV1ZS5kZXF1ZXVlKCk7CiAgICAgICAgaWYgKGRlYnVnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnUnVubmluZycsIGl0ZW0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICB9CiAgICAgICAgcGVuZGluZysrOwogICAgICAgIGl0ZXJhdG9yKGl0ZW0sIGlkeCkudGhlbihyZXMgPT4gewogICAgICAgICAgaWYgKGRlYnVnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEb25lJywgaXRlbSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgfQogICAgICAgICAgb3V0W2lkeF0gPSByZXM7CiAgICAgICAgICBwZW5kaW5nLS07CiAgICAgICAgICBwcm9jZXNzKCk7CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGlmIChkZWJ1ZykgewogICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkJywgZXJyLCBpdGVtKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICB9CiAgICAgICAgICBmYWlsZWQgPSB0cnVlOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gZGVmZXJyZWQobmFtZSkgewogIGNvbnN0IG91dCA9IHt9OwogIG91dC5wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgb3V0LnJlc29sdmUgPSByZXNvbHZlOwogICAgb3V0LnJlamVjdCA9IHJlamVjdDsKICB9LCBuYW1lKTsKICByZXR1cm4gb3V0Owp9CgovKioKICogQXBwbHkgdGhlIHJlc3VsdCBvZiBhIHByb21pc2UgdG8gYSBnaXZlbiBvYmplY3QncyBwcm9wZXJ0eQogKgogKiBUaGlzIGlzIGEgbm9uLWJsb2NraW5nIG1ldGhvZAogKgogKiBAcGFyYW0gcHJvbWlzZSBQcm9taXNlIHRvIGZldGNoIHJlc3VsdCBmb3IKICogQHBhcmFtIG9iaiBPYmplY3QgdG8gc2V0IHJlc3VsdCBvZiBwcm9taXNlIHRvCiAqIEBwYXJhbSBrZXkgUHJvcGVydHkgaW4gb2JqZWN0IHRvIHNldCByZXN1bHQgdG8KICogQHBhcmFtIGxhYmVsIERlc2NyaXB0aW9uIG9mIHdoYXQgcHJvbWlzZSBpcyB0cnlpbmcgdG8gIGRvCiAqLwpleHBvcnQgZnVuY3Rpb24gc2V0UHJvbWlzZVJlc3VsdChwcm9taXNlLCBvYmosIGtleSwgbGFiZWwpIHsKICBwcm9taXNlLnRoZW4ocmVzID0+IHsKICAgIG9ialtrZXldID0gcmVzOwogIH0pLmNhdGNoKGUgPT4gewogICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG86ICcsIGxhYmVsLCBlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgfSk7Cn0="},{"version":3,"names":["Queue","_hash","hash","fnName","keys","Object","promises","values","res","Promise","out","i","length","allHash","allHashSettled","eachLimit","items","limit","iterator","debug","console","log","resolve","reject","queue","pending","failed","enqueue","item","idx","process","getLength","isEmpty","dequeue","then","catch","err","deferred","name","promise","setPromiseResult","obj","key","label","e","warn"],"sources":["/app/node_modules/@rancher/shell/utils/promise.js"],"sourcesContent":["import Queue from './queue';\n\nasync function _hash(hash, fnName) {\n  const keys = Object.keys(hash);\n  const promises = Object.values(hash);\n\n  const res = await Promise[fnName](promises);\n  const out = {};\n\n  for ( let i = 0 ; i < keys.length ; i++ ) {\n    out[keys[i]] = res[i];\n  }\n\n  return out;\n}\n\nexport function allHash(hash) {\n  return _hash(hash, 'all');\n}\n\nexport function allHashSettled(hash) {\n  return _hash(hash, 'allSettled');\n}\n\nexport function eachLimit(items, limit, iterator, debug = false) {\n  if (debug) {\n    console.log('eachLimit of', items.length, ' items', limit, 'at a time'); // eslint-disable-line no-console\n  }\n\n  return new Promise((resolve, reject) => {\n    const queue = new Queue();\n    let pending = 0;\n    let failed = false;\n    const out = [];\n\n    for (let i = 0; i < items.length; i++) {\n      queue.enqueue({ item: items[i], idx: i });\n    }\n\n    process();\n\n    function process() {\n      if (debug) {\n        console.log(`process, queue=${ queue.getLength() }, pending=${ pending }, failed=${ failed }`); // eslint-disable-line no-console\n      }\n\n      if (failed) {\n        return;\n      }\n\n      if (queue.isEmpty() && pending === 0) {\n        return resolve(out);\n      }\n\n      while (!queue.isEmpty() && pending < limit && !failed) {\n        const { item, idx } = queue.dequeue();\n\n        if (debug) {\n          console.log('Running', item); // eslint-disable-line no-console\n        }\n\n        pending++;\n\n        iterator(item, idx).then((res) => {\n          if (debug) {\n            console.log('Done', item); // eslint-disable-line no-console\n          }\n\n          out[idx] = res;\n\n          pending--;\n          process();\n        }).catch((err) => {\n          if (debug) {\n            console.log('Failed', err, item); // eslint-disable-line no-console\n          }\n\n          failed = true;\n          reject(err);\n        });\n      }\n    }\n  });\n}\n\nexport function deferred(name) {\n  const out = {};\n\n  out.promise = new Promise((resolve, reject) => {\n    out.resolve = resolve;\n    out.reject = reject;\n  }, name);\n\n  return out;\n}\n\n/**\n * Apply the result of a promise to a given object's property\n *\n * This is a non-blocking method\n *\n * @param promise Promise to fetch result for\n * @param obj Object to set result of promise to\n * @param key Property in object to set result to\n * @param label Description of what promise is trying to  do\n */\nexport function setPromiseResult(promise, obj, key, label) {\n  promise\n    .then((res) => {\n      obj[key] = res;\n    })\n    .catch((e) => {\n      console.warn('Failed to: ', label, e); // eslint-disable-line no-console\n    });\n}\n"],"mappings":"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","ignoreList":[]}]}