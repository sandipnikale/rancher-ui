{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js","dependencies":[{"path":"/app/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js","mtime":1764054237091},{"path":"/app/pkg/rancher-support-ui/babel.config.js","mtime":1764051174054},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgTk9STUFOX05BTUUgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IF9DTE9ORSwgX0NPTkZJRywgX0VESVQsIF9VTkZMQUcsIF9WSUVXLCBfWUFNTCwgQVMsIE1PREUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IFZJRVdfSU5fQVBJIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3ByZWZzJzsKaW1wb3J0IHsgYWRkT2JqZWN0LCBhZGRPYmplY3RzLCBmaW5kQnksIHJlbW92ZUF0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IEN1c3RvbVZhbGlkYXRvcnMgZnJvbSAnQHNoZWxsL3V0aWxzL2N1c3RvbS12YWxpZGF0b3JzJzsKaW1wb3J0IHsgZG93bmxvYWRGaWxlLCBnZW5lcmF0ZVppcCB9IGZyb20gJ0BzaGVsbC91dGlscy9kb3dubG9hZCc7CmltcG9ydCB7IGNsb25lLCBnZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgZWFjaExpbWl0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwppbXBvcnQgeyBzb3J0YWJsZU51bWVyaWNTdWZmaXggfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IGVzY2FwZUh0bWwsIHVjRmlyc3QgfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgdmFsaWRhdGVDaGFycywgdmFsaWRhdGVEbnNMaWtlVHlwZXMsIHZhbGlkYXRlTGVuZ3RoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3ZhbGlkYXRvcnMnOwppbXBvcnQgZm9ybVJ1bGVzR2VuZXJhdG9yIGZyb20gJ0BzaGVsbC91dGlscy92YWxpZGF0b3JzL2Zvcm1SdWxlcy9pbmRleCc7CmltcG9ydCB7IHdhaXRGb3IgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXN5bmMnOwppbXBvcnQganN5YW1sIGZyb20gJ2pzLXlhbWwnOwppbXBvcnQgY29tcGFjdCBmcm9tICdsb2Rhc2gvY29tcGFjdCc7CmltcG9ydCBmb3JJbiBmcm9tICdsb2Rhc2gvZm9ySW4nOwppbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSc7CmltcG9ydCBpc0Z1bmN0aW9uIGZyb20gJ2xvZGFzaC9pc0Z1bmN0aW9uJzsKaW1wb3J0IGlzU3RyaW5nIGZyb20gJ2xvZGFzaC9pc1N0cmluZyc7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgRXh0ZW5zaW9uUG9pbnQsIEFjdGlvbkxvY2F0aW9uIH0gZnJvbSAnQHNoZWxsL2NvcmUvdHlwZXMnOwppbXBvcnQgeyBnZXRBcHBsaWNhYmxlRXh0ZW5zaW9uRW5oYW5jZW1lbnRzIH0gZnJvbSAnQHNoZWxsL2NvcmUvcGx1Z2luLWhlbHBlcnMnOwpleHBvcnQgY29uc3QgRE5TX0xJS0VfVFlQRVMgPSBbJ2Ruc0xhYmVsJywgJ2Ruc0xhYmVsUmVzdHJpY3RlZCcsICdob3N0bmFtZSddOwpjb25zdCBSRU1BUF9TVEFURSA9IHsKICBkaXNhYmxlZDogJ2luYWN0aXZlJywKICBub3RhcHBsaWVkOiAnTm90IEFwcGxpZWQnLAogIG5vdHJlYWR5OiAnTm90IFJlYWR5JywKICB3YWl0YXBwbGllZDogJ1dhaXQgQXBwbGllZCcsCiAgb3V0b2ZzeW5jOiAnT3V0IG9mIFN5bmMnLAogICdpbi1wcm9ncmVzcyc6ICdJbiBQcm9ncmVzcycsCiAgZ2l0dXBkYXRpbmc6ICdHaXQgVXBkYXRpbmcnLAogIGVycmFwcGxpZWQ6ICdFcnIgQXBwbGllZCcsCiAgd2FpdGNoZWNraW46ICdXYWl0IENoZWNrLUluJywKICBvZmY6ICdEaXNhYmxlZCcsCiAgd2FpdGluZ2ZvcmluZnJhc3RydWN0dXJlOiAnV2FpdGluZyBmb3IgSW5mcmEnLAogIHdhaXRpbmdmb3Jub2RlcmVmOiAnV2FpdGluZyBmb3IgTm9kZSBSZWYnCn07CmNvbnN0IERFRkFVTFRfQ09MT1IgPSAnd2FybmluZyc7CmNvbnN0IERFRkFVTFRfSUNPTiA9ICd4JzsKY29uc3QgREVGQVVMVF9XQUlUX0lOVEVSVkFMID0gMTAwMDsKY29uc3QgREVGQVVMVF9XQUlUX1RNSU1FT1VUID0gMzAwMDA7CmV4cG9ydCBjb25zdCBTVEFURVNfRU5VTSA9IHsKICBJTl9VU0U6ICdpbi11c2UnLAogIElOX1BST0dSRVNTOiAnaW4tcHJvZ3Jlc3MnLAogIFBFTkRJTkdfUk9MTEJBQ0s6ICdwZW5kaW5nLXJvbGxiYWNrJywKICBQRU5ESU5HX1VQR1JBREU6ICdwZW5kaW5nLXVwZ3JhZGUnLAogIEFCT1JURUQ6ICdhYm9ydGVkJywKICBBQ1RJVkFUSU5HOiAnYWN0aXZhdGluZycsCiAgQUNUSVZFOiAnYWN0aXZlJywKICBBVkFJTEFCTEU6ICdhdmFpbGFibGUnLAogIEJBQ0tFRF9VUDogJ2JhY2tlZHVwJywKICBCT1VORDogJ2JvdW5kJywKICBCVUlMRElORzogJ2J1aWxkaW5nJywKICBDT01QTEVURUQ6ICdjb21wbGV0ZWQnLAogIENPUkRPTkVEOiAnY29yZG9uZWQnLAogIENPVU5UOiAnY291bnQnLAogIENSRUFURUQ6ICdjcmVhdGVkJywKICBDUkVBVElORzogJ2NyZWF0aW5nJywKICBERUFDVElWQVRJTkc6ICdkZWFjdGl2YXRpbmcnLAogIERFR1JBREVEOiAnZGVncmFkZWQnLAogIERFTklFRDogJ2RlbmllZCcsCiAgREVQTE9ZRUQ6ICdkZXBsb3llZCcsCiAgREVQTE9ZSU5HOiAnZGVwbG95aW5nJywKICBESVNBQkxFRDogJ2Rpc2FibGVkJywKICBESVNDT05ORUNURUQ6ICdkaXNjb25uZWN0ZWQnLAogIERSQUlORUQ6ICdkcmFpbmVkJywKICBEUkFJTklORzogJ2RyYWluaW5nJywKICBFUlJfQVBQTElFRDogJ2VycmFwcGxpZWQnLAogIEVSUk9SOiAnZXJyb3InLAogIEVSUk9SSU5HOiAnZXJyb3JpbmcnLAogIEVSUk9SUzogJ2Vycm9ycycsCiAgRVhQSVJFRDogJ2V4cGlyZWQnLAogIEVYUElSSU5HOiAnZXhwaXJpbmcnLAogIEZBSUw6ICdmYWlsJywKICBGQUlMRUQ6ICdmYWlsZWQnLAogIEhFQUxUSFk6ICdoZWFsdGh5JywKICBJTkFDVElWRTogJ2luYWN0aXZlJywKICBJTkZPOiAnaW5mbycsCiAgSU5JVElBTElaSU5HOiAnaW5pdGlhbGl6aW5nJywKICBJTlBST0dSRVNTOiAnaW5wcm9ncmVzcycsCiAgTE9DS0VEOiAnbG9ja2VkJywKICBNSUdSQVRJTkc6ICdtaWdyYXRpbmcnLAogIE1JU1NJTkc6ICdtaXNzaW5nJywKICBNT0RJRklFRDogJ21vZGlmaWVkJywKICBOT1RfQVBQTElDQUJMRTogJ25vdEFwcGxpY2FibGUnLAogIE5PVF9BUExMSUVEOiAnbm90YXBwbGllZCcsCiAgTk9UX1JFQURZOiAnbm90cmVhZHknLAogIE9GRjogJ29mZicsCiAgT1JQSEFORUQ6ICdvcnBoYW5lZCcsCiAgT1RIRVI6ICdvdGhlcicsCiAgT1VUX09GX1NZTkM6ICdvdXRvZnN5bmMnLAogIE9OX0dPSU5HOiAnb24tZ29pbmcnLAogIFBBU1M6ICdwYXNzJywKICBQQVNTRUQ6ICdwYXNzZWQnLAogIFBBVVNFRDogJ3BhdXNlZCcsCiAgUEVORElORzogJ3BlbmRpbmcnLAogIFBST1ZJU0lPTklORzogJ3Byb3Zpc2lvbmluZycsCiAgUFJPVklTSU9ORUQ6ICdwcm92aXNpb25lZCcsCiAgUFVSR0VEOiAncHVyZ2VkJywKICBQVVJHSU5HOiAncHVyZ2luZycsCiAgUkVBRFk6ICdyZWFkeScsCiAgUkVDT05ORUNUSU5HOiAncmVjb25uZWN0aW5nJywKICBSRUdJU1RFUklORzogJ3JlZ2lzdGVyaW5nJywKICBSRUlOSVRJQUxJWklORzogJ3JlaW5pdGlhbGl6aW5nJywKICBSRUxFQVNFRDogJ3JlbGVhc2VkJywKICBSRU1PVkVEOiAncmVtb3ZlZCcsCiAgUkVNT1ZJTkc6ICdyZW1vdmluZycsCiAgUkVRVUVTVEVEOiAncmVxdWVzdGVkJywKICBSRVNUQVJUSU5HOiAncmVzdGFydGluZycsCiAgUkVTVE9SSU5HOiAncmVzdG9yaW5nJywKICBSRVNJWklORzogJ3Jlc2l6aW5nJywKICBSVU5OSU5HOiAncnVubmluZycsCiAgU0tJUDogJ3NraXAnLAogIFNLSVBQRUQ6ICdza2lwcGVkJywKICBTVEFSVElORzogJ3N0YXJ0aW5nJywKICBTVE9QUEVEOiAnc3RvcHBlZCcsCiAgU1RPUFBJTkc6ICdzdG9wcGluZycsCiAgU1VDQ0VFREVEOiAnc3VjY2VlZGVkJywKICBTVUNDRVNTOiAnc3VjY2VzcycsCiAgU1VDQ0VTU0ZVTDogJ3N1Y2Nlc3NmdWwnLAogIFNVUEVSU0VERUQ6ICdzdXBlcnNlZGVkJywKICBTVVNQRU5ERUQ6ICdzdXNwZW5kZWQnLAogIFVOQVZBSUxBQkxFOiAndW5hdmFpbGFibGUnLAogIFVOSEVBTFRIWTogJ3VuaGVhbHRoeScsCiAgVU5JTlNUQUxMRUQ6ICd1bmluc3RhbGxlZCcsCiAgVU5JTlNUQUxMSU5HOiAndW5pbnN0YWxsaW5nJywKICBVTktOT1dOOiAndW5rbm93bicsCiAgVU5UUklHR0VSRUQ6ICd1bnRyaWdnZXJlZCcsCiAgVVBEQVRJTkc6ICd1cGRhdGluZycsCiAgV0FJVF9BUFBMSUVEOiAnd2FpdGFwcGxpZWQnLAogIFdBSVRfQ0hFQ0tJTjogJ3dhaXRjaGVja2luJywKICBXQUlUSU5HOiAnd2FpdGluZycsCiAgV0FSTklORzogJ3dhcm5pbmcnCn07CmV4cG9ydCBmdW5jdGlvbiBtYXBTdGF0ZVRvRW51bShzdGF0dXNTdHJpbmcpIHsKICAvLyBlLmcuIGluIGZsZWV0IFN0YXR1cyBpcyBDYXBpdGFsaXplZC4gVGhpcyBmdW5jdGlvbiB3aWxsIG1hcCBpdCB0byB0aGUgZW51bQogIHJldHVybiBPYmplY3QudmFsdWVzKFNUQVRFU19FTlVNKS5maW5kKHZhbCA9PiB7CiAgICByZXR1cm4gdmFsLnRvTG93ZXJDYXNlKCkgPT09IHN0YXR1c1N0cmluZy50b0xvY2FsZUxvd2VyQ2FzZSgpOwogIH0pOwp9CmV4cG9ydCBjb25zdCBTVEFURVMgPSB7CiAgW1NUQVRFU19FTlVNLklOX1VTRV06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdJbiBVc2UnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLklOX1BST0dSRVNTXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdJbiBQcm9ncmVzcycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlBFTkRJTkdfUk9MTEJBQ0tdOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2RvdC1oYWxmJywKICAgIGxhYmVsOiAnUGVuZGluZyBSb2xsYmFjaycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlBFTkRJTkdfVVBHUkFERV06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnZG90LWhhbGYnLAogICAgbGFiZWw6ICdQZW5kaW5nIFVwZGF0ZScsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLkFCT1JURURdOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnQWJvcnRlZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLkFDVElWQVRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ0FjdGl2YXRpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5BQ1RJVkVdOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2RvdC1vcGVuJywKICAgIGxhYmVsOiAnQWN0aXZlJywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5BVkFJTEFCTEVdOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2RvdC1vcGVuJywKICAgIGxhYmVsOiAnQXZhaWxhYmxlJywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5CQUNLRURfVVBdOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2JhY2t1cCcsCiAgICBsYWJlbDogJ0JhY2tlZCBVcCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uQk9VTkRdOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2RvdCcsCiAgICBsYWJlbDogJ0JvdW5kJywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5CVUlMRElOR106IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdCdWlsZGluZycsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uQ09NUExFVEVEXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3QnLAogICAgbGFiZWw6ICdDb21wbGV0ZWQnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLkNPUkRPTkVEXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdDb3Jkb25lZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLkNPVU5UXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3Qtb3BlbicsCiAgICBsYWJlbDogJ0NvdW50JywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5DUkVBVEVEXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdDcmVhdGVkJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uQ1JFQVRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ0NyZWF0aW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uREVBQ1RJVkFUSU5HXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdhZGp1c3QnLAogICAgbGFiZWw6ICdEZWFjdGl2YXRpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5ERUdSQURFRF06IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdEZWdyYWRlZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLkRFTklFRF06IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2FkanVzdCcsCiAgICBsYWJlbDogJ0RlbmllZCcsCiAgICBjb21wb3VuZEljb246ICdlcnJvcicKICB9LAogIFtTVEFURVNfRU5VTS5ERVBMT1lFRF06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdEZXBsb3llZCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uRElTQUJMRURdOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRGlzYWJsZWQnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5ESVNDT05ORUNURURdOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRGlzY29ubmVjdGVkJywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uRFJBSU5FRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnRHJhaW5lZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLkRSQUlOSU5HXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdEcmFpbmluZycsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLkVSUl9BUFBMSUVEXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdFcnJvciBBcHBsaWVkJywKICAgIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwogIH0sCiAgW1NUQVRFU19FTlVNLkVSUk9SXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdFcnJvcicsCiAgICBjb21wb3VuZEljb246ICdlcnJvcicKICB9LAogIFtTVEFURVNfRU5VTS5FUlJPUklOR106IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRXJyb3JpbmcnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uRVJST1JTXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdFcnJvcnMnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uRVhQSVJFRF06IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRXhwaXJlZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLkVYUElSSU5HXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ0V4cGlyaW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwogIH0sCiAgW1NUQVRFU19FTlVNLkZBSUxdOiB7CiAgICBjb2xvcjogJ2Vycm9yJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ0ZhaWwnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uRkFJTEVEXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdGYWlsZWQnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uSEVBTFRIWV06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdIZWFsdGh5JywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5JTkFDVElWRV06IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2RvdCcsCiAgICBsYWJlbDogJ0luYWN0aXZlJywKICAgIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwogIH0sCiAgW1NUQVRFU19FTlVNLklOSVRJQUxJWklOR106IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdJbml0aWFsaXppbmcnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5JTlBST0dSRVNTXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdzcGlubmVyJywKICAgIGxhYmVsOiAnSW4gUHJvZ3Jlc3MnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5JTkZPXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdpbmZvJywKICAgIGxhYmVsOiAnSW5mbycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLkxPQ0tFRF06IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAnYWRqdXN0JywKICAgIGxhYmVsOiAnTG9ja2VkJywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uTUlHUkFUSU5HXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdpbmZvJywKICAgIGxhYmVsOiAnTWlncmF0ZWQnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5NSVNTSU5HXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdhZGp1c3QnLAogICAgbGFiZWw6ICdNaXNzaW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uTU9ESUZJRURdOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2VkaXQnLAogICAgbGFiZWw6ICdNb2RpZmllZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLk5PVF9BUFBMSUNBQkxFXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdOb3QgQXBwbGljYWJsZScsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLk5PVF9BUExMSUVEXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdOb3QgQXBwbGllZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLk5PVF9SRUFEWV06IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnTm90IFJlYWR5JywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uT0ZGXTogewogICAgY29sb3I6ICdkYXJrZXInLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnT2ZmJwogIH0sCiAgW1NUQVRFU19FTlVNLk9OX0dPSU5HXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdpbmZvJywKICAgIGxhYmVsOiAnSW5mbycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLk9SUEhBTkVEXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdPcnBoYW5lZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLk9USEVSXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdpbmZvJywKICAgIGxhYmVsOiAnT3RoZXInLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5PVVRfT0ZfU1lOQ106IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnT3V0IE9mIFN5bmMnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5QQVNTXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3QtZG90ZmlsbCcsCiAgICBsYWJlbDogJ1Bhc3MnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLlBBU1NFRF06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LWRvdGZpbGwnLAogICAgbGFiZWw6ICdQYXNzZWQnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLlBBVVNFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnaW5mbycsCiAgICBsYWJlbDogJ1BhdXNlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlBFTkRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1BlbmRpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5QUk9WSVNJT05JTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2RvdCcsCiAgICBsYWJlbDogJ1Byb3Zpc2lvbmluZycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlBST1ZJU0lPTkVEXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3QnLAogICAgbGFiZWw6ICdQcm92aXNpb25lZCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uUFVSR0VEXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAncHVyZ2VkJywKICAgIGxhYmVsOiAnUHVyZ2VkJywKICAgIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwogIH0sCiAgW1NUQVRFU19FTlVNLlBVUkdJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3B1cmdlZCcsCiAgICBsYWJlbDogJ1B1cmdpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5SRUFEWV06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdSZWFkeScsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uUkVDT05ORUNUSU5HXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdSZWNvbm5lY3RpbmcnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uUkVHSVNURVJJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1JlZ2lzdGVyaW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uUkVJTklUSUFMSVpJTkddOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnUmVpbml0aWFsaXppbmcnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5SRUxFQVNFRF06IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdSZWxlYXNlZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLlJFTU9WRURdOiB7CiAgICBjb2xvcjogJ2Vycm9yJywKICAgIGljb246ICd0cmFzaCcsCiAgICBsYWJlbDogJ1JlbW92ZWQnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uUkVNT1ZJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RyYXNoJywKICAgIGxhYmVsOiAnUmVtb3ZpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5SRVFVRVNURURdOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1JlcXVlc3RlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlJFU1RBUlRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2FkanVzdCcsCiAgICBsYWJlbDogJ1Jlc3RhcnRpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5SRVNUT1JJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ21lZGljYWxjcm9zcycsCiAgICBsYWJlbDogJ1Jlc3RvcmluZycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlJFU0laSU5HXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdkb3QnLAogICAgbGFiZWw6ICdSZXNpemluZycsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLlJVTk5JTkddOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2RvdC1vcGVuJywKICAgIGxhYmVsOiAnUnVubmluZycsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uU0tJUF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdTa2lwJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU0tJUFBFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdTa2lwcGVkJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU1RBUlRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2FkanVzdCcsCiAgICBsYWJlbDogJ1N0YXJ0aW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU1RPUFBFRF06IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2RvdCcsCiAgICBsYWJlbDogJ1N0b3BwZWQnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uU1RPUFBJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2FkanVzdCcsCiAgICBsYWJlbDogJ1N0b3BwaW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU1VDQ0VFREVEXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3QtZG90ZmlsbCcsCiAgICBsYWJlbDogJ1N1Y2NlZWRlZCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uU1VDQ0VTU106IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdTdWNjZXNzJywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5TVUNDRVNTRlVMXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3Qtb3BlbicsCiAgICBsYWJlbDogJ1N1Y2Nlc3NmdWwnCiAgfSwKICBbU1RBVEVTX0VOVU0uU1VQRVJTRURFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdTdXBlcnNlZGVkJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU1VTUEVOREVEXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdwYXVzZScsCiAgICBsYWJlbDogJ1N1c3BlbmRlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlVOQVZBSUxBQkxFXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdVbmF2YWlsYWJsZScsCiAgICBjb21wb3VuZEljb246ICdlcnJvcicKICB9LAogIFtTVEFURVNfRU5VTS5VTkhFQUxUSFldOiB7CiAgICBjb2xvcjogJ2Vycm9yJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ1VuaGVhbHRoeScsCiAgICBjb21wb3VuZEljb246ICdlcnJvcicKICB9LAogIFtTVEFURVNfRU5VTS5VTklOU1RBTExFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAndHJhc2gnLAogICAgbGFiZWw6ICdVbmluc3RhbGxlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlVOSU5TVEFMTElOR106IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAndHJhc2gnLAogICAgbGFiZWw6ICdVbmluc3RhbGxpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5VTktOT1dOXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd4JywKICAgIGxhYmVsOiAnVW5rbm93bicsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLlVOVFJJR0dFUkVEXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdVbnRyaWdnZXJlZCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uVVBEQVRJTkddOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1VwZGF0aW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uV0FJVF9BUFBMSUVEXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdXYWl0IEFwcGxpZWQnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5XQUlUX0NIRUNLSU5dOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1dhaXQgQ2hlY2tpbicsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLldBSVRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1dhaXRpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5XQVJOSU5HXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ1dhcm5pbmcnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5ERVBMT1lJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2luZm8nLAogICAgbGFiZWw6ICdEZXBsb3lpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9Cn07CmV4cG9ydCBmdW5jdGlvbiBnZXRTdGF0ZXNCeVR5cGUodHlwZSA9ICdpbmZvJykgewogIGNvbnN0IG91dCA9IHsKICAgIGluZm86IFtdLAogICAgZXJyb3I6IFtdLAogICAgc3VjY2VzczogW10sCiAgICB3YXJuaW5nOiBbXSwKICAgIHVua25vd246IFtdCiAgfTsKICBmb3JJbihTVEFURVMsIChzdGF0ZSwgc3RhdGVLZXkpID0+IHsKICAgIGlmIChzdGF0ZS5jb2xvcikgewogICAgICBpZiAob3V0W3N0YXRlLmNvbG9yXSkgewogICAgICAgIG91dFtzdGF0ZS5jb2xvcl0ucHVzaChzdGF0ZUtleSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3V0LnVua25vd24ucHVzaChzdGF0ZUtleSk7CiAgICAgIH0KICAgIH0KICB9KTsKICByZXR1cm4gb3V0Owp9CmNvbnN0IFNPUlRfT1JERVIgPSB7CiAgZXJyb3I6IDEsCiAgd2FybmluZzogMiwKICBpbmZvOiAzLAogIHN1Y2Nlc3M6IDQsCiAgcmVhZHk6IDUsCiAgbm90cmVhZHk6IDYsCiAgb3RoZXI6IDcKfTsKZXhwb3J0IGZ1bmN0aW9uIGdldFN0YXRlTGFiZWwoc3RhdGUpIHsKICBjb25zdCBsb3dlcmNhc2VTdGF0ZSA9IHN0YXRlLnRvTG93ZXJDYXNlKCk7CiAgcmV0dXJuIFNUQVRFU1tsb3dlcmNhc2VTdGF0ZV0gPyBTVEFURVNbbG93ZXJjYXNlU3RhdGVdLmxhYmVsIDogU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmxhYmVsOwp9CmV4cG9ydCBmdW5jdGlvbiBjb2xvckZvclN0YXRlKHN0YXRlLCBpc0Vycm9yLCBpc1RyYW5zaXRpb25pbmcpIHsKICBpZiAoaXNFcnJvcikgewogICAgcmV0dXJuICd0ZXh0LWVycm9yJzsKICB9CiAgaWYgKGlzVHJhbnNpdGlvbmluZykgewogICAgcmV0dXJuICd0ZXh0LWluZm8nOwogIH0KICBjb25zdCBrZXkgPSAoc3RhdGUgfHwgJ2FjdGl2ZScpLnRvTG93ZXJDYXNlKCk7CiAgbGV0IGNvbG9yOwogIGlmIChTVEFURVNba2V5XSAmJiBTVEFURVNba2V5XS5jb2xvcikgewogICAgY29sb3IgPSBtYXliZUZuLmNhbGwodGhpcywgU1RBVEVTW2tleV0uY29sb3IpOwogIH0KICBpZiAoIWNvbG9yKSB7CiAgICBjb2xvciA9IERFRkFVTFRfQ09MT1I7CiAgfQogIHJldHVybiBgdGV4dC0ke2NvbG9yfWA7Cn0KZXhwb3J0IGZ1bmN0aW9uIHN0YXRlRGlzcGxheShzdGF0ZSkgewogIC8vIEBUT0RPIHVzZSB0cmFuc2xhdGlvbnMKICBjb25zdCBrZXkgPSAoc3RhdGUgfHwgJ2FjdGl2ZScpLnRvTG93ZXJDYXNlKCk7CiAgaWYgKFJFTUFQX1NUQVRFW2tleV0pIHsKICAgIHJldHVybiBSRU1BUF9TVEFURVtrZXldOwogIH0KICByZXR1cm4ga2V5LnNwbGl0KC8tLykubWFwKHVjRmlyc3QpLmpvaW4oJy0nKTsKfQpleHBvcnQgZnVuY3Rpb24gcHJpbWFyeURpc3BsYXlTdGF0dXNGcm9tQ291bnQoc3RhdHVzKSB7CiAgY29uc3Qgc3RhdHVzT3JkZXIgPSBbU1RBVEVTX0VOVU0uRVJST1IsIFNUQVRFU19FTlVNLkZBSUxFRCwgU1RBVEVTX0VOVU0uV0FSTklORywgU1RBVEVTX0VOVU0uTU9ESUZJRUQsIFNUQVRFU19FTlVNLldBSVRfQVBQTElFRCwgU1RBVEVTX0VOVU0uT1JQSEFORUQsIFNUQVRFU19FTlVNLk1JU1NJTkcsIFNUQVRFU19FTlVNLlVOS05PV04sIFNUQVRFU19FTlVNLk5PVF9SRUFEWSwgU1RBVEVTX0VOVU0uUkVBRFldOwoKICAvLyBzb3J0IHN0YXR1cyBieSBvcmRlciBvZiBzdGF0dXNPcmRlcgogIGNvbnN0IGV4aXN0aW5nU3RhdHVzZXMgPSBPYmplY3Qua2V5cyhzdGF0dXMpLmZpbHRlcihrZXkgPT4gewogICAgcmV0dXJuIHN0YXR1c1trZXldID4gMCAmJiBzdGF0dXNPcmRlci5pbmNsdWRlcyhrZXkudG9Mb3dlckNhc2UoKSk7CiAgfSkuc29ydCgoYSwgYikgPT4gc3RhdHVzT3JkZXIuaW5kZXhPZihhLnRvTG93ZXJDYXNlKCkpIC0gc3RhdHVzT3JkZXIuaW5kZXhPZihiLnRvTG93ZXJDYXNlKCkpKTsKICByZXR1cm4gZXhpc3RpbmdTdGF0dXNlc1swXSA/IGV4aXN0aW5nU3RhdHVzZXNbMF0gOiBTVEFURVNfRU5VTS5VTktOT1dOOwp9CmV4cG9ydCBmdW5jdGlvbiBzdGF0ZVNvcnQoY29sb3IsIGRpc3BsYXkpIHsKICBjb2xvciA9IGNvbG9yLnJlcGxhY2UoL14odGV4dHxiZyktLywgJycpOwogIHJldHVybiBgJHtTT1JUX09SREVSW2NvbG9yXSB8fCBTT1JUX09SREVSWydvdGhlciddfSAke2Rpc3BsYXl9YDsKfQpleHBvcnQgZnVuY3Rpb24gaXNDb25kaXRpb25SZWFkeUFuZFdhaXRpbmcoY29uZGl0aW9uKSB7CiAgdmFyIF9jb25kaXRpb24kdHlwZSwgX2NvbmRpdGlvbiRyZWFzb247CiAgaWYgKCFjb25kaXRpb24pIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgcmV0dXJuIChjb25kaXRpb24gPT09IG51bGwgfHwgY29uZGl0aW9uID09PSB2b2lkIDAgfHwgKF9jb25kaXRpb24kdHlwZSA9IGNvbmRpdGlvbi50eXBlKSA9PT0gbnVsbCB8fCBfY29uZGl0aW9uJHR5cGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jb25kaXRpb24kdHlwZS50b0xvd2VyQ2FzZSgpKSA9PT0gJ3JlYWR5JyAmJiAoY29uZGl0aW9uID09PSBudWxsIHx8IGNvbmRpdGlvbiA9PT0gdm9pZCAwIHx8IChfY29uZGl0aW9uJHJlYXNvbiA9IGNvbmRpdGlvbi5yZWFzb24pID09PSBudWxsIHx8IF9jb25kaXRpb24kcmVhc29uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY29uZGl0aW9uJHJlYXNvbi50b0xvd2VyQ2FzZSgpKSA9PT0gJ3dhaXRpbmcnOwp9CmZ1bmN0aW9uIG1heWJlRm4odmFsKSB7CiAgaWYgKGlzRnVuY3Rpb24odmFsKSkgewogICAgcmV0dXJuIHZhbCh0aGlzKTsKICB9CiAgcmV0dXJuIHZhbDsKfQpleHBvcnQgZGVmYXVsdCBjbGFzcyBSZXNvdXJjZSB7CiAgY29uc3RydWN0b3IoZGF0YSwgY3R4LCByZWh5ZHJhdGVOYW1lc3BhY2UgPSBudWxsLCBzZXRDbG9uZSA9IGZhbHNlKSB7CiAgICBmb3IgKGNvbnN0IGsgaW4gZGF0YSkgewogICAgICB0aGlzW2tdID0gZGF0YVtrXTsKICAgIH0KICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnJGN0eCcsIHsKICAgICAgdmFsdWU6IGN0eCwKICAgICAgZW51bWVyYWJsZTogZmFsc2UKICAgIH0pOwogICAgaWYgKHJlaHlkcmF0ZU5hbWVzcGFjZSkgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19fcmVoeWRyYXRlJywgewogICAgICAgIHZhbHVlOiByZWh5ZHJhdGVOYW1lc3BhY2UsCiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgfSk7CiAgICB9CiAgICBpZiAoc2V0Q2xvbmUpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfX2Nsb25lJywgewogICAgICAgIHZhbHVlOiB0cnVlLAogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfQogIH0KICBnZXQgJyRnZXR0ZXJzJygpIHsKICAgIHJldHVybiB0aGlzLiRjdHguZ2V0dGVyczsKICB9CiAgZ2V0ICckcm9vdEdldHRlcnMnKCkgewogICAgcmV0dXJuIHRoaXMuJGN0eC5yb290R2V0dGVyczsKICB9CiAgZ2V0ICckZGlzcGF0Y2gnKCkgewogICAgcmV0dXJuIHRoaXMuJGN0eC5kaXNwYXRjaDsKICB9CiAgZ2V0ICckc3RhdGUnKCkgewogICAgcmV0dXJuIHRoaXMuJGN0eC5zdGF0ZTsKICB9CiAgZ2V0ICckcm9vdFN0YXRlJygpIHsKICAgIHJldHVybiB0aGlzLiRjdHgucm9vdFN0YXRlOwogIH0KICBnZXQgY3VzdG9tVmFsaWRhdGlvblJ1bGVzKCkgewogICAgcmV0dXJuIFsKICAgICAgLyoqCiAgICAgICAqIEVzc2VudGlhbGx5IGEgZmFrZSBzY2hlbWEgb2JqZWN0IHdpdGggYWRkaXRpb25hbCBwYXJhbXMgdG8gZXh0ZW5kIHZhbGlkYXRpb24KICAgICAgICoKICAgICAgICogQHBhcmFtIHtudWxsYWJsZX0gVmFsdWUgaXMgbnVsbGFibGUKICAgICAgICogQHBhcmFtIHtwYXRofSBQYXRoIG9uIHRoZSByZXNvdXJjZSB0byB0aGUgdmFsdWUgdG8gdmFsaWRhdGUKICAgICAgICogQHBhcmFtIHtyZXF1aXJlZH0gVmFsdWUgcmVxdWlyZWQKICAgICAgICogQHBhcmFtIHtyZXF1aXJlZElmfSBWYWx1ZSByZXF1aXJlZCBpZiB2YWx1ZSBhdCBwYXRoIG5vdCBlbXB0eQogICAgICAgKiBAcGFyYW0ge3RyYW5zbGF0aW9uS2V5fSBIdW1hbiByZWFkYWJsZSBkaXNwbGF5IGtleSBmb3IgcGFyYW0gaW4gcGF0aCBlLmcuIG1ldGFkYXRhLm5hbWUgPT09IE5hbWUKICAgICAgICogQHBhcmFtIHt0eXBlfSBUeXBlIG9mIGZpZWxkIHRvIHZhbGlkYXRlCiAgICAgICAqIEBwYXJhbSB7dmFsaWRhdG9yc30gYXJyYXkgb2Ygc3RyaW5ncyB3aGVyZSBpdGVtIGlzIG5hbWUgb2YgZXhwb3J0ZWQgdmFsaWRhdG9yIGZ1bmN0aW9uIGluIGN1c3RvbS12YWxpZGF0b3JzLCBhcmdzIGNhbiBiZSBwYXNzZWQgYnkgcHJlcGVuZGluZyBhcmdzIHNlcGFyYXRlZCBieSBjb2xvbi4gZS5nIG1heExlbmd0aDo2MwogICAgICAgKi8KICAgICAgLyogewogICAgICAgIG51bGxhYmxlOiAgICAgICBmYWxzZSwKICAgICAgICBwYXRoOiAgICAgICAgICAgJ3NwZWMucG9ydHMnLAogICAgICAgIHJlcXVpcmVkOiAgICAgICB0cnVlLAogICAgICAgIHR5cGU6ICAgICAgICAgICAnYXJyYXknLAogICAgICAgIHZhbGlkYXRvcnM6ICAgICBbJ3NlcnZpY2VQb3J0J10sCiAgICAgIH0gKi8KICAgIF07CiAgfQogIGdldCBfa2V5KCkgewogICAgY29uc3QgbSA9IHRoaXMubWV0YWRhdGE7CiAgICBpZiAobSkgewogICAgICBpZiAobS51aWQpIHsKICAgICAgICByZXR1cm4gbS51aWQ7CiAgICAgIH0KICAgICAgaWYgKG0ubmFtZXNwYWNlKSB7CiAgICAgICAgcmV0dXJuIGAke3RoaXMudHlwZX0vJHttLm5hbWVzcGFjZX0vJHttLm5hbWV9YDsKICAgICAgfQogICAgfQogICAgaWYgKHRoaXMuaWQpIHsKICAgICAgcmV0dXJuIGAke3RoaXMudHlwZX0vJHt0aGlzLmlkfWA7CiAgICB9CiAgICByZXR1cm4gYCR7dGhpcy50eXBlfS8ke01hdGgucmFuZG9tKCl9YDsKICB9CiAgZ2V0IHNjaGVtYSgpIHsKICAgIHJldHVybiB0aGlzLiRnZXR0ZXJzWydzY2hlbWFGb3InXSh0aGlzLnR5cGUpOwogIH0KICB0b1N0cmluZygpIHsKICAgIHJldHVybiBgWyR7dGhpcy50eXBlfTogJHt0aGlzLmlkfV1gOwogIH0KICBnZXQgdHlwZURpc3BsYXkoKSB7CiAgICBjb25zdCBzY2hlbWEgPSB0aGlzLnNjaGVtYTsKICAgIGlmIChzY2hlbWEpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9sYWJlbEZvciddKHNjaGVtYSk7CiAgICB9CiAgICByZXR1cm4gJz8nOwogIH0KICBnZXQgbmFtZURpc3BsYXkoKSB7CiAgICB2YXIgX3RoaXMkc3BlYywgX3RoaXMkbWV0YWRhdGEsIF90aGlzJG1ldGFkYXRhMjsKICAgIHJldHVybiB0aGlzLmRpc3BsYXlOYW1lIHx8ICgoX3RoaXMkc3BlYyA9IHRoaXMuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkc3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYy5kaXNwbGF5TmFtZSkgfHwgKChfdGhpcyRtZXRhZGF0YSA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhID09PSB2b2lkIDAgfHwgKF90aGlzJG1ldGFkYXRhID0gX3RoaXMkbWV0YWRhdGEuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YVtOT1JNQU5fTkFNRV0pIHx8IHRoaXMubmFtZSB8fCAoKF90aGlzJG1ldGFkYXRhMiA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGEyLm5hbWUpIHx8IHRoaXMuaWQ7CiAgfQogIGdldCBuYW1lU29ydCgpIHsKICAgIHJldHVybiBzb3J0YWJsZU51bWVyaWNTdWZmaXgodGhpcy5uYW1lRGlzcGxheSkudG9Mb3dlckNhc2UoKTsKICB9CiAgZ2V0IG5hbWVzcGFjZWROYW1lKCkgewogICAgdmFyIF90aGlzJG1ldGFkYXRhMzsKICAgIGNvbnN0IG5hbWVzcGFjZSA9IChfdGhpcyRtZXRhZGF0YTMgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhMy5uYW1lc3BhY2U7CiAgICBjb25zdCBuYW1lID0gdGhpcy5uYW1lRGlzcGxheTsKICAgIGlmIChuYW1lc3BhY2UpIHsKICAgICAgcmV0dXJuIGAke25hbWVzcGFjZX06JHtuYW1lfWA7CiAgICB9CiAgICByZXR1cm4gbmFtZTsKICB9CiAgZ2V0IG5hbWVzcGFjZWROYW1lU29ydCgpIHsKICAgIHJldHVybiBzb3J0YWJsZU51bWVyaWNTdWZmaXgodGhpcy5uYW1lc3BhY2VkTmFtZSkudG9Mb3dlckNhc2UoKTsKICB9CiAgZ2V0IGdyb3VwQnlMYWJlbCgpIHsKICAgIHZhciBfdGhpcyRtZXRhZGF0YTQ7CiAgICBjb25zdCBuYW1lID0gKF90aGlzJG1ldGFkYXRhNCA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGE0Lm5hbWVzcGFjZTsKICAgIGxldCBvdXQ7CiAgICBpZiAobmFtZSkgewogICAgICBvdXQgPSB0aGlzLnQoJ3Jlc291cmNlVGFibGUuZ3JvdXBMYWJlbC5uYW1lc3BhY2UnLCB7CiAgICAgICAgbmFtZTogZXNjYXBlSHRtbChuYW1lKQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG91dCA9IHRoaXMudCgncmVzb3VyY2VUYWJsZS5ncm91cExhYmVsLm5vdEluQU5hbWVzcGFjZScpOwogICAgfQogICAgcmV0dXJuIG91dDsKICB9CiAgc2V0TGFiZWxzKC8qIHZhbCAqLwogICkgewogICAgdGhyb3cgbmV3IEVycm9yKCdJbXBsZW1lbnQgc2V0TGFiZWxzIGluIHN1YmNsYXNzJyk7CiAgfQogIHNldExhYmVsKC8qIGtleSwgdmFsICovCiAgKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ltcGxlbWVudCBzZXRMYWJlbCBpbiBzdWJjbGFzcycpOwogIH0KICBzZXRBbm5vdGF0aW9ucyh2YWwpIHsKICAgIHRocm93IG5ldyBFcnJvcignSW1wbGVtZW50IHNldEFubm90YXRpb25zIGluIHN1YmNsYXNzJyk7CiAgfQogIHNldEFubm90YXRpb24oa2V5LCB2YWwpIHsKICAgIHRocm93IG5ldyBFcnJvcignSW1wbGVtZW50IHNldEFubm90YXRpb24gaW4gc3ViY2xhc3MnKTsKICB9CgogIC8vIFlvdSBjYW4gb3ZlcnJpZGUgdGhlIGRpc3BsYXllZCBieSBwcm92aWRpbmcgeW91ciBvd24gc3RhdGVEaXNwbGF5IChhbmQgcG9zc2libHkgdXNpbmcgdGhlIGZ1bmN0aW9uIGV4cG9ydGVkIGFib3ZlKQogIGdldCBzdGF0ZURpc3BsYXkoKSB7CiAgICByZXR1cm4gc3RhdGVEaXNwbGF5KHRoaXMuc3RhdGUpOwogIH0KICBnZXQgc3RhdGVDb2xvcigpIHsKICAgIHZhciBfdGhpcyRzdGF0ZU9iaiwgX3RoaXMkc3RhdGVPYmoyOwogICAgcmV0dXJuIGNvbG9yRm9yU3RhdGUuY2FsbCh0aGlzLCB0aGlzLnN0YXRlLCAoX3RoaXMkc3RhdGVPYmogPSB0aGlzLnN0YXRlT2JqKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0ZU9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGVPYmouZXJyb3IsIChfdGhpcyRzdGF0ZU9iajIgPSB0aGlzLnN0YXRlT2JqKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0ZU9iajIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXRlT2JqMi50cmFuc2l0aW9uaW5nKTsKICB9CiAgZ2V0IHN0YXRlQmFja2dyb3VuZCgpIHsKICAgIHJldHVybiB0aGlzLnN0YXRlQ29sb3IucmVwbGFjZSgndGV4dC0nLCAnYmctJyk7CiAgfQogIGdldCBzdGF0ZUljb24oKSB7CiAgICBsZXQgdHJhbnMgPSBmYWxzZTsKICAgIGxldCBlcnJvciA9IGZhbHNlOwogICAgaWYgKHRoaXMubWV0YWRhdGEgJiYgdGhpcy5tZXRhZGF0YS5zdGF0ZSkgewogICAgICB0cmFucyA9IHRoaXMubWV0YWRhdGEuc3RhdGUudHJhbnNpdGlvbmluZzsKICAgICAgZXJyb3IgPSB0aGlzLm1ldGFkYXRhLnN0YXRlLmVycm9yOwogICAgfQogICAgaWYgKHRyYW5zKSB7CiAgICAgIHJldHVybiAnaWNvbiBpY29uLXNwaW5uZXIgaWNvbi1zcGluJzsKICAgIH0KICAgIGlmIChlcnJvcikgewogICAgICByZXR1cm4gJ2ljb24gaWNvbi1lcnJvcic7CiAgICB9CiAgICBjb25zdCBrZXkgPSAodGhpcy5zdGF0ZSB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgIGxldCBpY29uOwogICAgaWYgKFNUQVRFU1trZXldICYmIFNUQVRFU1trZXldLmljb24pIHsKICAgICAgaWNvbiA9IG1heWJlRm4uY2FsbCh0aGlzLCBTVEFURVNba2V5XS5pY29uKTsKICAgIH0KICAgIGlmICghaWNvbikgewogICAgICBpY29uID0gREVGQVVMVF9JQ09OOwogICAgfQogICAgcmV0dXJuIGBpY29uIGljb24tJHtpY29ufWA7CiAgfQogIGdldCBzdGF0ZVNvcnQoKSB7CiAgICByZXR1cm4gc3RhdGVTb3J0KHRoaXMuc3RhdGVDb2xvciwgdGhpcy5zdGF0ZURpc3BsYXkpOwogIH0KICBnZXQgc3RhdGVEZXNjcmlwdGlvbigpIHsKICAgIHZhciBfdGhpcyRzdGF0ZU9iajMsIF90aGlzJHN0YXRlT2JqNCwgX3RoaXMkc3RhdGVPYmo1OwogICAgY29uc3QgdHJhbnMgPSAoKF90aGlzJHN0YXRlT2JqMyA9IHRoaXMuc3RhdGVPYmopID09PSBudWxsIHx8IF90aGlzJHN0YXRlT2JqMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGVPYmozLnRyYW5zaXRpb25pbmcpIHx8IGZhbHNlOwogICAgY29uc3QgZXJyb3IgPSAoKF90aGlzJHN0YXRlT2JqNCA9IHRoaXMuc3RhdGVPYmopID09PSBudWxsIHx8IF90aGlzJHN0YXRlT2JqNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGVPYmo0LmVycm9yKSB8fCBmYWxzZTsKICAgIGNvbnN0IG1lc3NhZ2UgPSAoX3RoaXMkc3RhdGVPYmo1ID0gdGhpcy5zdGF0ZU9iaikgPT09IG51bGwgfHwgX3RoaXMkc3RhdGVPYmo1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0ZU9iajUubWVzc2FnZTsKICAgIHJldHVybiB0cmFucyB8fCBlcnJvciA/IHVjRmlyc3QobWVzc2FnZSkgOiAnJzsKICB9CiAgZ2V0IHN0YXRlT2JqKCkgewogICAgdmFyIF90aGlzJG1ldGFkYXRhNTsKICAgIHJldHVybiAoX3RoaXMkbWV0YWRhdGE1ID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTUuc3RhdGU7CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgd2FpdEZvclRlc3RGbihmbiwgbXNnLCB0aW1lb3V0TXMsIGludGVydmFsTXMpIHsKICAgIHJldHVybiB3YWl0Rm9yKCgpID0+IGZuLmFwcGx5KHRoaXMpLCBtc2csIHRpbWVvdXRNcyB8fCBERUZBVUxUX1dBSVRfVE1JTUVPVVQsIGludGVydmFsTXMgfHwgREVGQVVMVF9XQUlUX0lOVEVSVkFMLCB0cnVlKTsKICB9CiAgd2FpdEZvclN0YXRlKHN0YXRlLCB0aW1lb3V0LCBpbnRlcnZhbCkgewogICAgcmV0dXJuIHRoaXMud2FpdEZvclRlc3RGbigoKSA9PiB7CiAgICAgIHJldHVybiAodGhpcy5zdGF0ZSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gc3RhdGUudG9Mb3dlckNhc2UoKTsKICAgIH0sIGBzdGF0ZT0ke3N0YXRlfWAsIHRpbWVvdXQsIGludGVydmFsKTsKICB9CiAgd2FpdEZvclRyYW5zaXRpb24oKSB7CiAgICByZXR1cm4gdGhpcy53YWl0Rm9yVGVzdEZuKCgpID0+IHsKICAgICAgcmV0dXJuICF0aGlzLnRyYW5zaXRpb25pbmc7CiAgICB9LCAndHJhbnNpdGlvbiBjb21wbGV0aW9uJywgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwogIH0KICB3YWl0Rm9yQWN0aW9uKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLndhaXRGb3JUZXN0Rm4oKCkgPT4gewogICAgICByZXR1cm4gdGhpcy5oYXNBY3Rpb24obmFtZSk7CiAgICB9LCBgYWN0aW9uPSR7bmFtZX1gLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7CiAgfQogIHdhaXRGb3JMaW5rKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLndhaXRGb3JUZXN0Rm4oKCkgPT4gewogICAgICByZXR1cm4gdGhpcy5oYXNMaW5rKG5hbWUpOwogICAgfSwgYGxpbms9JHtuYW1lfWAsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKICB9CiAgaGFzQ29uZGl0aW9uKGNvbmRpdGlvbikgewogICAgcmV0dXJuIHRoaXMuaXNDb25kaXRpb24oY29uZGl0aW9uLCBudWxsKTsKICB9CiAgaXNDb25kaXRpb24oY29uZGl0aW9uLCB3aXRoU3RhdHVzID0gJ1RydWUnKSB7CiAgICBpZiAoIXRoaXMuc3RhdHVzIHx8ICF0aGlzLnN0YXR1cy5jb25kaXRpb25zKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGNvbnN0IGVudHJ5ID0gZmluZEJ5KHRoaXMuc3RhdHVzLmNvbmRpdGlvbnMgfHwgW10sICd0eXBlJywgY29uZGl0aW9uKTsKICAgIGlmICghZW50cnkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKCF3aXRoU3RhdHVzKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIChlbnRyeS5zdGF0dXMgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09IGAke3dpdGhTdGF0dXN9YC50b0xvd2VyQ2FzZSgpOwogIH0KICB3YWl0Rm9yQ29uZGl0aW9uKG5hbWUsIHdpdGhTdGF0dXMgPSAnVHJ1ZScsIHRpbWVvdXRNcyA9IERFRkFVTFRfV0FJVF9UTUlNRU9VVCwgaW50ZXJ2YWxNcyA9IERFRkFVTFRfV0FJVF9JTlRFUlZBTCkgewogICAgcmV0dXJuIHRoaXMud2FpdEZvclRlc3RGbigoKSA9PiB7CiAgICAgIHJldHVybiB0aGlzLmlzQ29uZGl0aW9uKG5hbWUsIHdpdGhTdGF0dXMpOwogICAgfSwgYGNvbmRpdGlvbiAke25hbWV9PSR7d2l0aFN0YXR1c31gLCB0aW1lb3V0TXMsIGludGVydmFsTXMpOwogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGdldCBhdmFpbGFibGVBY3Rpb25zKCkgewogICAgY29uc3QgYWxsID0gdGhpcy5fYXZhaWxhYmxlQWN0aW9uczsKCiAgICAvLyBSZW1vdmUgZGlzYWJsZWQgaXRlbXMgYW5kIGNvbnNlY3V0aXZlIGRpdmlkZXJzCiAgICBsZXQgbGFzdCA9IG51bGw7CiAgICBjb25zdCBvdXQgPSBhbGwuZmlsdGVyKGl0ZW0gPT4gewogICAgICBpZiAoaXRlbS5lbmFibGVkID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCBjdXIgPSBpdGVtLmRpdmlkZXI7CiAgICAgIGNvbnN0IG9rID0gIWN1ciB8fCBjdXIgJiYgIWxhc3Q7CiAgICAgIGxhc3QgPSBjdXI7CiAgICAgIHJldHVybiBvazsKICAgIH0pOwoKICAgIC8vIFJlbW92ZSBkaXZpZGVycyBhdCB0aGUgYmVnaW5uaW5nCiAgICB3aGlsZSAob3V0Lmxlbmd0aCAmJiBvdXRbMF0uZGl2aWRlcikgewogICAgICBvdXQuc2hpZnQoKTsKICAgIH0KCiAgICAvLyBSZW1vdmUgZGl2aWRlcnMgYXQgdGhlIGVuZAogICAgd2hpbGUgKG91dC5sZW5ndGggJiYgb3V0W291dC5sZW5ndGggLSAxXS5kaXZpZGVyKSB7CiAgICAgIG91dC5wb3AoKTsKICAgIH0KCiAgICAvLyBSZW1vdmUgY29uc2VjdXRpdmUgZGl2aWRlcnMgaW4gdGhlIG1pZGRsZQogICAgZm9yIChsZXQgaSA9IDE7IGkgPCBvdXQubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKG91dFtpXS5kaXZpZGVyICYmIG91dFtpIC0gMV0uZGl2aWRlcikgewogICAgICAgIHJlbW92ZUF0KG91dCwgaSwgMSk7CiAgICAgICAgaS0tOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0OwogIH0KCiAgLy8gWW91IGNhbiBhZGQgY3VzdG9tIGFjdGlvbnMgYnkgb3ZlcnJpZGluZyB5b3VyIG93biBhdmFpbGFibGVBY3Rpb25zIChhbmQgcHJvYmFibHkgcmVhZGluZyBzdXBlci5fYXZhaWxhYmxlQWN0aW9ucykKICBnZXQgX2F2YWlsYWJsZUFjdGlvbnMoKSB7CiAgICAvLyBnZXQgbWVudSBhY3Rpb25zIGF2YWlsYWJsZSBieSBwbHVnaW5zIGNvbmZpZ3VyYXRpb24KICAgIGNvbnN0IGN1cnJlbnRSb3V0ZSA9IHRoaXMuY3VycmVudFJvdXRlcigpLmFwcC5fcm91dGU7CiAgICBjb25zdCBleHRlbnNpb25NZW51QWN0aW9ucyA9IGdldEFwcGxpY2FibGVFeHRlbnNpb25FbmhhbmNlbWVudHModGhpcy4kcm9vdFN0YXRlLCBFeHRlbnNpb25Qb2ludC5BQ1RJT04sIEFjdGlvbkxvY2F0aW9uLlRBQkxFLCBjdXJyZW50Um91dGUsIHRoaXMpOwogICAgY29uc3QgYWxsID0gW3sKICAgICAgZGl2aWRlcjogdHJ1ZQogICAgfSwgewogICAgICBhY3Rpb246IHRoaXMuY2FuVXBkYXRlID8gJ2dvVG9FZGl0JyA6ICdnb1RvVmlld0NvbmZpZycsCiAgICAgIGxhYmVsOiB0aGlzLnQodGhpcy5jYW5VcGRhdGUgPyAnYWN0aW9uLmVkaXQnIDogJ2FjdGlvbi52aWV3JyksCiAgICAgIGljb246ICdpY29uIGljb24tZWRpdCcsCiAgICAgIGVuYWJsZWQ6IHRoaXMuY2FuQ3VzdG9tRWRpdAogICAgfSwgewogICAgICBhY3Rpb246IHRoaXMuY2FuRWRpdFlhbWwgPyAnZ29Ub0VkaXRZYW1sJyA6ICdnb1RvVmlld1lhbWwnLAogICAgICBsYWJlbDogdGhpcy50KHRoaXMuY2FuRWRpdFlhbWwgPyAnYWN0aW9uLmVkaXRZYW1sJyA6ICdhY3Rpb24udmlld1lhbWwnKSwKICAgICAgaWNvbjogJ2ljb24gaWNvbi1maWxlJywKICAgICAgZW5hYmxlZDogdGhpcy5jYW5ZYW1sCiAgICB9LCB7CiAgICAgIGFjdGlvbjogdGhpcy5jYW5DdXN0b21FZGl0ID8gJ2dvVG9DbG9uZScgOiAnY2xvbmVZYW1sJywKICAgICAgbGFiZWw6IHRoaXMudCgnYWN0aW9uLmNsb25lJyksCiAgICAgIGljb246ICdpY29uIGljb24tY29weScsCiAgICAgIGVuYWJsZWQ6IHRoaXMuY2FuQ2xvbmUgJiYgdGhpcy5jYW5DcmVhdGUgJiYgKHRoaXMuY2FuQ3VzdG9tRWRpdCB8fCB0aGlzLmNhbllhbWwpCiAgICB9LCB7CiAgICAgIGRpdmlkZXI6IHRydWUKICAgIH0sIHsKICAgICAgYWN0aW9uOiAnZG93bmxvYWQnLAogICAgICBsYWJlbDogdGhpcy50KCdhY3Rpb24uZG93bmxvYWQnKSwKICAgICAgaWNvbjogJ2ljb24gaWNvbi1kb3dubG9hZCcsCiAgICAgIGJ1bGthYmxlOiB0cnVlLAogICAgICBidWxrQWN0aW9uOiAnZG93bmxvYWRCdWxrJywKICAgICAgZW5hYmxlZDogdGhpcy5jYW5ZYW1sLAogICAgICB3ZWlnaHQ6IC05CiAgICB9LCB7CiAgICAgIGFjdGlvbjogJ3ZpZXdJbkFwaScsCiAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjdGlvbi52aWV3SW5BcGknKSwKICAgICAgaWNvbjogJ2ljb24gaWNvbi1leHRlcm5hbC1saW5rJywKICAgICAgZW5hYmxlZDogdGhpcy5jYW5WaWV3SW5BcGkKICAgIH0sIHsKICAgICAgYWN0aW9uOiAncHJvbXB0UmVtb3ZlJywKICAgICAgYWx0QWN0aW9uOiAncmVtb3ZlJywKICAgICAgbGFiZWw6IHRoaXMudCgnYWN0aW9uLnJlbW92ZScpLAogICAgICBpY29uOiAnaWNvbiBpY29uLXRyYXNoJywKICAgICAgYnVsa2FibGU6IHRydWUsCiAgICAgIGVuYWJsZWQ6IHRoaXMuY2FuRGVsZXRlLAogICAgICBidWxrQWN0aW9uOiAncHJvbXB0UmVtb3ZlJywKICAgICAgd2VpZ2h0OiAtMTAgLy8gRGVsZXRlIGFsd2F5cyBnb2VzIGxhc3QKICAgIH1dOwoKICAgIC8vIEV4dGVuc2lvbiBhY3Rpb25zIGdldCBhZGRlZCB0byB0aGUgZW5kLCBzbyBhZGQgYSBkaXZpZGVyIGlmIHRoZXJlIGFyZSBhbnkKICAgIGlmIChleHRlbnNpb25NZW51QWN0aW9ucy5sZW5ndGgpIHsKICAgICAgLy8gQWRkIGEgZGl2aWRlciBmaXJzdAogICAgICBhbGwucHVzaCh7CiAgICAgICAgZGl2aWRlcjogdHJ1ZQogICAgICB9KTsKICAgICAgZXh0ZW5zaW9uTWVudUFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4gewogICAgICAgIGNvbnN0IG5ld0FjdGlvbkluc3RhbmNlID0gewogICAgICAgICAgLi4uYWN0aW9uCiAgICAgICAgfTsKICAgICAgICBjb25zdCBlbmFibGVkRm4gPSBuZXdBY3Rpb25JbnN0YW5jZS5lbmFibGVkOwogICAgICAgIGNvbnN0IHR5cGVvZkVuYWJsZWQgPSB0eXBlb2YgZW5hYmxlZEZuOwogICAgICAgIHN3aXRjaCAodHlwZW9mRW5hYmxlZCkgewogICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzoKICAgICAgICAgICAgbmV3QWN0aW9uSW5zdGFuY2UuZW5hYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOgogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3QWN0aW9uSW5zdGFuY2UsICdlbmFibGVkJywgewogICAgICAgICAgICAgIGdldDogKCkgPT4gZW5hYmxlZEZuKHRoaXMpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOgogICAgICAgICAgICAvLyBubyBvcCwganVzdCB1c2UgaXQgZGlyZWN0bHkKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAvLyB1bnN1cHBvcnRlZCB2YWx1ZQogICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuc3VwcG9ydGVkICdlbmFibGVkJyBwcm9wZXJ0eSB0eXBlIGZvciBhY3Rpb246ICR7YWN0aW9uLmxhYmVsIHx8IGFjdGlvbi5sYWJlbEtleX1gKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIGRlbGV0ZSBuZXdBY3Rpb25JbnN0YW5jZS5lbmFibGVkOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgYWxsLnB1c2gobmV3QWN0aW9uSW5zdGFuY2UpOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBhbGw7CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgZ2V0IGNhbkRlbGV0ZSgpIHsKICAgIHJldHVybiB0aGlzLl9jYW5EZWxldGU7CiAgfQogIGdldCBfY2FuRGVsZXRlKCkgewogICAgcmV0dXJuIHRoaXMuaGFzTGluaygncmVtb3ZlJykgJiYgdGhpcy4kcm9vdEdldHRlcnNbJ3R5cGUtbWFwL29wdGlvbnNGb3InXSh0aGlzLnR5cGUpLmlzUmVtb3ZhYmxlOwogIH0KICBnZXQgY2FuQ2xvbmUoKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZ2V0IGNhblVwZGF0ZSgpIHsKICAgIHJldHVybiB0aGlzLmhhc0xpbmsoJ3VwZGF0ZScpICYmIHRoaXMuJHJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9vcHRpb25zRm9yJ10odGhpcy50eXBlKS5pc0VkaXRhYmxlOwogIH0KICBnZXQgY2FuQ3VzdG9tRWRpdCgpIHsKICAgIHJldHVybiB0aGlzLiRyb290R2V0dGVyc1sndHlwZS1tYXAvaGFzQ3VzdG9tRWRpdCddKHRoaXMudHlwZSwgdGhpcy5pZCk7CiAgfQogIGdldCBjYW5DcmVhdGUoKSB7CiAgICB2YXIgX3RoaXMkc2NoZW1hOwogICAgaWYgKHRoaXMuc2NoZW1hICYmICEoKF90aGlzJHNjaGVtYSA9IHRoaXMuc2NoZW1hKSAhPT0gbnVsbCAmJiBfdGhpcyRzY2hlbWEgIT09IHZvaWQgMCAmJiBfdGhpcyRzY2hlbWEuY29sbGVjdGlvbk1ldGhvZHMuZmluZCh4ID0+IHgudG9Mb3dlckNhc2UoKSA9PT0gJ3Bvc3QnKSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9vcHRpb25zRm9yJ10odGhpcy50eXBlKS5pc0NyZWF0YWJsZTsKICB9CiAgZ2V0IGNhblZpZXdJbkFwaSgpIHsKICAgIHJldHVybiB0aGlzLmhhc0xpbmsoJ3NlbGYnKSAmJiB0aGlzLiRyb290R2V0dGVyc1sncHJlZnMvZ2V0J10oVklFV19JTl9BUEkpOwogIH0KICBnZXQgY2FuWWFtbCgpIHsKICAgIHJldHVybiB0aGlzLmhhc0xpbmsoJ3ZpZXcnKTsKICB9CiAgZ2V0IGNhbkVkaXRZYW1sKCkgewogICAgdmFyIF90aGlzJHNjaGVtYTI7CiAgICByZXR1cm4gKF90aGlzJHNjaGVtYTIgPSB0aGlzLnNjaGVtYSkgIT09IG51bGwgJiYgX3RoaXMkc2NoZW1hMiAhPT0gdm9pZCAwICYmIChfdGhpcyRzY2hlbWEyID0gX3RoaXMkc2NoZW1hMi5yZXNvdXJjZU1ldGhvZHMpICE9PSBudWxsICYmIF90aGlzJHNjaGVtYTIgIT09IHZvaWQgMCAmJiBfdGhpcyRzY2hlbWEyLmZpbmQoeCA9PiB4ID09PSAnYmxvY2tlZC1QVVQnKSA/IGZhbHNlIDogdGhpcy5jYW5VcGRhdGU7CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgaGFzTGluayhsaW5rTmFtZSkgewogICAgcmV0dXJuICEhdGhpcy5saW5rRm9yKGxpbmtOYW1lKTsKICB9CiAgbGlua0ZvcihsaW5rTmFtZSkgewogICAgcmV0dXJuICh0aGlzLmxpbmtzIHx8IHt9KVtsaW5rTmFtZV07CiAgfQogIGZvbGxvd0xpbmsobGlua05hbWUsIG9wdCA9IHt9KSB7CiAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgb3B0LnVybCA9ICh0aGlzLmxpbmtzIHx8IHt9KVtsaW5rTmFtZV07CiAgICB9CiAgICBpZiAob3B0LnVybFN1ZmZpeCkgewogICAgICBvcHQudXJsICs9IG9wdC51cmxTdWZmaXg7CiAgICB9CiAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGxpbmsgJHtsaW5rTmFtZX0gb24gJHt0aGlzLnR5cGV9ICR7dGhpcy5pZH1gKTsKICAgIH0KICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgncmVxdWVzdCcsIHsKICAgICAgb3B0LAogICAgICB0eXBlOiB0aGlzLnR5cGUKICAgIH0pOwogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGhhc0FjdGlvbihhY3Rpb25OYW1lKSB7CiAgICByZXR1cm4gISF0aGlzLmFjdGlvbkxpbmtGb3IoYWN0aW9uTmFtZSk7CiAgfQogIGFjdGlvbkxpbmtGb3IoYWN0aW9uTmFtZSkgewogICAgcmV0dXJuICh0aGlzLmFjdGlvbnMgfHwgdGhpcy5hY3Rpb25MaW5rcyB8fCB7fSlbYWN0aW9uTmFtZV07CiAgfQogIGRvQWN0aW9uKGFjdGlvbk5hbWUsIGJvZHksIG9wdCA9IHt9KSB7CiAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goJ3Jlc291cmNlQWN0aW9uJywgewogICAgICByZXNvdXJjZTogdGhpcywKICAgICAgYWN0aW9uTmFtZSwKICAgICAgYm9keSwKICAgICAgb3B0CiAgICB9KTsKICB9CiAgYXN5bmMgZG9BY3Rpb25Hcm93bChhY3Rpb25OYW1lLCBib2R5LCBvcHQgPSB7fSkgewogICAgdHJ5IHsKICAgICAgYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ3Jlc291cmNlQWN0aW9uJywgewogICAgICAgIHJlc291cmNlOiB0aGlzLAogICAgICAgIGFjdGlvbk5hbWUsCiAgICAgICAgYm9keSwKICAgICAgICBvcHQKICAgICAgfSk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgdGhpcy4kZGlzcGF0Y2goJ2dyb3dsL2Zyb21FcnJvcicsIHsKICAgICAgICB0aXRsZTogdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCdnZW5lcmljLm5vdGlmaWNhdGlvbi50aXRsZS5lcnJvcicpLAogICAgICAgIGVycjogZXJyLmRhdGEgfHwgZXJyCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgfQogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIHBhdGNoKGRhdGEsIG9wdCA9IHt9LCBtZXJnZSA9IGZhbHNlLCBhbGVydE9uRXJyb3IgPSBmYWxzZSkgewogICAgaWYgKCFvcHQudXJsKSB7CiAgICAgIC8vIFdvcmthcm91bmQgZm9yIHRoZSBsaW5rcyBub3QgYmVpbmcgY29ycmVjdCAtIHZpZXcgbGluayBpcyB0aGUgb25seSBvbmUgdGhhdCBzZWVtcyBjb3JyZWN0CiAgICAgIG9wdC51cmwgPSB0aGlzLmxpbmtGb3IoJ3ZpZXcnKSB8fCB0aGlzLmxpbmtGb3IoJ3NlbGYnKTsKICAgIH0KICAgIG9wdC5tZXRob2QgPSAncGF0Y2gnOwogICAgb3B0LmhlYWRlcnMgPSBvcHQuaGVhZGVycyB8fCB7fTsKICAgIGlmICghb3B0LmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKSB7CiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gbWVyZ2UgPyAnYXBwbGljYXRpb24vc3RyYXRlZ2ljLW1lcmdlLXBhdGNoK2pzb24nIDogJ2FwcGxpY2F0aW9uL2pzb24tcGF0Y2granNvbic7CiAgICAgIG9wdC5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGNvbnRlbnRUeXBlOwogICAgfQogICAgb3B0LmRhdGEgPSBkYXRhOwogICAgY29uc3QgZGlzcGF0Y2ggPSB0aGlzLiRkaXNwYXRjaCgncmVxdWVzdCcsIHsKICAgICAgb3B0LAogICAgICB0eXBlOiB0aGlzLnR5cGUKICAgIH0pOwogICAgcmV0dXJuICFhbGVydE9uRXJyb3IgPyBkaXNwYXRjaCA6IGRpc3BhdGNoLmNhdGNoKGUgPT4gewogICAgICBjb25zdCB0aXRsZSA9IHRoaXMudCgncmVzb3VyY2UuZXJyb3JzLnVwZGF0ZScsIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUKICAgICAgfSk7CiAgICAgIGNvbnNvbGUuZXJyb3IodGl0bGUsIGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKCiAgICAgIHRoaXMuJGRpc3BhdGNoKCdncm93bC9lcnJvcicsIHsKICAgICAgICB0aXRsZSwKICAgICAgICBtZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZSwKICAgICAgICB0aW1lb3V0OiA1MDAwCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgfSk7CiAgfQogIHNhdmUoKSB7CiAgICByZXR1cm4gdGhpcy5fc2F2ZSguLi5hcmd1bWVudHMpOwogIH0KCiAgLyoqCiAgICogUmVtb3ZlIGFueSB1bndhbnRlZCBwcm9wZXJ0aWVzIGZyb20gdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgc2F2ZWQKICAgKi8KICBjbGVhbkZvclNhdmUoZGF0YSwgZm9yTmV3KSB7CiAgICBkZWxldGUgZGF0YS5fX3JlaHlkcmF0ZTsKICAgIGRlbGV0ZSBkYXRhLl9fY2xvbmU7CiAgICByZXR1cm4gZGF0YTsKICB9CgogIC8qKgogICAqIEFsbG93IHRvIGhhbmRsZSB0aGUgcmVzcG9uc2Ugb2YgdGhlIHNhdmUgcmVxdWVzdAogICAqIEBwYXJhbSB7Kn0gcmVzIEZ1bGwgcmVxdWVzdCByZXNwb25zZQogICAqLwogIHByb2Nlc3NTYXZlUmVzcG9uc2UocmVzKSB7fQogIGFzeW5jIF9zYXZlKG9wdCA9IHt9KSB7CiAgICB2YXIgX3RoaXMkbWV0YWRhdGE2OwogICAgY29uc3QgZm9yTmV3ID0gIXRoaXMuaWQ7CiAgICBjb25zdCBlcnJvcnMgPSB0aGlzLnZhbGlkYXRpb25FcnJvcnModGhpcywgb3B0KTsKICAgIGlmICghaXNFbXB0eShlcnJvcnMpKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcnMpOwogICAgfQogICAgaWYgKChfdGhpcyRtZXRhZGF0YTYgPSB0aGlzLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfdGhpcyRtZXRhZGF0YTYgIT09IHZvaWQgMCAmJiBfdGhpcyRtZXRhZGF0YTYucmVzb3VyY2VWZXJzaW9uKSB7CiAgICAgIHRoaXMubWV0YWRhdGEucmVzb3VyY2VWZXJzaW9uID0gYCR7dGhpcy5tZXRhZGF0YS5yZXNvdXJjZVZlcnNpb259YDsKICAgIH0KICAgIGlmICghb3B0LnVybCkgewogICAgICBpZiAoZm9yTmV3KSB7CiAgICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kZ2V0dGVyc1snc2NoZW1hRm9yJ10odGhpcy50eXBlKTsKICAgICAgICBsZXQgdXJsID0gc2NoZW1hLmxpbmtGb3IoJ2NvbGxlY3Rpb24nKTsKICAgICAgICBpZiAoc2NoZW1hLmF0dHJpYnV0ZXMgJiYgc2NoZW1hLmF0dHJpYnV0ZXMubmFtZXNwYWNlZCAmJiB0aGlzLm1ldGFkYXRhICYmIHRoaXMubWV0YWRhdGEubmFtZXNwYWNlKSB7CiAgICAgICAgICB1cmwgKz0gYC8ke3RoaXMubWV0YWRhdGEubmFtZXNwYWNlfWA7CiAgICAgICAgfQogICAgICAgIG9wdC51cmwgPSB1cmw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3B0LnVybCA9IHRoaXMubGlua0ZvcigndXBkYXRlJykgfHwgdGhpcy5saW5rRm9yKCdzZWxmJyk7CiAgICAgIH0KICAgIH0KICAgIGlmICghb3B0Lm1ldGhvZCkgewogICAgICBvcHQubWV0aG9kID0gZm9yTmV3ID8gJ3Bvc3QnIDogJ3B1dCc7CiAgICB9CiAgICBpZiAoIW9wdC5oZWFkZXJzKSB7CiAgICAgIG9wdC5oZWFkZXJzID0ge307CiAgICB9CiAgICBpZiAoIW9wdC5oZWFkZXJzWydjb250ZW50LXR5cGUnXSkgewogICAgICBvcHQuaGVhZGVyc1snY29udGVudC10eXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgICB9CiAgICBpZiAoIW9wdC5oZWFkZXJzWydhY2NlcHQnXSkgewogICAgICBvcHQuaGVhZGVyc1snYWNjZXB0J10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgICB9CgogICAgLy8gQFRPRE8gcmVtb3ZlIHRoaXMgb25jZSB0aGUgQVBJIG1hcHMgc3RldmUgX3R5cGUgPC0+IGs4cyB0eXBlIGluIGJvdGggZGlyZWN0aW9ucwogICAgb3B0LmRhdGEgPSB0aGlzLnRvU2F2ZSgpIHx8IHsKICAgICAgLi4udGhpcwogICAgfTsKICAgIGlmIChvcHQuZGF0YS5fdHlwZSkgewogICAgICBvcHQuZGF0YS50eXBlID0gb3B0LmRhdGEuX3R5cGU7CiAgICB9CiAgICBpZiAob3B0LmRhdGEuX25hbWUpIHsKICAgICAgb3B0LmRhdGEubmFtZSA9IG9wdC5kYXRhLl9uYW1lOwogICAgfQogICAgaWYgKG9wdC5kYXRhLl9sYWJlbHMpIHsKICAgICAgb3B0LmRhdGEubGFiZWxzID0gb3B0LmRhdGEuX2xhYmVsczsKICAgIH0KICAgIGlmIChvcHQuZGF0YS5fYW5ub3RhdGlvbnMpIHsKICAgICAgb3B0LmRhdGEuYW5ub3RhdGlvbnMgPSBvcHQuZGF0YS5fYW5ub3RhdGlvbnM7CiAgICB9CiAgICBvcHQuZGF0YSA9IHRoaXMuY2xlYW5Gb3JTYXZlKG9wdC5kYXRhLCBmb3JOZXcpOwoKICAgIC8vIGhhbmRsZSAicmVwbGFjZSIgb3B0IGFzIGEgcXVlcnkgcGFyYW0gX3JlcGxhY2U9dHJ1ZSBmb3Igbm9ybWFuIFBVVCByZXF1ZXN0cwogICAgaWYgKG9wdCAhPT0gbnVsbCAmJiBvcHQgIT09IHZvaWQgMCAmJiBvcHQucmVwbGFjZSAmJiBvcHQubWV0aG9kID09PSAncHV0JykgewogICAgICBjb25zdCBhcmdQYXJhbSA9IG9wdC51cmwuaW5jbHVkZXMoJz8nKSA/ICcmJyA6ICc/JzsKICAgICAgb3B0LnVybCA9IGAke29wdC51cmx9JHthcmdQYXJhbX1fcmVwbGFjZT10cnVlYDsKICAgICAgZGVsZXRlIG9wdC5yZXBsYWNlOwogICAgfQogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ3JlcXVlc3QnLCB7CiAgICAgICAgb3B0LAogICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICB9KTsKCiAgICAgIC8vIEFsbG93IHRvIHByb2Nlc3MgcmVzcG9uc2UgaW5kZXBlbmRlbnRseSBmcm9tIHRoZSByZWxhdGVkIG1vZGVscwogICAgICB0aGlzLnByb2Nlc3NTYXZlUmVzcG9uc2UocmVzKTsKCiAgICAgIC8vIFN0ZXZlIHNvbWV0aW1lcyByZXR1cm5zIFRhYmxlIHJlc3BvbnNlcyBpbnN0ZWFkIG9mIHRoZSByZXNvdXJjZSB5b3UganVzdCBzYXZlZC4uIGlnbm9yZQogICAgICBpZiAocmVzICYmIHJlcy5raW5kICE9PSAnVGFibGUnKSB7CiAgICAgICAgYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ2xvYWQnLCB7CiAgICAgICAgICBkYXRhOiByZXMsCiAgICAgICAgICBleGlzdGluZzogZm9yTmV3ID8gdGhpcyA6IHVuZGVmaW5lZAogICAgICAgIH0pOwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy5pZCAmJiAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLl9zdGF0dXMpID09PSA0MDkpIHsKICAgICAgICAvLyBJZiB0aGVyZSdzIGEgY29uZmxpY3QsIHRyeSB0byBsb2FkIHRoZSBuZXcgdmVyc2lvbgogICAgICAgIGF3YWl0IHRoaXMuJGRpc3BhdGNoKCdmaW5kJywgewogICAgICAgICAgdHlwZTogdGhpcy50eXBlLAogICAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgZm9yY2U6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9CiAgcmVtb3ZlKCkgewogICAgcmV0dXJuIHRoaXMuX3JlbW92ZSguLi5hcmd1bWVudHMpOwogIH0KICBhc3luYyBfcmVtb3ZlKG9wdCA9IHt9KSB7CiAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgb3B0LnVybCA9IHRoaXMubGlua0Zvcignc2VsZicpOwogICAgfQogICAgb3B0Lm1ldGhvZCA9ICdkZWxldGUnOwogICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ3JlcXVlc3QnLCB7CiAgICAgIG9wdCwKICAgICAgdHlwZTogdGhpcy50eXBlCiAgICB9KTsKICAgIGlmICgocmVzID09PSBudWxsIHx8IHJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzLl9zdGF0dXMpID09PSAyMDQpIHsKICAgICAgLy8gSWYgdGhlcmUncyBubyBib2R5LCBhc3N1bWUgdGhlIHJlc291cmNlIHdhcyBpbW1lZGlhdGVseSBkZWxldGVkCiAgICAgIC8vIGFuZCBkcm9wIGl0IGZyb20gdGhlIHN0b3JlIGFzIGlmIGEgcmVtb3ZlIGV2ZW50IGhhcHBlbmVkLgogICAgICBhd2FpdCB0aGlzLiRkaXNwYXRjaCgnd3MucmVzb3VyY2UucmVtb3ZlJywgewogICAgICAgIGRhdGE6IHRoaXMKICAgICAgfSk7CiAgICB9CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgY3VycmVudFJvdXRlKCkgewogICAgcmV0dXJuIHdpbmRvdy4kZ2xvYmFsQXBwLiRyb3V0ZTsKICB9CiAgY3VycmVudFJvdXRlcigpIHsKICAgIHJldHVybiB3aW5kb3cuJGdsb2JhbEFwcC4kcm91dGVyOwogIH0KICBnZXQgbGlzdExvY2F0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogYGMtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlYCwKICAgICAgcGFyYW1zOiB7CiAgICAgICAgcHJvZHVjdDogdGhpcy4kcm9vdEdldHRlcnNbJ3Byb2R1Y3RJZCddLAogICAgICAgIGNsdXN0ZXI6IHRoaXMuJHJvb3RHZXR0ZXJzWydjbHVzdGVySWQnXSwKICAgICAgICByZXNvdXJjZTogdGhpcy50eXBlCiAgICAgIH0KICAgIH07CiAgfQogIGdldCBfZGV0YWlsTG9jYXRpb24oKSB7CiAgICB2YXIgX3RoaXMkaWQsIF9zY2hlbWEkYXR0cmlidXRlcywgX3RoaXMkbWV0YWRhdGE3OwogICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kZ2V0dGVyc1snc2NoZW1hRm9yJ10odGhpcy50eXBlKTsKICAgIGNvbnN0IGlkID0gKF90aGlzJGlkID0gdGhpcy5pZCkgPT09IG51bGwgfHwgX3RoaXMkaWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGlkLnJlcGxhY2UoLy4qXC8vLCAnJyk7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBgYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2Uke3NjaGVtYSAhPT0gbnVsbCAmJiBzY2hlbWEgIT09IHZvaWQgMCAmJiAoX3NjaGVtYSRhdHRyaWJ1dGVzID0gc2NoZW1hLmF0dHJpYnV0ZXMpICE9PSBudWxsICYmIF9zY2hlbWEkYXR0cmlidXRlcyAhPT0gdm9pZCAwICYmIF9zY2hlbWEkYXR0cmlidXRlcy5uYW1lc3BhY2VkID8gJy1uYW1lc3BhY2UnIDogJyd9LWlkYCwKICAgICAgcGFyYW1zOiB7CiAgICAgICAgcHJvZHVjdDogdGhpcy4kcm9vdEdldHRlcnNbJ3Byb2R1Y3RJZCddLAogICAgICAgIGNsdXN0ZXI6IHRoaXMuJHJvb3RHZXR0ZXJzWydjbHVzdGVySWQnXSwKICAgICAgICByZXNvdXJjZTogdGhpcy50eXBlLAogICAgICAgIG5hbWVzcGFjZTogKF90aGlzJG1ldGFkYXRhNyA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGE3Lm5hbWVzcGFjZSwKICAgICAgICBpZAogICAgICB9CiAgICB9OwogIH0KICBnZXQgZGV0YWlsTG9jYXRpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fZGV0YWlsTG9jYXRpb247CiAgfQogIGdvVG9EZXRhaWwoKSB7CiAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKHRoaXMuZGV0YWlsTG9jYXRpb24pOwogIH0KICBnb1RvQ2xvbmUobW9yZVF1ZXJ5ID0ge30pIHsKICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgIGxvY2F0aW9uLnF1ZXJ5ID0gewogICAgICAuLi5sb2NhdGlvbi5xdWVyeSwKICAgICAgW01PREVdOiBfQ0xPTkUsCiAgICAgIFtBU106IF9VTkZMQUcsCiAgICAgIC4uLm1vcmVRdWVyeQogICAgfTsKICAgIHRoaXMuY3VycmVudFJvdXRlcigpLnB1c2gobG9jYXRpb24pOwogIH0KICBnb1RvRWRpdChtb3JlUXVlcnkgPSB7fSkgewogICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmRldGFpbExvY2F0aW9uOwogICAgbG9jYXRpb24ucXVlcnkgPSB7CiAgICAgIC4uLmxvY2F0aW9uLnF1ZXJ5LAogICAgICBbTU9ERV06IF9FRElULAogICAgICBbQVNdOiBfVU5GTEFHLAogICAgICAuLi5tb3JlUXVlcnkKICAgIH07CiAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICB9CiAgZ29Ub1ZpZXdDb25maWcobW9yZVF1ZXJ5ID0ge30pIHsKICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgIGxvY2F0aW9uLnF1ZXJ5ID0gewogICAgICAuLi5sb2NhdGlvbi5xdWVyeSwKICAgICAgW01PREVdOiBfVklFVywKICAgICAgW0FTXTogX0NPTkZJRywKICAgICAgLi4ubW9yZVF1ZXJ5CiAgICB9OwogICAgdGhpcy5jdXJyZW50Um91dGVyKCkucHVzaChsb2NhdGlvbik7CiAgfQogIGdvVG9FZGl0WWFtbCgpIHsKICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgIGxvY2F0aW9uLnF1ZXJ5ID0gewogICAgICAuLi5sb2NhdGlvbi5xdWVyeSwKICAgICAgW01PREVdOiBfRURJVCwKICAgICAgW0FTXTogX1lBTUwKICAgIH07CiAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICB9CiAgZ29Ub1ZpZXdZYW1sKCkgewogICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmRldGFpbExvY2F0aW9uOwogICAgbG9jYXRpb24ucXVlcnkgPSB7CiAgICAgIC4uLmxvY2F0aW9uLnF1ZXJ5LAogICAgICBbTU9ERV06IF9WSUVXLAogICAgICBbQVNdOiBfWUFNTAogICAgfTsKICAgIHRoaXMuY3VycmVudFJvdXRlcigpLnB1c2gobG9jYXRpb24pOwogIH0KICBjbG9uZVlhbWwobW9yZVF1ZXJ5ID0ge30pIHsKICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgIGxvY2F0aW9uLnF1ZXJ5ID0gewogICAgICAuLi5sb2NhdGlvbi5xdWVyeSwKICAgICAgW01PREVdOiBfQ0xPTkUsCiAgICAgIFtBU106IF9ZQU1MLAogICAgICAuLi5tb3JlUXVlcnkKICAgIH07CiAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICB9CiAgYXN5bmMgZG93bmxvYWQoKSB7CiAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHRoaXMuZm9sbG93TGluaygndmlldycsIHsKICAgICAgaGVhZGVyczogewogICAgICAgIGFjY2VwdDogJ2FwcGxpY2F0aW9uL3lhbWwnCiAgICAgIH0KICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuY2xlYW5Gb3JEb3dubG9hZCh2YWx1ZS5kYXRhKTsKICAgIGRvd25sb2FkRmlsZShgJHt0aGlzLm5hbWVEaXNwbGF5fS55YW1sYCwgZGF0YSwgJ2FwcGxpY2F0aW9uL3lhbWwnKTsKICB9CiAgYXN5bmMgZG93bmxvYWRCdWxrKGl0ZW1zKSB7CiAgICBjb25zdCBmaWxlcyA9IHt9OwogICAgY29uc3QgbmFtZXMgPSBbXTsKICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykgewogICAgICBsZXQgbmFtZSA9IGAke2l0ZW0ubmFtZURpc3BsYXl9LnlhbWxgOwogICAgICBsZXQgaSA9IDI7CiAgICAgIHdoaWxlIChuYW1lcy5pbmNsdWRlcyhuYW1lKSkgewogICAgICAgIG5hbWUgPSBgJHtpdGVtLm5hbWVEaXNwbGF5fV8ke2krK30ueWFtbGA7CiAgICAgIH0KICAgICAgbmFtZXMucHVzaChuYW1lKTsKICAgIH0KICAgIGF3YWl0IGVhY2hMaW1pdChpdGVtcywgMTAsIChpdGVtLCBpZHgpID0+IHsKICAgICAgcmV0dXJuIGl0ZW0uZm9sbG93TGluaygndmlldycsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi95YW1sJwogICAgICAgIH0KICAgICAgfSkudGhlbihhc3luYyBkYXRhID0+IHsKICAgICAgICBjb25zdCB5YW1sID0gZGF0YS5kYXRhIHx8IGRhdGE7CiAgICAgICAgY29uc3QgY2xlYW5lZFlhbWwgPSBhd2FpdCB0aGlzLmNsZWFuRm9yRG93bmxvYWQoeWFtbCk7CiAgICAgICAgZmlsZXNbYHJlc291cmNlcy8ke25hbWVzW2lkeF19YF0gPSBjbGVhbmVkWWFtbDsKICAgICAgfSk7CiAgICB9KTsKICAgIGNvbnN0IHppcCA9IGF3YWl0IGdlbmVyYXRlWmlwKGZpbGVzKTsKICAgIGRvd25sb2FkRmlsZSgncmVzb3VyY2VzLnppcCcsIHppcCwgJ2FwcGxpY2F0aW9uL3ppcCcpOwogIH0KICB2aWV3SW5BcGkoKSB7CiAgICB3aW5kb3cub3Blbih0aGlzLmxpbmtzLnNlbGYsICdfYmxhbmsnKTsKICB9CiAgcHJvbXB0UmVtb3ZlKHJlc291cmNlcykgewogICAgaWYgKCFyZXNvdXJjZXMpIHsKICAgICAgcmVzb3VyY2VzID0gdGhpczsKICAgIH0KICAgIHRoaXMuJGRpc3BhdGNoKCdwcm9tcHRSZW1vdmUnLCByZXNvdXJjZXMpOwogIH0KICBnZXQgY29uZmlybVJlbW92ZSgpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgYXBwbHlEZWZhdWx0cygpIHt9CiAgZ2V0IHVybEZyb21BdHRycygpIHsKICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuJGdldHRlcnNbJ3NjaGVtYUZvciddKHRoaXMudHlwZSk7CiAgICBjb25zdCB7CiAgICAgIG1ldGFkYXRhOiB7CiAgICAgICAgbmFtZXNwYWNlID0gJ2RlZmF1bHQnCiAgICAgIH0KICAgIH0gPSB0aGlzOwogICAgbGV0IHVybCA9IHNjaGVtYS5saW5rcy5jb2xsZWN0aW9uOwogICAgY29uc3QgYXR0cmlidXRlcyA9IHNjaGVtYSA9PT0gbnVsbCB8fCBzY2hlbWEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNjaGVtYS5hdHRyaWJ1dGVzOwogICAgaWYgKCFhdHRyaWJ1dGVzKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignQXR0cmlidXRlcyBtdXN0IGJlIHByZXNlbnQgb24gdGhlIHNjaGVtYScpOwogICAgfQogICAgY29uc3QgewogICAgICBncm91cCwKICAgICAgcmVzb3VyY2UKICAgIH0gPSBhdHRyaWJ1dGVzOwogICAgdXJsID0gYCR7dXJsLnNsaWNlKDAsIHVybC5pbmRleE9mKCcvdjEnKSl9L2FwaXMvJHtncm91cH0vbmFtZXNwYWNlcy8ke25hbWVzcGFjZX0vJHtyZXNvdXJjZX1gOwogICAgcmV0dXJuIHVybDsKICB9CgogIC8vIGNvbnZlcnQgeWFtbCB0byBvYmplY3QsIGNsZWFuIGZvciBuZXcgaWYgY3JlYXRpbmcvY2xvbmluZwogIC8vIG1hcCBfdHlwZSB0byB0eXBlCiAgY2xlYW5ZYW1sKHlhbWwsIG1vZGUgPSAnZWRpdCcpIHsKICAgIHRyeSB7CiAgICAgIGNvbnN0IG9iaiA9IGpzeWFtbC5sb2FkKHlhbWwpOwogICAgICBpZiAobW9kZSAhPT0gJ2VkaXQnKSB7CiAgICAgICAgdGhpcy4kZGlzcGF0Y2goYGNsZWFuRm9yTmV3YCwgb2JqKTsKICAgICAgfQogICAgICBpZiAob2JqLl90eXBlKSB7CiAgICAgICAgb2JqLnR5cGUgPSBvYmouX3R5cGU7CiAgICAgICAgZGVsZXRlIG9iai5fdHlwZTsKICAgICAgfQogICAgICBjb25zdCBvdXQgPSBqc3lhbWwuZHVtcChvYmosIHsKICAgICAgICBza2lwSW52YWxpZDogdHJ1ZQogICAgICB9KTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQogIGNsZWFuRm9yTmV3KCkgewogICAgdGhpcy4kZGlzcGF0Y2goYGNsZWFuRm9yTmV3YCwgdGhpcyk7CiAgfQogIGNsZWFuRm9yRGlmZigpIHsKICAgIHRoaXMuJGRpc3BhdGNoKGBjbGVhbkZvckRpZmZgLCB0aGlzLnRvSlNPTigpKTsKICB9CiAgYXN5bmMgY2xlYW5Gb3JEb3dubG9hZCh5YW1sKSB7CiAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goYGNsZWFuRm9yRG93bmxvYWRgLCB5YW1sKTsKICB9CiAgeWFtbEZvclNhdmUoeWFtbCkgewogICAgdHJ5IHsKICAgICAgY29uc3Qgb2JqID0ganN5YW1sLmxvYWQoeWFtbCk7CiAgICAgIGlmIChvYmopIHsKICAgICAgICBpZiAodGhpcy5fdHlwZSkgewogICAgICAgICAgb2JqLl90eXBlID0gb2JqLnR5cGU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBqc3lhbWwuZHVtcChvYmopOwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0KICBhc3luYyBzYXZlWWFtbCh5YW1sKSB7CiAgICBhd2FpdCB0aGlzLl9zYXZlWWFtbCh5YW1sKTsKICB9CiAgYXN5bmMgX3NhdmVZYW1sKHlhbWwpIHsKICAgIHZhciBfdGhpcyRzY2hlbWEzOwogICAgLyogTXVsdGlwYXJ0IHN1cHBvcnQsIGJ1dCBuZWVkIHRvIGtub3cgdGhlIHJpZ2h0IGNsdXN0ZXIgYW5kIHdvcmsgZm9yIG1hbmFnZW1lbnQgc3RvcmUKICAgICAgYW5kICJhcHBseSIgc2VlbXMgdG8gb25seSB3b3JrIGZvciBjcmVhdGUsIG5vdCB1cGRhdGUuCiAgICAgY29uc3QgYXJ5ID0ganN5YW1sLmxvYWRBbGwoeWFtbCk7IC8vIHdpbGwgdGhyb3cgb24gaW52YWxpZCB5YW1sLCBhbmQgcmV0dXJuIG9uZSBvciBtb3JlIGRvY3VtZW50cyAodXN1YWxseSBvbmUpCiAgICAgaWYgKCBhcnkubGVuZ3RoID4gMSApIHsKICAgICAgYXdhaXQgdGhpcy4kcm9vdEdldHRlcnNbJ2N1cnJlbnRDbHVzdGVyJ10uZG9BY3Rpb24oJ2FwcGx5JywgewogICAgICAgIHlhbWwsCiAgICAgICAgZGVmYXVsdE5hbWVzcGFjZTogdGhpcy5tZXRhZGF0YS5uYW1lc3BhY2UsCiAgICAgIH0pOwogICAgfQogICAgIGNvbnN0IHBhcnNlZCA9IGFyeVswXTsKICAgICovCgogICAgY29uc3QgcGFyc2VkID0ganN5YW1sLmxvYWQoeWFtbCk7IC8vIHdpbGwgdGhyb3cgb24gaW52YWxpZCB5YW1sLCBhbmQgcmV0dXJuIG9uZSBvciBtb3JlIGRvY3VtZW50cyAodXN1YWxseSBvbmUpCgogICAgaWYgKChfdGhpcyRzY2hlbWEzID0gdGhpcy5zY2hlbWEpICE9PSBudWxsICYmIF90aGlzJHNjaGVtYTMgIT09IHZvaWQgMCAmJiAoX3RoaXMkc2NoZW1hMyA9IF90aGlzJHNjaGVtYTMuYXR0cmlidXRlcykgIT09IG51bGwgJiYgX3RoaXMkc2NoZW1hMyAhPT0gdm9pZCAwICYmIF90aGlzJHNjaGVtYTMubmFtZXNwYWNlZCAmJiAhcGFyc2VkLm1ldGFkYXRhLm5hbWVzcGFjZSkgewogICAgICBjb25zdCBlcnIgPSB0aGlzLiRyb290R2V0dGVyc1snaTE4bi90J10oJ3Jlc291cmNlWWFtbC5lcnJvcnMubmFtZXNwYWNlUmVxdWlyZWQnKTsKICAgICAgdGhyb3cgZXJyOwogICAgfQogICAgbGV0IHJlczsKICAgIGNvbnN0IGlzQ3JlYXRlID0gIXRoaXMuaWQ7CiAgICBjb25zdCBoZWFkZXJzID0gewogICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3lhbWwnLAogICAgICBhY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgfTsKICAgIGlmIChpc0NyZWF0ZSkgewogICAgICByZXMgPSBhd2FpdCB0aGlzLnNjaGVtYS5mb2xsb3dMaW5rKCdjb2xsZWN0aW9uJywgewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIGhlYWRlcnMsCiAgICAgICAgZGF0YTogeWFtbAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHJlcyA9IGF3YWl0IHRoaXMuZm9sbG93TGluaygndXBkYXRlJywgewogICAgICAgIG1ldGhvZDogJ1BVVCcsCiAgICAgICAgaGVhZGVycywKICAgICAgICBkYXRhOiB5YW1sCiAgICAgIH0pOwogICAgfQogICAgYXdhaXQgdGhpcy4kZGlzcGF0Y2goYGxvYWRgLCB7CiAgICAgIGRhdGE6IHJlcywKICAgICAgZXhpc3Rpbmc6IGlzQ3JlYXRlID8gdGhpcyA6IHVuZGVmaW5lZAogICAgfSk7CiAgICBpZiAodGhpcy5pc1Nwb29mZWQpIHsKICAgICAgYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsKICAgICAgICB0eXBlOiB0aGlzLnR5cGUsCiAgICAgICAgb3B0OiB7CiAgICAgICAgICBmb3JjZTogdHJ1ZQogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICB9CiAgfQogIGdldCBtb2RlbFZhbGlkYXRpb25SdWxlcygpIHsKICAgIGNvbnN0IHJ1bGVzID0gW107CiAgICBjb25zdCBjdXN0b21WYWxpZGF0aW9uUnVsZXNldHMgPSB0aGlzID09PSBudWxsIHx8IHRoaXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHRoaXMuY3VzdG9tVmFsaWRhdGlvblJ1bGVzLmZpbHRlcihydWxlID0+ICEhcnVsZS52YWxpZGF0b3JzIHx8ICEhcnVsZS5yZXF1aXJlZCkubWFwKHJ1bGUgPT4gewogICAgICBjb25zdCBmb3JtUnVsZXMgPSBmb3JtUnVsZXNHZW5lcmF0b3IodGhpcy50LCB7CiAgICAgICAgZGlzcGxheUtleTogcnVsZSAhPT0gbnVsbCAmJiBydWxlICE9PSB2b2lkIDAgJiYgcnVsZS50cmFuc2xhdGlvbktleSA/IHRoaXMudChydWxlLnRyYW5zbGF0aW9uS2V5KSA6ICdWYWx1ZScKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGF0aDogcnVsZS5wYXRoLAogICAgICAgIHJ1bGVzOiBbLi4uKHJ1bGUudmFsaWRhdG9ycyB8fCBbXSksIC4uLihydWxlLnJlcXVpcmVkID8gWydyZXF1aXJlZCddIDogW10pLCAuLi4oWydkbnNMYWJlbCcsICdkbnNMYWJlbFJlc3RyaWN0ZWQnLCAnaG9zdG5hbWUnXS5pbmNsdWRlcyhydWxlLnR5cGUpID8gW3J1bGUudHlwZV0gOiBbXSldLm1hcChydWxlID0+IHsKICAgICAgICAgIGlmIChydWxlLmluY2x1ZGVzKCc6JykpIHsKICAgICAgICAgICAgY29uc3QgW3J1bGVLZXksIHJ1bGVBcmddID0gcnVsZS5zcGxpdCgnOicpOwogICAgICAgICAgICByZXR1cm4gZm9ybVJ1bGVzW3J1bGVLZXldKHJ1bGVBcmcpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZvcm1SdWxlc1tydWxlXTsKICAgICAgICB9KS5maWx0ZXIocnVsZSA9PiAhIXJ1bGUpCiAgICAgIH07CiAgICB9KS5maWx0ZXIocnVsZXNldCA9PiBydWxlc2V0LnJ1bGVzLmxlbmd0aCA+IDApOwogICAgcnVsZXMucHVzaCguLi5jdXN0b21WYWxpZGF0aW9uUnVsZXNldHMpOwogICAgcmV0dXJuIHJ1bGVzOwogIH0KICBjdXN0b21WYWxpZGF0aW9uRXJyb3JzKGRhdGEsIGlnbm9yZVBhdGhzID0gW10pIHsKICAgIGNvbnN0IGVycm9ycyA9IFtdOwogICAgbGV0IHsKICAgICAgY3VzdG9tVmFsaWRhdGlvblJ1bGVzCiAgICB9ID0gdGhpczsKICAgIGlmICghaXNFbXB0eShjdXN0b21WYWxpZGF0aW9uUnVsZXMpKSB7CiAgICAgIGlmIChpc0Z1bmN0aW9uKGN1c3RvbVZhbGlkYXRpb25SdWxlcykpIHsKICAgICAgICBjdXN0b21WYWxpZGF0aW9uUnVsZXMgPSBjdXN0b21WYWxpZGF0aW9uUnVsZXMoKTsKICAgICAgfQogICAgICBjdXN0b21WYWxpZGF0aW9uUnVsZXMuZmlsdGVyKHJ1bGUgPT4gIWlnbm9yZVBhdGhzLmluY2x1ZGVzKHJ1bGUucGF0aCkpLmZvckVhY2gocnVsZSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgcGF0aCwKICAgICAgICAgIHJlcXVpcmVkSWY6IHJlcXVpcmVkSWZQYXRoLAogICAgICAgICAgdmFsaWRhdG9ycyA9IFtdLAogICAgICAgICAgdHlwZTogZmllbGRUeXBlCiAgICAgICAgfSA9IHJ1bGU7CiAgICAgICAgbGV0IHBhdGhWYWx1ZSA9IGdldChkYXRhLCBwYXRoKTsKICAgICAgICBjb25zdCBwYXJzZWRSdWxlcyA9IGNvbXBhY3QodmFsaWRhdG9ycyB8fCBbXSk7CiAgICAgICAgbGV0IGRpc3BsYXlLZXkgPSBwYXRoOwogICAgICAgIGlmIChydWxlLnRyYW5zbGF0aW9uS2V5ICYmIHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL2V4aXN0cyddKHJ1bGUudHJhbnNsYXRpb25LZXkpKSB7CiAgICAgICAgICBkaXNwbGF5S2V5ID0gdGhpcy50KHJ1bGUudHJhbnNsYXRpb25LZXkpOwogICAgICAgIH0KICAgICAgICBpZiAoaXNTdHJpbmcocGF0aFZhbHVlKSkgewogICAgICAgICAgcGF0aFZhbHVlID0gcGF0aFZhbHVlLnRyaW0oKTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlcXVpcmVkSWZQYXRoKSB7CiAgICAgICAgICBjb25zdCByZXFJZlZhbCA9IGdldChkYXRhLCByZXF1aXJlZElmUGF0aCk7CiAgICAgICAgICBpZiAoIWlzRW1wdHkocmVxSWZWYWwpICYmIGlzRW1wdHkocGF0aFZhbHVlKSAmJiBwYXRoVmFsdWUgIT09IDApIHsKICAgICAgICAgICAgZXJyb3JzLnB1c2godGhpcy50KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgewogICAgICAgICAgICAgIGtleTogZGlzcGxheUtleQogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhbGlkYXRlTGVuZ3RoKHBhdGhWYWx1ZSwgcnVsZSwgZGlzcGxheUtleSwgdGhpcy4kcm9vdEdldHRlcnMsIGVycm9ycyk7CiAgICAgICAgdmFsaWRhdGVDaGFycyhwYXRoVmFsdWUsIHJ1bGUsIGRpc3BsYXlLZXksIHRoaXMuJHJvb3RHZXR0ZXJzLCBlcnJvcnMpOwogICAgICAgIGlmICghaXNFbXB0eShwYXRoVmFsdWUpICYmIEROU19MSUtFX1RZUEVTLmluY2x1ZGVzKGZpZWxkVHlwZSkpIHsKICAgICAgICAgIC8vIEROUyB0eXBlcyBzaG91bGQgYmUgbG93ZXJjYXNlCiAgICAgICAgICBjb25zdCB0b2xvd2VyID0gKHBhdGhWYWx1ZSB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGlmICh0b2xvd2VyICE9PSBwYXRoVmFsdWUpIHsKICAgICAgICAgICAgcGF0aFZhbHVlID0gdG9sb3dlcjsKICAgICAgICAgICAgVnVlLnNldChkYXRhLCBwYXRoLCBwYXRoVmFsdWUpOwogICAgICAgICAgfQogICAgICAgICAgZXJyb3JzLnB1c2goLi4udmFsaWRhdGVEbnNMaWtlVHlwZXMocGF0aFZhbHVlLCBmaWVsZFR5cGUsIGRpc3BsYXlLZXksIHRoaXMuJHJvb3RHZXR0ZXJzLCBlcnJvcnMpKTsKICAgICAgICB9CiAgICAgICAgcGFyc2VkUnVsZXMuZm9yRWFjaCh2YWxpZGF0b3IgPT4gewogICAgICAgICAgY29uc3QgdmFsaWRhdG9yQW5kQXJncyA9IHZhbGlkYXRvci5zcGxpdCgnOicpOwogICAgICAgICAgY29uc3QgdmFsaWRhdG9yTmFtZSA9IHZhbGlkYXRvckFuZEFyZ3Muc2xpY2UoMCwgMSk7CiAgICAgICAgICBjb25zdCB2YWxpZGF0b3JBcmdzID0gdmFsaWRhdG9yQW5kQXJncy5zbGljZSgxKSB8fCBudWxsOwogICAgICAgICAgY29uc3QgdmFsaWRhdG9yRXhpc3RzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEN1c3RvbVZhbGlkYXRvcnMsIHZhbGlkYXRvck5hbWUpOwogICAgICAgICAgaWYgKCFpc0VtcHR5KHZhbGlkYXRvck5hbWUpICYmIHZhbGlkYXRvckV4aXN0cykgewogICAgICAgICAgICBDdXN0b21WYWxpZGF0b3JzW3ZhbGlkYXRvck5hbWVdKHBhdGhWYWx1ZSwgdGhpcy4kcm9vdEdldHRlcnMsIGVycm9ycywgdmFsaWRhdG9yQXJncywgZGlzcGxheUtleSwgZGF0YSk7CiAgICAgICAgICB9IGVsc2UgaWYgKCFpc0VtcHR5KHZhbGlkYXRvck5hbWUpICYmICF2YWxpZGF0b3JFeGlzdHMpIHsKICAgICAgICAgICAgdmFyIF90aGlzJCRyb290U3RhdGUkJHBsdTsKICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdmFsaWRhdG9yIGlzIGltcG9ydGVkIGZyb20gcGx1Z2luCiAgICAgICAgICAgIGNvbnN0IHBsdWdpblZhbGlkYXRvciA9IChfdGhpcyQkcm9vdFN0YXRlJCRwbHUgPSB0aGlzLiRyb290U3RhdGUuJHBsdWdpbikgPT09IG51bGwgfHwgX3RoaXMkJHJvb3RTdGF0ZSQkcGx1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkcm9vdFN0YXRlJCRwbHUuZ2V0VmFsaWRhdG9yKHZhbGlkYXRvck5hbWUpOwogICAgICAgICAgICBpZiAocGx1Z2luVmFsaWRhdG9yKSB7CiAgICAgICAgICAgICAgcGx1Z2luVmFsaWRhdG9yKHBhdGhWYWx1ZSwgdGhpcy4kcm9vdEdldHRlcnMsIGVycm9ycywgdmFsaWRhdG9yQXJncywgZGlzcGxheUtleSwgZGF0YSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgICAgY29uc29sZS53YXJuKHRoaXMudCgndmFsaWRhdGlvbi5jdXN0b20ubWlzc2luZycsIHsKICAgICAgICAgICAgICAgIHZhbGlkYXRvck5hbWUKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gZXJyb3JzOwogIH0KCiAgLyoqCiAgICogQ2hlY2sgdGhpcyBpbnN0YW5jZSBpcyB2YWxpZCBhZ2FpbnN0CiAgICogLSBhbnkgY3VzdG9tIGRhc2hib2FyZCB2YWxpZGF0aW9uCiAgICoKICAgKiBNb2RlbHMgY2FuIG92ZXJyaWRlIHRoaXMgYW5kIGNhbGwgc3VwZXIudmFsaWRhdGlvbkVycm9ycwogICAqLwogIHZhbGlkYXRpb25FcnJvcnMoZGF0YSA9IHRoaXMsIG9wdHMgPSB7fSkgewogICAgcmV0dXJuIHRoaXMuY3VzdG9tVmFsaWRhdGlvbkVycm9ycyhkYXRhKTsKICB9CiAgZ2V0IG93bmVyc0J5VHlwZSgpIHsKICAgIHZhciBfdGhpcyRtZXRhZGF0YTg7CiAgICBjb25zdCBvd25lclJlZmVyZW5jZXMgPSAoKF90aGlzJG1ldGFkYXRhOCA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGE4Lm93bmVyUmVmZXJlbmNlcykgfHwgW107CiAgICBjb25zdCBvd25lcnNCeVR5cGUgPSB7fTsKICAgIG93bmVyUmVmZXJlbmNlcy5mb3JFYWNoKG93bmVyID0+IHsKICAgICAgaWYgKCFvd25lcnNCeVR5cGVbb3duZXIua2luZF0pIHsKICAgICAgICBvd25lcnNCeVR5cGVbb3duZXIua2luZF0gPSBbb3duZXJdOwogICAgICB9IGVsc2UgewogICAgICAgIG93bmVyc0J5VHlwZVtvd25lci5raW5kXS5wdXNoKG93bmVyKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gb3duZXJzQnlUeXBlOwogIH0KICBnZXQgb3duZXJzKCkgewogICAgY29uc3Qgb3duZXJzID0gW107CiAgICBmb3IgKGNvbnN0IGtpbmQgaW4gdGhpcy5vd25lcnNCeVR5cGUpIHsKICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kcm9vdEdldHRlcnNbJ2NsdXN0ZXIvc2NoZW1hJ10oa2luZCk7CiAgICAgIGlmIChzY2hlbWEpIHsKICAgICAgICBjb25zdCB0eXBlID0gc2NoZW1hLmlkOwogICAgICAgIGNvbnN0IGFsbE9mUmVzb3VyY2VUeXBlID0gdGhpcy4kcm9vdEdldHRlcnNbJ2NsdXN0ZXIvYWxsJ10odHlwZSk7CiAgICAgICAgdGhpcy5vd25lcnNCeVR5cGVba2luZF0uZm9yRWFjaCgocmVzb3VyY2UsIGlkeCkgPT4gewogICAgICAgICAgY29uc3QgcmVzb3VyY2VJbnN0YW5jZSA9IGFsbE9mUmVzb3VyY2VUeXBlLmZpbmQocmVzb3VyY2VCeVR5cGUgPT4gewogICAgICAgICAgICB2YXIgX3Jlc291cmNlQnlUeXBlJG1ldGFkOwogICAgICAgICAgICByZXR1cm4gKHJlc291cmNlQnlUeXBlID09PSBudWxsIHx8IHJlc291cmNlQnlUeXBlID09PSB2b2lkIDAgfHwgKF9yZXNvdXJjZUJ5VHlwZSRtZXRhZCA9IHJlc291cmNlQnlUeXBlLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfcmVzb3VyY2VCeVR5cGUkbWV0YWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXNvdXJjZUJ5VHlwZSRtZXRhZC51aWQpID09PSByZXNvdXJjZS51aWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChyZXNvdXJjZUluc3RhbmNlKSB7CiAgICAgICAgICAgIG93bmVycy5wdXNoKHJlc291cmNlSW5zdGFuY2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3duZXJzOwogIH0KICBnZXQgZGV0YWlscygpIHsKICAgIHJldHVybiB0aGlzLl9kZXRhaWxzOwogIH0KICBnZXQgX2RldGFpbHMoKSB7CiAgICB2YXIgX3RoaXMkb3duZXJzOwogICAgY29uc3QgZGV0YWlscyA9IFtdOwogICAgaWYgKCgoX3RoaXMkb3duZXJzID0gdGhpcy5vd25lcnMpID09PSBudWxsIHx8IF90aGlzJG93bmVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkb3duZXJzLmxlbmd0aCkgPiAwKSB7CiAgICAgIGRldGFpbHMucHVzaCh7CiAgICAgICAgbGFiZWw6IHRoaXMudCgncmVzb3VyY2VEZXRhaWwuZGV0YWlsVG9wLm93bmVyUmVmZXJlbmNlcycsIHsKICAgICAgICAgIGNvdW50OiB0aGlzLm93bmVycy5sZW5ndGgKICAgICAgICB9KSwKICAgICAgICBmb3JtYXR0ZXI6ICdMaXN0TGlua0RldGFpbCcsCiAgICAgICAgY29udGVudDogdGhpcy5vd25lcnMubWFwKG93bmVyID0+ICh7CiAgICAgICAgICBrZXk6IG93bmVyLmlkLAogICAgICAgICAgcm93OiBvd25lciwKICAgICAgICAgIGNvbDoge30sCiAgICAgICAgICB2YWx1ZTogb3duZXIubWV0YWRhdGEubmFtZQogICAgICAgIH0pKQogICAgICB9KTsKICAgIH0KICAgIGlmIChnZXQodGhpcywgJ21ldGFkYXRhLmRlbGV0aW9uVGltZXN0YW1wJykpIHsKICAgICAgZGV0YWlscy5wdXNoKHsKICAgICAgICBsYWJlbDogdGhpcy50KCdyZXNvdXJjZURldGFpbC5kZXRhaWxUb3AuZGVsZXRlZCcpLAogICAgICAgIGZvcm1hdHRlcjogJ0xpdmVEYXRlJywKICAgICAgICBmb3JtYXR0ZXJPcHRzOiB7CiAgICAgICAgICBhZGRTdWZmaXg6IHRydWUKICAgICAgICB9LAogICAgICAgIGNvbnRlbnQ6IGdldCh0aGlzLCAnbWV0YWRhdGEuZGVsZXRpb25UaW1lc3RhbXAnKQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBkZXRhaWxzOwogIH0KICBnZXQgdCgpIHsKICAgIHJldHVybiB0aGlzLiRyb290R2V0dGVyc1snaTE4bi90J107CiAgfQoKICAvLyBSZXR1cm5zIGFycmF5IG9mIE1PREVMUyB0aGF0IG93biB0aGlzIHJlc291cmNlIChhc3luYywgbmV0d29yayBjYWxsKQogIGZpbmRPd25lcnMoKSB7CiAgICByZXR1cm4gdGhpcy5fZ2V0UmVsYXRpb25zaGlwKCdvd25lcicsICdmcm9tJyk7CiAgfQoKICAvLyBSZXR1cm5zIGFycmF5IG9mIHt0eXBlLCBuYW1lc3BhY2UsIGlkfSBvYmplY3RzIHRoYXQgb3duIHRoaXMgcmVzb3VyY2UgKHN5bmMpCiAgZ2V0T3duZXJzKCkgewogICAgcmV0dXJuIHRoaXMuX2dldFJlbGF0aW9uc2hpcCgnb3duZXInLCAnZnJvbScpOwogIH0KICBmaW5kT3duZWQoKSB7CiAgICByZXR1cm4gdGhpcy5fZmluZFJlbGF0aW9uc2hpcCgnb3duZXInLCAndG8nKTsKICB9CiAgX3JlbGF0aW9uc2hpcHNGb3IocmVsLCBkaXJlY3Rpb24pIHsKICAgIHZhciBfdGhpcyRtZXRhZGF0YTk7CiAgICBjb25zdCBvdXQgPSB7CiAgICAgIHNlbGVjdG9yczogW10sCiAgICAgIGlkczogW10KICAgIH07CiAgICBpZiAoISgoX3RoaXMkbWV0YWRhdGE5ID0gdGhpcy5tZXRhZGF0YSkgIT09IG51bGwgJiYgX3RoaXMkbWV0YWRhdGE5ICE9PSB2b2lkIDAgJiYgKF90aGlzJG1ldGFkYXRhOSA9IF90aGlzJG1ldGFkYXRhOS5yZWxhdGlvbnNoaXBzKSAhPT0gbnVsbCAmJiBfdGhpcyRtZXRhZGF0YTkgIT09IHZvaWQgMCAmJiBfdGhpcyRtZXRhZGF0YTkubGVuZ3RoKSkgewogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgZm9yIChjb25zdCByIG9mIHRoaXMubWV0YWRhdGEucmVsYXRpb25zaGlwcykgewogICAgICBpZiAocmVsICE9PSAnYW55JyAmJiByLnJlbCAhPT0gcmVsKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKCFyW2Ake2RpcmVjdGlvbn1UeXBlYF0pIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoci5zZWxlY3RvcikgewogICAgICAgIGFkZE9iamVjdHMob3V0LnNlbGVjdG9ycywgewogICAgICAgICAgdHlwZTogci50b1R5cGUsCiAgICAgICAgICBuYW1lc3BhY2U6IHIudG9OYW1lc3BhY2UsCiAgICAgICAgICBzZWxlY3Rvcjogci5zZWxlY3RvcgogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHR5cGUgPSByW2Ake2RpcmVjdGlvbn1UeXBlYF07CiAgICAgICAgbGV0IG5hbWVzcGFjZSA9IHJbYCR7ZGlyZWN0aW9ufU5hbWVzcGFjZWBdOwogICAgICAgIGxldCBuYW1lID0gcltgJHtkaXJlY3Rpb259SWRgXTsKICAgICAgICBpZiAoIW5hbWVzcGFjZSAmJiBuYW1lLmluY2x1ZGVzKCcvJykpIHsKICAgICAgICAgIGNvbnN0IGlkeCA9IG5hbWUuaW5kZXhPZignLycpOwogICAgICAgICAgbmFtZXNwYWNlID0gbmFtZS5zdWJzdHIoMCwgaWR4KTsKICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cihpZHggKyAxKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgaWQgPSAobmFtZXNwYWNlID8gYCR7bmFtZXNwYWNlfS9gIDogJycpICsgbmFtZTsKICAgICAgICBhZGRPYmplY3Qob3V0LmlkcywgewogICAgICAgICAgdHlwZSwKICAgICAgICAgIG5hbWVzcGFjZSwKICAgICAgICAgIG5hbWUsCiAgICAgICAgICBpZAogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0OwogIH0KICBfZ2V0UmVsYXRpb25zaGlwKHJlbCwgZGlyZWN0aW9uKSB7CiAgICB2YXIgX3JlcyRzZWxlY3RvcnM7CiAgICBjb25zdCByZXMgPSB0aGlzLl9yZWxhdGlvbnNoaXBzRm9yKHJlbCwgZGlyZWN0aW9uKTsKICAgIGlmICgoX3JlcyRzZWxlY3RvcnMgPSByZXMuc2VsZWN0b3JzKSAhPT0gbnVsbCAmJiBfcmVzJHNlbGVjdG9ycyAhPT0gdm9pZCAwICYmIF9yZXMkc2VsZWN0b3JzLmxlbmd0aCkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICBjb25zb2xlLndhcm4oJ1N5bmMgcmVxdWVzdCBmb3IgYSByZWxhdGlvbnNoaXAgdGhhdCBpcyBhIHNlbGVjdG9yJyk7CiAgICB9CiAgICByZXR1cm4gcmVzLmlkcyB8fCBbXTsKICB9CiAgYXN5bmMgX2ZpbmRSZWxhdGlvbnNoaXAocmVsLCBkaXJlY3Rpb24pIHsKICAgIGNvbnN0IHsKICAgICAgc2VsZWN0b3JzLAogICAgICBpZHMKICAgIH0gPSB0aGlzLl9yZWxhdGlvbnNoaXBzRm9yKHJlbCwgZGlyZWN0aW9uKTsKICAgIGNvbnN0IG91dCA9IFtdOwogICAgZm9yIChjb25zdCBzZWwgb2Ygc2VsZWN0b3JzKSB7CiAgICAgIGNvbnN0IG1hdGNoaW5nID0gYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ2ZpbmRNYXRjaGluZycsIHNlbCk7CiAgICAgIGFkZE9iamVjdHMob3V0LCBtYXRjaGluZy5kYXRhKTsKICAgIH0KICAgIGZvciAoY29uc3Qgb2JqIG9mIGlkcykgewogICAgICBjb25zdCB7CiAgICAgICAgdHlwZSwKICAgICAgICBpZAogICAgICB9ID0gb2JqOwogICAgICBsZXQgbWF0Y2hpbmcgPSB0aGlzLiRnZXR0ZXJzWydieUlkJ10odHlwZSwgaWQpOwogICAgICBpZiAoIW1hdGNoaW5nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG1hdGNoaW5nID0gYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ2ZpbmQnLCB7CiAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgIGlkCiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIHt9CiAgICAgIH0KICAgICAgaWYgKG1hdGNoaW5nKSB7CiAgICAgICAgYWRkT2JqZWN0KG91dCwgbWF0Y2hpbmcpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0OwogIH0KICBnZXQgc2hvcnRJZCgpIHsKICAgIGNvbnN0IHNwbGl0SWQgPSB0aGlzLmlkLnNwbGl0KCcvJyk7CiAgICByZXR1cm4gc3BsaXRJZC5sZW5ndGggPiAxID8gc3BsaXRJZFsxXSA6IHNwbGl0SWRbMF07CiAgfQogIHRvSlNPTigpIHsKICAgIGNvbnN0IG91dCA9IHt9OwogICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMpOwogICAgZm9yIChjb25zdCBrIG9mIGtleXMpIHsKICAgICAgdmFyIF90aGlzJGs7CiAgICAgIGlmICgoX3RoaXMkayA9IHRoaXNba10pICE9PSBudWxsICYmIF90aGlzJGsgIT09IHZvaWQgMCAmJiBfdGhpcyRrLnRvSlNPTikgewogICAgICAgIG91dFtrXSA9IHRoaXNba10udG9KU09OKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3V0W2tdID0gY2xvbmUodGhpc1trXSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfQoKICAvKioKICAgKiBBbGxvdyBtb2RlbHMgdG8gb3ZlcnJpZGUgdGhlIG9iamVjdCB0aGF0IGlzIHNlbnQgd2hlbiBzYXZpbmcgdGhpcyByZXNvdXJjZQogICAqLwogIHRvU2F2ZSgpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQogIGdldCBjcmVhdGlvblRpbWVzdGFtcCgpIHsKICAgIHZhciBfdGhpcyRtZXRhZGF0YTA7CiAgICByZXR1cm4gKF90aGlzJG1ldGFkYXRhMCA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGEwLmNyZWF0aW9uVGltZXN0YW1wOwogIH0KCiAgLyoqCiAgICogQWxsb3dzIG1vZGVsIHRvIHNwZWNpZnkgSlNPTiBQYXRocyB0aGF0IHNob3VsZCBiZSBmb2xkZWQgaW4gdGhlIFlBTUwgZWRpdG9yIGJ5IGRlZmF1bHQKICAgKi8KICBnZXQgeWFtbEZvbGRpbmcoKSB7CiAgICByZXR1cm4gW107CiAgfQp9"},{"version":3,"names":["NORMAN_NAME","_CLONE","_CONFIG","_EDIT","_UNFLAG","_VIEW","_YAML","AS","MODE","VIEW_IN_API","addObject","addObjects","findBy","removeAt","CustomValidators","downloadFile","generateZip","clone","get","eachLimit","sortableNumericSuffix","escapeHtml","ucFirst","validateChars","validateDnsLikeTypes","validateLength","formRulesGenerator","waitFor","jsyaml","compact","forIn","isEmpty","isFunction","isString","Vue","ExtensionPoint","ActionLocation","getApplicableExtensionEnhancements","DNS_LIKE_TYPES","REMAP_STATE","disabled","notapplied","notready","waitapplied","outofsync","gitupdating","errapplied","waitcheckin","off","waitingforinfrastructure","waitingfornoderef","DEFAULT_COLOR","DEFAULT_ICON","DEFAULT_WAIT_INTERVAL","DEFAULT_WAIT_TMIMEOUT","STATES_ENUM","IN_USE","IN_PROGRESS","PENDING_ROLLBACK","PENDING_UPGRADE","ABORTED","ACTIVATING","ACTIVE","AVAILABLE","BACKED_UP","BOUND","BUILDING","COMPLETED","CORDONED","COUNT","CREATED","CREATING","DEACTIVATING","DEGRADED","DENIED","DEPLOYED","DEPLOYING","DISABLED","DISCONNECTED","DRAINED","DRAINING","ERR_APPLIED","ERROR","ERRORING","ERRORS","EXPIRED","EXPIRING","FAIL","FAILED","HEALTHY","INACTIVE","INFO","INITIALIZING","INPROGRESS","LOCKED","MIGRATING","MISSING","MODIFIED","NOT_APPLICABLE","NOT_APLLIED","NOT_READY","OFF","ORPHANED","OTHER","OUT_OF_SYNC","ON_GOING","PASS","PASSED","PAUSED","PENDING","PROVISIONING","PROVISIONED","PURGED","PURGING","READY","RECONNECTING","REGISTERING","REINITIALIZING","RELEASED","REMOVED","REMOVING","REQUESTED","RESTARTING","RESTORING","RESIZING","RUNNING","SKIP","SKIPPED","STARTING","STOPPED","STOPPING","SUCCEEDED","SUCCESS","SUCCESSFUL","SUPERSEDED","SUSPENDED","UNAVAILABLE","UNHEALTHY","UNINSTALLED","UNINSTALLING","UNKNOWN","UNTRIGGERED","UPDATING","WAIT_APPLIED","WAIT_CHECKIN","WAITING","WARNING","mapStateToEnum","statusString","Object","values","find","val","toLowerCase","toLocaleLowerCase","STATES","color","icon","label","compoundIcon","getStatesByType","type","out","info","error","success","warning","unknown","state","stateKey","push","SORT_ORDER","ready","other","getStateLabel","lowercaseState","colorForState","isError","isTransitioning","key","maybeFn","call","stateDisplay","split","map","join","primaryDisplayStatusFromCount","status","statusOrder","existingStatuses","keys","filter","includes","sort","a","b","indexOf","stateSort","display","replace","isConditionReadyAndWaiting","condition","_condition$type","_condition$reason","reason","Resource","constructor","data","ctx","rehydrateNamespace","setClone","k","defineProperty","value","enumerable","configurable","writable","$getters","$ctx","getters","$rootGetters","rootGetters","$dispatch","dispatch","$state","$rootState","rootState","customValidationRules","_key","m","metadata","uid","namespace","name","id","Math","random","schema","toString","typeDisplay","nameDisplay","_this$spec","_this$metadata","_this$metadata2","displayName","spec","annotations","nameSort","namespacedName","_this$metadata3","namespacedNameSort","groupByLabel","_this$metadata4","t","setLabels","Error","setLabel","setAnnotations","setAnnotation","stateColor","_this$stateObj","_this$stateObj2","stateObj","transitioning","stateBackground","stateIcon","trans","stateDescription","_this$stateObj3","_this$stateObj4","_this$stateObj5","message","_this$metadata5","waitForTestFn","fn","msg","timeoutMs","intervalMs","apply","waitForState","timeout","interval","waitForTransition","undefined","waitForAction","hasAction","waitForLink","hasLink","hasCondition","isCondition","withStatus","conditions","entry","waitForCondition","availableActions","all","_availableActions","last","item","enabled","cur","divider","ok","length","shift","pop","i","currentRoute","currentRouter","app","_route","extensionMenuActions","ACTION","TABLE","action","canUpdate","canCustomEdit","canEditYaml","canYaml","canClone","canCreate","bulkable","bulkAction","weight","canViewInApi","altAction","canDelete","forEach","newActionInstance","enabledFn","typeofEnabled","console","warn","labelKey","_canDelete","isRemovable","isEditable","_this$schema","collectionMethods","x","isCreatable","_this$schema2","resourceMethods","linkName","linkFor","links","followLink","opt","url","urlSuffix","actionName","actionLinkFor","actions","actionLinks","doAction","body","resource","doActionGrowl","err","title","root","patch","merge","alertOnError","method","headers","contentType","catch","e","save","_save","arguments","cleanForSave","forNew","__rehydrate","__clone","processSaveResponse","res","_this$metadata6","errors","validationErrors","Promise","reject","resourceVersion","attributes","namespaced","toSave","_type","_name","_labels","labels","_annotations","argParam","kind","existing","_status","force","remove","_remove","window","$globalApp","$route","$router","listLocation","params","product","cluster","_detailLocation","_this$id","_schema$attributes","_this$metadata7","detailLocation","goToDetail","goToClone","moreQuery","location","query","goToEdit","goToViewConfig","goToEditYaml","goToViewYaml","cloneYaml","download","accept","cleanForDownload","downloadBulk","items","files","names","idx","then","yaml","cleanedYaml","zip","viewInApi","open","self","promptRemove","resources","confirmRemove","applyDefaults","urlFromAttrs","collection","group","slice","cleanYaml","mode","obj","load","dump","skipInvalid","cleanForNew","cleanForDiff","toJSON","yamlForSave","saveYaml","_saveYaml","_this$schema3","parsed","isCreate","isSpoofed","modelValidationRules","rules","customValidationRulesets","rule","validators","required","formRules","displayKey","translationKey","path","ruleKey","ruleArg","ruleset","customValidationErrors","ignorePaths","requiredIf","requiredIfPath","fieldType","pathValue","parsedRules","trim","reqIfVal","tolower","set","validator","validatorAndArgs","validatorName","validatorArgs","validatorExists","prototype","hasOwnProperty","_this$$rootState$$plu","pluginValidator","$plugin","getValidator","opts","ownersByType","_this$metadata8","ownerReferences","owner","owners","allOfResourceType","resourceInstance","resourceByType","_resourceByType$metad","details","_details","_this$owners","count","formatter","content","row","col","formatterOpts","addSuffix","findOwners","_getRelationship","getOwners","findOwned","_findRelationship","_relationshipsFor","rel","direction","_this$metadata9","selectors","ids","relationships","r","selector","toType","toNamespace","substr","_res$selectors","sel","matching","shortId","splitId","_this$k","creationTimestamp","_this$metadata0","yamlFolding"],"sources":["/app/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js"],"sourcesContent":["import { NORMAN_NAME } from '@shell/config/labels-annotations';\nimport {\n  _CLONE,\n  _CONFIG,\n  _EDIT,\n  _UNFLAG,\n  _VIEW,\n  _YAML,\n  AS,\n  MODE\n} from '@shell/config/query-params';\nimport { VIEW_IN_API } from '@shell/store/prefs';\nimport { addObject, addObjects, findBy, removeAt } from '@shell/utils/array';\nimport CustomValidators from '@shell/utils/custom-validators';\nimport { downloadFile, generateZip } from '@shell/utils/download';\nimport { clone, get } from '@shell/utils/object';\nimport { eachLimit } from '@shell/utils/promise';\nimport { sortableNumericSuffix } from '@shell/utils/sort';\nimport { escapeHtml, ucFirst } from '@shell/utils/string';\nimport {\n  validateChars,\n  validateDnsLikeTypes,\n  validateLength,\n} from '@shell/utils/validators';\nimport formRulesGenerator from '@shell/utils/validators/formRules/index';\nimport { waitFor } from '@shell/utils/async';\nimport jsyaml from 'js-yaml';\nimport compact from 'lodash/compact';\nimport forIn from 'lodash/forIn';\nimport isEmpty from 'lodash/isEmpty';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport Vue from 'vue';\n\nimport { ExtensionPoint, ActionLocation } from '@shell/core/types';\nimport { getApplicableExtensionEnhancements } from '@shell/core/plugin-helpers';\n\nexport const DNS_LIKE_TYPES = ['dnsLabel', 'dnsLabelRestricted', 'hostname'];\n\nconst REMAP_STATE = {\n  disabled:                 'inactive',\n  notapplied:               'Not Applied',\n  notready:                 'Not Ready',\n  waitapplied:              'Wait Applied',\n  outofsync:                'Out of Sync',\n  'in-progress':            'In Progress',\n  gitupdating:              'Git Updating',\n  errapplied:               'Err Applied',\n  waitcheckin:              'Wait Check-In',\n  off:                      'Disabled',\n  waitingforinfrastructure: 'Waiting for Infra',\n  waitingfornoderef:        'Waiting for Node Ref'\n};\n\nconst DEFAULT_COLOR = 'warning';\nconst DEFAULT_ICON = 'x';\n\nconst DEFAULT_WAIT_INTERVAL = 1000;\nconst DEFAULT_WAIT_TMIMEOUT = 30000;\n\nexport const STATES_ENUM = {\n  IN_USE:           'in-use',\n  IN_PROGRESS:      'in-progress',\n  PENDING_ROLLBACK: 'pending-rollback',\n  PENDING_UPGRADE:  'pending-upgrade',\n  ABORTED:          'aborted',\n  ACTIVATING:       'activating',\n  ACTIVE:           'active',\n  AVAILABLE:        'available',\n  BACKED_UP:        'backedup',\n  BOUND:            'bound',\n  BUILDING:         'building',\n  COMPLETED:        'completed',\n  CORDONED:         'cordoned',\n  COUNT:            'count',\n  CREATED:          'created',\n  CREATING:         'creating',\n  DEACTIVATING:     'deactivating',\n  DEGRADED:         'degraded',\n  DENIED:           'denied',\n  DEPLOYED:         'deployed',\n  DEPLOYING:        'deploying',\n  DISABLED:         'disabled',\n  DISCONNECTED:     'disconnected',\n  DRAINED:          'drained',\n  DRAINING:         'draining',\n  ERR_APPLIED:      'errapplied',\n  ERROR:            'error',\n  ERRORING:         'erroring',\n  ERRORS:           'errors',\n  EXPIRED:          'expired',\n  EXPIRING:         'expiring',\n  FAIL:             'fail',\n  FAILED:           'failed',\n  HEALTHY:          'healthy',\n  INACTIVE:         'inactive',\n  INFO:             'info',\n  INITIALIZING:     'initializing',\n  INPROGRESS:       'inprogress',\n  LOCKED:           'locked',\n  MIGRATING:        'migrating',\n  MISSING:          'missing',\n  MODIFIED:         'modified',\n  NOT_APPLICABLE:   'notApplicable',\n  NOT_APLLIED:      'notapplied',\n  NOT_READY:        'notready',\n  OFF:              'off',\n  ORPHANED:         'orphaned',\n  OTHER:            'other',\n  OUT_OF_SYNC:      'outofsync',\n  ON_GOING:         'on-going',\n  PASS:             'pass',\n  PASSED:           'passed',\n  PAUSED:           'paused',\n  PENDING:          'pending',\n  PROVISIONING:     'provisioning',\n  PROVISIONED:      'provisioned',\n  PURGED:           'purged',\n  PURGING:          'purging',\n  READY:            'ready',\n  RECONNECTING:     'reconnecting',\n  REGISTERING:      'registering',\n  REINITIALIZING:   'reinitializing',\n  RELEASED:         'released',\n  REMOVED:          'removed',\n  REMOVING:         'removing',\n  REQUESTED:        'requested',\n  RESTARTING:       'restarting',\n  RESTORING:        'restoring',\n  RESIZING:         'resizing',\n  RUNNING:          'running',\n  SKIP:             'skip',\n  SKIPPED:          'skipped',\n  STARTING:         'starting',\n  STOPPED:          'stopped',\n  STOPPING:         'stopping',\n  SUCCEEDED:        'succeeded',\n  SUCCESS:          'success',\n  SUCCESSFUL:       'successful',\n  SUPERSEDED:       'superseded',\n  SUSPENDED:        'suspended',\n  UNAVAILABLE:      'unavailable',\n  UNHEALTHY:        'unhealthy',\n  UNINSTALLED:      'uninstalled',\n  UNINSTALLING:     'uninstalling',\n  UNKNOWN:          'unknown',\n  UNTRIGGERED:      'untriggered',\n  UPDATING:         'updating',\n  WAIT_APPLIED:     'waitapplied',\n  WAIT_CHECKIN:     'waitcheckin',\n  WAITING:          'waiting',\n  WARNING:          'warning',\n};\n\nexport function mapStateToEnum(statusString) {\n  // e.g. in fleet Status is Capitalized. This function will map it to the enum\n  return Object.values(STATES_ENUM).find((val) => {\n    return val.toLowerCase() === statusString.toLocaleLowerCase();\n  });\n}\n\nexport const STATES = {\n  [STATES_ENUM.IN_USE]: {\n    color: 'success', icon: 'dot-open', label: 'In Use', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.IN_PROGRESS]: {\n    color: 'info', icon: 'tag', label: 'In Progress', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING_ROLLBACK]: {\n    color: 'info', icon: 'dot-half', label: 'Pending Rollback', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING_UPGRADE]: {\n    color: 'info', icon: 'dot-half', label: 'Pending Update', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ABORTED]: {\n    color: 'warning', icon: 'error', label: 'Aborted', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.ACTIVATING]: {\n    color: 'info', icon: 'tag', label: 'Activating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ACTIVE]: {\n    color: 'success', icon: 'dot-open', label: 'Active', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.AVAILABLE]: {\n    color: 'success', icon: 'dot-open', label: 'Available', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BACKED_UP]: {\n    color: 'success', icon: 'backup', label: 'Backed Up', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BOUND]: {\n    color: 'success', icon: 'dot', label: 'Bound', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BUILDING]: {\n    color: 'success', icon: 'dot-open', label: 'Building', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.COMPLETED]: {\n    color: 'success', icon: 'dot', label: 'Completed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.CORDONED]: {\n    color: 'info', icon: 'tag', label: 'Cordoned', compoundIcon: 'info'\n  },\n  [STATES_ENUM.COUNT]: {\n    color: 'success', icon: 'dot-open', label: 'Count', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.CREATED]: {\n    color: 'info', icon: 'tag', label: 'Created', compoundIcon: 'info'\n  },\n  [STATES_ENUM.CREATING]: {\n    color: 'info', icon: 'tag', label: 'Creating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DEACTIVATING]: {\n    color: 'info', icon: 'adjust', label: 'Deactivating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DEGRADED]: {\n    color: 'warning', icon: 'error', label: 'Degraded', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DENIED]: {\n    color: 'error', icon: 'adjust', label: 'Denied', compoundIcon: 'error'\n  },\n  [STATES_ENUM.DEPLOYED]: {\n    color: 'success', icon: 'dot-open', label: 'Deployed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.DISABLED]: {\n    color: 'warning', icon: 'error', label: 'Disabled', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DISCONNECTED]: {\n    color: 'warning', icon: 'error', label: 'Disconnected', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DRAINED]: {\n    color: 'info', icon: 'tag', label: 'Drained', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DRAINING]: {\n    color: 'warning', icon: 'tag', label: 'Draining', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.ERR_APPLIED]: {\n    color: 'error', icon: 'error', label: 'Error Applied', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERROR]: {\n    color: 'error', icon: 'error', label: 'Error', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERRORING]: {\n    color: 'error', icon: 'error', label: 'Erroring', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERRORS]: {\n    color: 'error', icon: 'error', label: 'Errors', compoundIcon: 'error'\n  },\n  [STATES_ENUM.EXPIRED]: {\n    color: 'error', icon: 'error', label: 'Expired', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.EXPIRING]: {\n    color: 'warning', icon: 'error', label: 'Expiring', compoundIcon: 'error'\n  },\n  [STATES_ENUM.FAIL]: {\n    color: 'error', icon: 'error', label: 'Fail', compoundIcon: 'error'\n  },\n  [STATES_ENUM.FAILED]: {\n    color: 'error', icon: 'error', label: 'Failed', compoundIcon: 'error'\n  },\n  [STATES_ENUM.HEALTHY]: {\n    color: 'success', icon: 'dot-open', label: 'Healthy', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.INACTIVE]: {\n    color: 'error', icon: 'dot', label: 'Inactive', compoundIcon: 'error'\n  },\n  [STATES_ENUM.INITIALIZING]: {\n    color: 'warning', icon: 'error', label: 'Initializing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.INPROGRESS]: {\n    color: 'info', icon: 'spinner', label: 'In Progress', compoundIcon: 'info'\n  },\n  [STATES_ENUM.INFO]: {\n    color: 'info', icon: 'info', label: 'Info', compoundIcon: 'info'\n  },\n  [STATES_ENUM.LOCKED]: {\n    color: 'warning', icon: 'adjust', label: 'Locked', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.MIGRATING]: {\n    color: 'info', icon: 'info', label: 'Migrated', compoundIcon: 'info'\n  },\n  [STATES_ENUM.MISSING]: {\n    color: 'warning', icon: 'adjust', label: 'Missing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.MODIFIED]: {\n    color: 'warning', icon: 'edit', label: 'Modified', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_APPLICABLE]: {\n    color: 'warning', icon: 'tag', label: 'Not Applicable', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_APLLIED]: {\n    color: 'warning', icon: 'tag', label: 'Not Applied', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_READY]: {\n    color: 'warning', icon: 'tag', label: 'Not Ready', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.OFF]: {\n    color: 'darker', icon: 'error', label: 'Off'\n  },\n  [STATES_ENUM.ON_GOING]: {\n    color: 'info', icon: 'info', label: 'Info', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ORPHANED]: {\n    color: 'warning', icon: 'tag', label: 'Orphaned', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.OTHER]: {\n    color: 'info', icon: 'info', label: 'Other', compoundIcon: 'info'\n  },\n  [STATES_ENUM.OUT_OF_SYNC]: {\n    color: 'warning', icon: 'tag', label: 'Out Of Sync', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.PASS]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Pass', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PASSED]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Passed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PAUSED]: {\n    color: 'info', icon: 'info', label: 'Paused', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING]: {\n    color: 'info', icon: 'tag', label: 'Pending', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PROVISIONING]: {\n    color: 'info', icon: 'dot', label: 'Provisioning', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PROVISIONED]: {\n    color: 'success', icon: 'dot', label: 'Provisioned', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PURGED]: {\n    color: 'error', icon: 'purged', label: 'Purged', compoundIcon: 'error'\n  },\n  [STATES_ENUM.PURGING]: {\n    color: 'info', icon: 'purged', label: 'Purging', compoundIcon: 'info'\n  },\n  [STATES_ENUM.READY]: {\n    color: 'success', icon: 'dot-open', label: 'Ready', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.RECONNECTING]: {\n    color: 'error', icon: 'error', label: 'Reconnecting', compoundIcon: 'error'\n  },\n  [STATES_ENUM.REGISTERING]: {\n    color: 'info', icon: 'tag', label: 'Registering', compoundIcon: 'info'\n  },\n  [STATES_ENUM.REINITIALIZING]: {\n    color: 'warning', icon: 'error', label: 'Reinitializing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.RELEASED]: {\n    color: 'warning', icon: 'error', label: 'Released', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.REMOVED]: {\n    color: 'error', icon: 'trash', label: 'Removed', compoundIcon: 'error'\n  },\n  [STATES_ENUM.REMOVING]: {\n    color: 'info', icon: 'trash', label: 'Removing', compoundIcon: 'info'\n  },\n  [STATES_ENUM.REQUESTED]: {\n    color: 'info', icon: 'tag', label: 'Requested', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESTARTING]: {\n    color: 'info', icon: 'adjust', label: 'Restarting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESTORING]: {\n    color: 'info', icon: 'medicalcross', label: 'Restoring', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESIZING]: {\n    color: 'warning', icon: 'dot', label: 'Resizing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.RUNNING]: {\n    color: 'success', icon: 'dot-open', label: 'Running', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SKIP]: {\n    color: 'info', icon: 'dot-open', label: 'Skip', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SKIPPED]: {\n    color: 'info', icon: 'dot-open', label: 'Skipped', compoundIcon: 'info'\n  },\n  [STATES_ENUM.STARTING]: {\n    color: 'info', icon: 'adjust', label: 'Starting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.STOPPED]: {\n    color: 'error', icon: 'dot', label: 'Stopped', compoundIcon: 'error'\n  },\n  [STATES_ENUM.STOPPING]: {\n    color: 'info', icon: 'adjust', label: 'Stopping', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SUCCEEDED]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Succeeded', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SUCCESS]: {\n    color: 'success', icon: 'dot-open', label: 'Success', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SUCCESSFUL]: {\n    color: 'success', icon: 'dot-open', label: 'Successful'\n  },\n  [STATES_ENUM.SUPERSEDED]: {\n    color: 'info', icon: 'dot-open', label: 'Superseded', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SUSPENDED]: {\n    color: 'info', icon: 'pause', label: 'Suspended', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNAVAILABLE]: {\n    color: 'error', icon: 'error', label: 'Unavailable', compoundIcon: 'error'\n  },\n  [STATES_ENUM.UNHEALTHY]: {\n    color: 'error', icon: 'error', label: 'Unhealthy', compoundIcon: 'error'\n  },\n  [STATES_ENUM.UNINSTALLED]: {\n    color: 'info', icon: 'trash', label: 'Uninstalled', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNINSTALLING]: {\n    color: 'info', icon: 'trash', label: 'Uninstalling', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNKNOWN]: {\n    color: 'warning', icon: 'x', label: 'Unknown', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.UNTRIGGERED]: {\n    color: 'success', icon: 'tag', label: 'Untriggered', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.UPDATING]: {\n    color: 'warning', icon: 'tag', label: 'Updating', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.WAIT_APPLIED]: {\n    color: 'info', icon: 'tag', label: 'Wait Applied', compoundIcon: 'info'\n  },\n  [STATES_ENUM.WAIT_CHECKIN]: {\n    color: 'warning', icon: 'tag', label: 'Wait Checkin', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.WAITING]: {\n    color: 'info', icon: 'tag', label: 'Waiting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.WARNING]: {\n    color: 'warning', icon: 'error', label: 'Warning', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DEPLOYING]: {\n    color: 'info', icon: 'info', label: 'Deploying', compoundIcon: 'info'\n  },\n};\n\nexport function getStatesByType(type = 'info') {\n  const out = {\n    info:    [],\n    error:   [],\n    success: [],\n    warning: [],\n    unknown: [],\n  };\n\n  forIn(STATES, (state, stateKey) => {\n    if (state.color) {\n      if (out[state.color]) {\n        out[state.color].push(stateKey);\n      } else {\n        out.unknown.push(stateKey);\n      }\n    }\n  });\n\n  return out;\n}\n\nconst SORT_ORDER = {\n  error:    1,\n  warning:  2,\n  info:     3,\n  success:  4,\n  ready:    5,\n  notready: 6,\n  other:    7,\n};\n\nexport function getStateLabel(state) {\n  const lowercaseState = state.toLowerCase();\n\n  return STATES[lowercaseState] ? STATES[lowercaseState].label : STATES[STATES_ENUM.UNKNOWN].label;\n}\n\nexport function colorForState(state, isError, isTransitioning) {\n  if ( isError ) {\n    return 'text-error';\n  }\n\n  if ( isTransitioning ) {\n    return 'text-info';\n  }\n\n  const key = (state || 'active').toLowerCase();\n  let color;\n\n  if ( STATES[key] && STATES[key].color ) {\n    color = maybeFn.call(this, STATES[key].color);\n  }\n\n  if ( !color ) {\n    color = DEFAULT_COLOR;\n  }\n\n  return `text-${ color }`;\n}\n\nexport function stateDisplay(state) {\n  // @TODO use translations\n  const key = (state || 'active').toLowerCase();\n\n  if ( REMAP_STATE[key] ) {\n    return REMAP_STATE[key];\n  }\n\n  return key.split(/-/).map(ucFirst).join('-');\n}\n\nexport function primaryDisplayStatusFromCount(status) {\n  const statusOrder = [\n    STATES_ENUM.ERROR,\n    STATES_ENUM.FAILED,\n    STATES_ENUM.WARNING,\n    STATES_ENUM.MODIFIED,\n    STATES_ENUM.WAIT_APPLIED,\n    STATES_ENUM.ORPHANED,\n    STATES_ENUM.MISSING,\n    STATES_ENUM.UNKNOWN,\n    STATES_ENUM.NOT_READY,\n    STATES_ENUM.READY,\n  ];\n\n  // sort status by order of statusOrder\n  const existingStatuses = Object.keys(status).filter((key) => {\n    return status[key] > 0 && statusOrder.includes(key.toLowerCase());\n  }).sort((a, b) => statusOrder.indexOf(a.toLowerCase()) - statusOrder.indexOf(b.toLowerCase()));\n\n  return existingStatuses[0] ? existingStatuses[0] : STATES_ENUM.UNKNOWN;\n}\n\nexport function stateSort(color, display) {\n  color = color.replace(/^(text|bg)-/, '');\n\n  return `${ SORT_ORDER[color] || SORT_ORDER['other'] } ${ display }`;\n}\n\nexport function isConditionReadyAndWaiting(condition) {\n  if (!condition) {\n    return false;\n  }\n\n  return condition?.type?.toLowerCase() === 'ready' && condition?.reason?.toLowerCase() === 'waiting';\n}\n\nfunction maybeFn(val) {\n  if ( isFunction(val) ) {\n    return val(this);\n  }\n\n  return val;\n}\n\nexport default class Resource {\n  constructor(data, ctx, rehydrateNamespace = null, setClone = false) {\n    for ( const k in data ) {\n      this[k] = data[k];\n    }\n\n    Object.defineProperty(this, '$ctx', {\n      value:      ctx,\n      enumerable: false,\n    });\n\n    if ( rehydrateNamespace ) {\n      Object.defineProperty(this, '__rehydrate', {\n        value:        rehydrateNamespace,\n        enumerable:   true,\n        configurable: true\n      });\n    }\n\n    if ( setClone ) {\n      Object.defineProperty(this, '__clone', {\n        value:        true,\n        enumerable:   true,\n        configurable: true,\n        writable:     true\n      });\n    }\n  }\n\n  get '$getters'() {\n    return this.$ctx.getters;\n  }\n\n  get '$rootGetters'() {\n    return this.$ctx.rootGetters;\n  }\n\n  get '$dispatch'() {\n    return this.$ctx.dispatch;\n  }\n\n  get '$state'() {\n    return this.$ctx.state;\n  }\n\n  get '$rootState'() {\n    return this.$ctx.rootState;\n  }\n\n  get customValidationRules() {\n    return [\n      /**\n       * Essentially a fake schema object with additional params to extend validation\n       *\n       * @param {nullable} Value is nullable\n       * @param {path} Path on the resource to the value to validate\n       * @param {required} Value required\n       * @param {requiredIf} Value required if value at path not empty\n       * @param {translationKey} Human readable display key for param in path e.g. metadata.name === Name\n       * @param {type} Type of field to validate\n       * @param {validators} array of strings where item is name of exported validator function in custom-validators, args can be passed by prepending args separated by colon. e.g maxLength:63\n       */\n      /* {\n        nullable:       false,\n        path:           'spec.ports',\n        required:       true,\n        type:           'array',\n        validators:     ['servicePort'],\n      } */\n    ];\n  }\n\n  get _key() {\n    const m = this.metadata;\n\n    if ( m ) {\n      if ( m.uid ) {\n        return m.uid;\n      }\n\n      if ( m.namespace ) {\n        return `${ this.type }/${ m.namespace }/${ m.name }`;\n      }\n    }\n\n    if ( this.id ) {\n      return `${ this.type }/${ this.id }`;\n    }\n\n    return `${ this.type }/${ Math.random() }`;\n  }\n\n  get schema() {\n    return this.$getters['schemaFor'](this.type);\n  }\n\n  toString() {\n    return `[${ this.type }: ${ this.id }]`;\n  }\n\n  get typeDisplay() {\n    const schema = this.schema;\n\n    if ( schema ) {\n      return this.$rootGetters['type-map/labelFor'](schema);\n    }\n\n    return '?';\n  }\n\n  get nameDisplay() {\n    return this.displayName || this.spec?.displayName || this.metadata?.annotations?.[NORMAN_NAME] || this.name || this.metadata?.name || this.id;\n  }\n\n  get nameSort() {\n    return sortableNumericSuffix(this.nameDisplay).toLowerCase();\n  }\n\n  get namespacedName() {\n    const namespace = this.metadata?.namespace;\n    const name = this.nameDisplay;\n\n    if ( namespace ) {\n      return `${ namespace }:${ name }`;\n    }\n\n    return name;\n  }\n\n  get namespacedNameSort() {\n    return sortableNumericSuffix(this.namespacedName).toLowerCase();\n  }\n\n  get groupByLabel() {\n    const name = this.metadata?.namespace;\n    let out;\n\n    if ( name ) {\n      out = this.t('resourceTable.groupLabel.namespace', { name: escapeHtml(name) });\n    } else {\n      out = this.t('resourceTable.groupLabel.notInANamespace');\n    }\n\n    return out;\n  }\n\n  setLabels(/* val */) {\n    throw new Error('Implement setLabels in subclass');\n  }\n\n  setLabel(/* key, val */) {\n    throw new Error('Implement setLabel in subclass');\n  }\n\n  setAnnotations(val) {\n    throw new Error('Implement setAnnotations in subclass');\n  }\n\n  setAnnotation(key, val) {\n    throw new Error('Implement setAnnotation in subclass');\n  }\n\n  // You can override the displayed by providing your own stateDisplay (and possibly using the function exported above)\n  get stateDisplay() {\n    return stateDisplay(this.state);\n  }\n\n  get stateColor() {\n    return colorForState.call(\n      this,\n      this.state,\n      this.stateObj?.error,\n      this.stateObj?.transitioning\n    );\n  }\n\n  get stateBackground() {\n    return this.stateColor.replace('text-', 'bg-');\n  }\n\n  get stateIcon() {\n    let trans = false;\n    let error = false;\n\n    if ( this.metadata && this.metadata.state ) {\n      trans = this.metadata.state.transitioning;\n      error = this.metadata.state.error;\n    }\n\n    if ( trans ) {\n      return 'icon icon-spinner icon-spin';\n    }\n\n    if ( error ) {\n      return 'icon icon-error';\n    }\n\n    const key = (this.state || '').toLowerCase();\n    let icon;\n\n    if ( STATES[key] && STATES[key].icon ) {\n      icon = maybeFn.call(this, STATES[key].icon);\n    }\n\n    if ( !icon ) {\n      icon = DEFAULT_ICON;\n    }\n\n    return `icon icon-${ icon }`;\n  }\n\n  get stateSort() {\n    return stateSort(this.stateColor, this.stateDisplay);\n  }\n\n  get stateDescription() {\n    const trans = this.stateObj?.transitioning || false;\n    const error = this.stateObj?.error || false;\n    const message = this.stateObj?.message;\n\n    return trans || error ? ucFirst(message) : '';\n  }\n\n  get stateObj() {\n    return this.metadata?.state;\n  }\n\n  // ------------------------------------------------------------------\n\n  waitForTestFn(fn, msg, timeoutMs, intervalMs) {\n    return waitFor(() => fn.apply(this), msg, timeoutMs || DEFAULT_WAIT_TMIMEOUT, intervalMs || DEFAULT_WAIT_INTERVAL, true);\n  }\n\n  waitForState(state, timeout, interval) {\n    return this.waitForTestFn(() => {\n      return (this.state || '').toLowerCase() === state.toLowerCase();\n    }, `state=${ state }`, timeout, interval);\n  }\n\n  waitForTransition() {\n    return this.waitForTestFn(() => {\n      return !this.transitioning;\n    }, 'transition completion', undefined, undefined);\n  }\n\n  waitForAction(name) {\n    return this.waitForTestFn(() => {\n      return this.hasAction(name);\n    }, `action=${ name }`, undefined, undefined);\n  }\n\n  waitForLink(name) {\n    return this.waitForTestFn(() => {\n      return this.hasLink(name);\n    }, `link=${ name }`, undefined, undefined);\n  }\n\n  hasCondition(condition) {\n    return this.isCondition(condition, null);\n  }\n\n  isCondition(condition, withStatus = 'True') {\n    if ( !this.status || !this.status.conditions ) {\n      return false;\n    }\n\n    const entry = findBy((this.status.conditions || []), 'type', condition);\n\n    if ( !entry ) {\n      return false;\n    }\n\n    if ( !withStatus ) {\n      return true;\n    }\n\n    return (entry.status || '').toLowerCase() === `${ withStatus }`.toLowerCase();\n  }\n\n  waitForCondition(name, withStatus = 'True', timeoutMs = DEFAULT_WAIT_TMIMEOUT, intervalMs = DEFAULT_WAIT_INTERVAL) {\n    return this.waitForTestFn(() => {\n      return this.isCondition(name, withStatus);\n    }, `condition ${ name }=${ withStatus }`, timeoutMs, intervalMs);\n  }\n\n  // ------------------------------------------------------------------\n\n  get availableActions() {\n    const all = this._availableActions;\n\n    // Remove disabled items and consecutive dividers\n    let last = null;\n    const out = all.filter((item) => {\n      if ( item.enabled === false ) {\n        return false;\n      }\n\n      const cur = item.divider;\n      const ok = !cur || (cur && !last);\n\n      last = cur;\n\n      return ok;\n    });\n\n    // Remove dividers at the beginning\n    while ( out.length && out[0].divider ) {\n      out.shift();\n    }\n\n    // Remove dividers at the end\n    while ( out.length && out[out.length - 1].divider ) {\n      out.pop();\n    }\n\n    // Remove consecutive dividers in the middle\n    for ( let i = 1 ; i < out.length ; i++ ) {\n      if ( out[i].divider && out[i - 1].divider ) {\n        removeAt(out, i, 1);\n        i--;\n      }\n    }\n\n    return out;\n  }\n\n  // You can add custom actions by overriding your own availableActions (and probably reading super._availableActions)\n  get _availableActions() {\n    // get menu actions available by plugins configuration\n    const currentRoute = this.currentRouter().app._route;\n    const extensionMenuActions = getApplicableExtensionEnhancements(this.$rootState, ExtensionPoint.ACTION, ActionLocation.TABLE, currentRoute, this);\n\n    const all = [\n      { divider: true },\n      {\n        action:  this.canUpdate ? 'goToEdit' : 'goToViewConfig',\n        label:   this.t(this.canUpdate ? 'action.edit' : 'action.view'),\n        icon:    'icon icon-edit',\n        enabled: this.canCustomEdit,\n      },\n      {\n        action:  this.canEditYaml ? 'goToEditYaml' : 'goToViewYaml',\n        label:   this.t(this.canEditYaml ? 'action.editYaml' : 'action.viewYaml'),\n        icon:    'icon icon-file',\n        enabled: this.canYaml,\n      },\n      {\n        action:  (this.canCustomEdit ? 'goToClone' : 'cloneYaml'),\n        label:   this.t('action.clone'),\n        icon:    'icon icon-copy',\n        enabled: this.canClone && this.canCreate && (this.canCustomEdit || this.canYaml),\n      },\n      { divider: true },\n      {\n        action:     'download',\n        label:      this.t('action.download'),\n        icon:       'icon icon-download',\n        bulkable:   true,\n        bulkAction: 'downloadBulk',\n        enabled:    this.canYaml,\n        weight:     -9,\n      },\n      {\n        action:  'viewInApi',\n        label:   this.t('action.viewInApi'),\n        icon:    'icon icon-external-link',\n        enabled: this.canViewInApi,\n      },\n      {\n        action:     'promptRemove',\n        altAction:  'remove',\n        label:      this.t('action.remove'),\n        icon:       'icon icon-trash',\n        bulkable:   true,\n        enabled:    this.canDelete,\n        bulkAction: 'promptRemove',\n        weight:     -10, // Delete always goes last\n      },\n    ];\n\n    // Extension actions get added to the end, so add a divider if there are any\n    if (extensionMenuActions.length) {\n      // Add a divider first\n      all.push({ divider: true });\n\n      extensionMenuActions.forEach((action) => {\n        const newActionInstance = { ...action };\n\n        const enabledFn = newActionInstance.enabled;\n        const typeofEnabled = typeof enabledFn;\n\n        switch (typeofEnabled) {\n        case 'undefined':\n          newActionInstance.enabled = true;\n          break;\n        case 'function':\n          Object.defineProperty(newActionInstance, 'enabled', { get: () => enabledFn(this) });\n          break;\n        case 'boolean':\n          // no op, just use it directly\n          break;\n        default:\n          // unsupported value\n          console.warn(`Unsupported 'enabled' property type for action: ${ action.label || action.labelKey }` ); // eslint-disable-line no-console\n          delete newActionInstance.enabled;\n          break;\n        }\n\n        all.push(newActionInstance);\n      });\n    }\n\n    return all;\n  }\n\n  // ------------------------------------------------------------------\n\n  get canDelete() {\n    return this._canDelete;\n  }\n\n  get _canDelete() {\n    return this.hasLink('remove') && this.$rootGetters['type-map/optionsFor'](this.type).isRemovable;\n  }\n\n  get canClone() {\n    return true;\n  }\n\n  get canUpdate() {\n    return this.hasLink('update') && this.$rootGetters['type-map/optionsFor'](this.type).isEditable;\n  }\n\n  get canCustomEdit() {\n    return this.$rootGetters['type-map/hasCustomEdit'](this.type, this.id);\n  }\n\n  get canCreate() {\n    if ( this.schema && !this.schema?.collectionMethods.find((x) => x.toLowerCase() === 'post') ) {\n      return false;\n    }\n\n    return this.$rootGetters['type-map/optionsFor'](this.type).isCreatable;\n  }\n\n  get canViewInApi() {\n    return this.hasLink('self') && this.$rootGetters['prefs/get'](VIEW_IN_API);\n  }\n\n  get canYaml() {\n    return this.hasLink('view');\n  }\n\n  get canEditYaml() {\n    return this.schema?.resourceMethods?.find((x) => x === 'blocked-PUT') ? false : this.canUpdate;\n  }\n\n  // ------------------------------------------------------------------\n\n  hasLink(linkName) {\n    return !!this.linkFor(linkName);\n  }\n\n  linkFor(linkName) {\n    return (this.links || {})[linkName];\n  }\n\n  followLink(linkName, opt = {}) {\n    if ( !opt.url ) {\n      opt.url = (this.links || {})[linkName];\n    }\n\n    if ( opt.urlSuffix ) {\n      opt.url += opt.urlSuffix;\n    }\n\n    if ( !opt.url ) {\n      throw new Error(`Unknown link ${ linkName } on ${ this.type } ${ this.id }`);\n    }\n\n    return this.$dispatch('request', { opt, type: this.type } );\n  }\n\n  // ------------------------------------------------------------------\n\n  hasAction(actionName) {\n    return !!this.actionLinkFor(actionName);\n  }\n\n  actionLinkFor(actionName) {\n    return (this.actions || this.actionLinks || {})[actionName];\n  }\n\n  doAction(actionName, body, opt = {}) {\n    return this.$dispatch('resourceAction', {\n      resource: this,\n      actionName,\n      body,\n      opt,\n    });\n  }\n\n  async doActionGrowl(actionName, body, opt = {}) {\n    try {\n      await this.$dispatch('resourceAction', {\n        resource: this,\n        actionName,\n        body,\n        opt,\n      });\n    } catch (err) {\n      this.$dispatch('growl/fromError', {\n        title: this.$rootGetters['i18n/t']('generic.notification.title.error'),\n        err:   err.data || err,\n      }, { root: true });\n    }\n  }\n\n  // ------------------------------------------------------------------\n\n  patch(data, opt = {}, merge = false, alertOnError = false) {\n    if ( !opt.url ) {\n      // Workaround for the links not being correct - view link is the only one that seems correct\n      opt.url = this.linkFor('view') || this.linkFor('self');\n    }\n\n    opt.method = 'patch';\n    opt.headers = opt.headers || {};\n\n    if (!opt.headers['content-type']) {\n      const contentType = merge ? 'application/strategic-merge-patch+json' : 'application/json-patch+json';\n\n      opt.headers['content-type'] = contentType;\n    }\n    opt.data = data;\n\n    const dispatch = this.$dispatch('request', { opt, type: this.type } );\n\n    return !alertOnError ? dispatch : dispatch.catch((e) => {\n      const title = this.t('resource.errors.update', { name: this.name });\n\n      console.error(title, e); // eslint-disable-line no-console\n\n      this.$dispatch('growl/error', {\n        title,\n        message: e?.message,\n        timeout: 5000\n      }, { root: true });\n    });\n  }\n\n  save() {\n    return this._save(...arguments);\n  }\n\n  /**\n   * Remove any unwanted properties from the object that will be saved\n   */\n  cleanForSave(data, forNew) {\n    delete data.__rehydrate;\n    delete data.__clone;\n\n    return data;\n  }\n\n  /**\n   * Allow to handle the response of the save request\n   * @param {*} res Full request response\n   */\n  processSaveResponse(res) { }\n\n  async _save(opt = { }) {\n    const forNew = !this.id;\n\n    const errors = this.validationErrors(this, opt);\n\n    if (!isEmpty(errors)) {\n      return Promise.reject(errors);\n    }\n\n    if ( this.metadata?.resourceVersion ) {\n      this.metadata.resourceVersion = `${ this.metadata.resourceVersion }`;\n    }\n\n    if ( !opt.url ) {\n      if ( forNew ) {\n        const schema = this.$getters['schemaFor'](this.type);\n        let url = schema.linkFor('collection');\n\n        if ( schema.attributes && schema.attributes.namespaced && this.metadata && this.metadata.namespace ) {\n          url += `/${ this.metadata.namespace }`;\n        }\n\n        opt.url = url;\n      } else {\n        opt.url = this.linkFor('update') || this.linkFor('self');\n      }\n    }\n\n    if ( !opt.method ) {\n      opt.method = ( forNew ? 'post' : 'put' );\n    }\n\n    if ( !opt.headers ) {\n      opt.headers = {};\n    }\n\n    if ( !opt.headers['content-type'] ) {\n      opt.headers['content-type'] = 'application/json';\n    }\n\n    if ( !opt.headers['accept'] ) {\n      opt.headers['accept'] = 'application/json';\n    }\n\n    // @TODO remove this once the API maps steve _type <-> k8s type in both directions\n    opt.data = this.toSave() || { ...this };\n\n    if (opt.data._type) {\n      opt.data.type = opt.data._type;\n    }\n\n    if (opt.data._name) {\n      opt.data.name = opt.data._name;\n    }\n\n    if (opt.data._labels) {\n      opt.data.labels = opt.data._labels;\n    }\n\n    if (opt.data._annotations) {\n      opt.data.annotations = opt.data._annotations;\n    }\n\n    opt.data = this.cleanForSave(opt.data, forNew);\n\n    // handle \"replace\" opt as a query param _replace=true for norman PUT requests\n    if (opt?.replace && opt.method === 'put') {\n      const argParam = opt.url.includes('?') ? '&' : '?';\n\n      opt.url = `${ opt.url }${ argParam }_replace=true`;\n      delete opt.replace;\n    }\n\n    try {\n      const res = await this.$dispatch('request', { opt, type: this.type } );\n\n      // Allow to process response independently from the related models\n      this.processSaveResponse(res);\n\n      // Steve sometimes returns Table responses instead of the resource you just saved.. ignore\n      if ( res && res.kind !== 'Table') {\n        await this.$dispatch('load', { data: res, existing: (forNew ? this : undefined ) });\n      }\n    } catch (e) {\n      if ( this.type && this.id && e?._status === 409) {\n        // If there's a conflict, try to load the new version\n        await this.$dispatch('find', {\n          type: this.type,\n          id:   this.id,\n          opt:  { force: true }\n        });\n      }\n\n      return Promise.reject(e);\n    }\n\n    return this;\n  }\n\n  remove() {\n    return this._remove(...arguments);\n  }\n\n  async _remove(opt = {}) {\n    if ( !opt.url ) {\n      opt.url = this.linkFor('self');\n    }\n\n    opt.method = 'delete';\n\n    const res = await this.$dispatch('request', { opt, type: this.type } );\n\n    if ( res?._status === 204 ) {\n      // If there's no body, assume the resource was immediately deleted\n      // and drop it from the store as if a remove event happened.\n      await this.$dispatch('ws.resource.remove', { data: this });\n    }\n  }\n\n  // ------------------------------------------------------------------\n\n  currentRoute() {\n    return window.$globalApp.$route;\n  }\n\n  currentRouter() {\n    return window.$globalApp.$router;\n  }\n\n  get listLocation() {\n    return {\n      name:   `c-cluster-product-resource`,\n      params: {\n        product:  this.$rootGetters['productId'],\n        cluster:  this.$rootGetters['clusterId'],\n        resource: this.type,\n      }\n    };\n  }\n\n  get _detailLocation() {\n    const schema = this.$getters['schemaFor'](this.type);\n\n    const id = this.id?.replace(/.*\\//, '');\n\n    return {\n      name:   `c-cluster-product-resource${ schema?.attributes?.namespaced ? '-namespace' : '' }-id`,\n      params: {\n        product:   this.$rootGetters['productId'],\n        cluster:   this.$rootGetters['clusterId'],\n        resource:  this.type,\n        namespace: this.metadata?.namespace,\n        id,\n      }\n    };\n  }\n\n  get detailLocation() {\n    return this._detailLocation;\n  }\n\n  goToDetail() {\n    this.currentRouter().push(this.detailLocation);\n  }\n\n  goToClone(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _CLONE,\n      [AS]:   _UNFLAG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToEdit(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _EDIT,\n      [AS]:   _UNFLAG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToViewConfig(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _VIEW,\n      [AS]:   _CONFIG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToEditYaml() {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _EDIT,\n      [AS]:   _YAML\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToViewYaml() {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _VIEW,\n      [AS]:   _YAML\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  cloneYaml(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _CLONE,\n      [AS]:   _YAML,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  async download() {\n    const value = await this.followLink('view', { headers: { accept: 'application/yaml' } });\n    const data = await this.cleanForDownload(value.data);\n\n    downloadFile(`${ this.nameDisplay }.yaml`, data, 'application/yaml');\n  }\n\n  async downloadBulk(items) {\n    const files = {};\n    const names = [];\n\n    for ( const item of items ) {\n      let name = `${ item.nameDisplay }.yaml`;\n      let i = 2;\n\n      while ( names.includes(name) ) {\n        name = `${ item.nameDisplay }_${ i++ }.yaml`;\n      }\n\n      names.push(name);\n    }\n\n    await eachLimit(items, 10, (item, idx) => {\n      return item.followLink('view', { headers: { accept: 'application/yaml' } } ).then(async(data) => {\n        const yaml = data.data || data;\n        const cleanedYaml = await this.cleanForDownload(yaml);\n\n        files[`resources/${ names[idx] }`] = cleanedYaml;\n      });\n    });\n\n    const zip = await generateZip(files);\n\n    downloadFile('resources.zip', zip, 'application/zip');\n  }\n\n  viewInApi() {\n    window.open(this.links.self, '_blank');\n  }\n\n  promptRemove(resources) {\n    if ( !resources ) {\n      resources = this;\n    }\n\n    this.$dispatch('promptRemove', resources);\n  }\n\n  get confirmRemove() {\n    return false;\n  }\n\n  applyDefaults() {\n  }\n\n  get urlFromAttrs() {\n    const schema = this.$getters['schemaFor'](this.type);\n    const { metadata:{ namespace = 'default' } } = this;\n    let url = schema.links.collection;\n\n    const attributes = schema?.attributes;\n\n    if (!attributes) {\n      throw new Error('Attributes must be present on the schema');\n    }\n    const { group, resource } = attributes;\n\n    url = `${ url.slice(0, url.indexOf('/v1')) }/apis/${ group }/namespaces/${ namespace }/${ resource }`;\n\n    return url;\n  }\n\n  // convert yaml to object, clean for new if creating/cloning\n  // map _type to type\n  cleanYaml(yaml, mode = 'edit') {\n    try {\n      const obj = jsyaml.load(yaml);\n\n      if (mode !== 'edit') {\n        this.$dispatch(`cleanForNew`, obj);\n      }\n\n      if (obj._type) {\n        obj.type = obj._type;\n        delete obj._type;\n      }\n      const out = jsyaml.dump(obj, { skipInvalid: true });\n\n      return out;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  cleanForNew() {\n    this.$dispatch(`cleanForNew`, this);\n  }\n\n  cleanForDiff() {\n    this.$dispatch(`cleanForDiff`, this.toJSON());\n  }\n\n  async cleanForDownload(yaml) {\n    return this.$dispatch(`cleanForDownload`, yaml);\n  }\n\n  yamlForSave(yaml) {\n    try {\n      const obj = jsyaml.load(yaml);\n\n      if (obj) {\n        if (this._type) {\n          obj._type = obj.type;\n        }\n\n        return jsyaml.dump(obj);\n      }\n    } catch (e) {\n      return null;\n    }\n  }\n\n  async saveYaml(yaml) {\n    await this._saveYaml(yaml);\n  }\n\n  async _saveYaml(yaml) {\n    /* Multipart support, but need to know the right cluster and work for management store\n      and \"apply\" seems to only work for create, not update.\n\n    const ary = jsyaml.loadAll(yaml); // will throw on invalid yaml, and return one or more documents (usually one)\n\n    if ( ary.length > 1 ) {\n      await this.$rootGetters['currentCluster'].doAction('apply', {\n        yaml,\n        defaultNamespace: this.metadata.namespace,\n      });\n    }\n\n    const parsed = ary[0];\n    */\n\n    const parsed = jsyaml.load(yaml); // will throw on invalid yaml, and return one or more documents (usually one)\n\n    if ( this.schema?.attributes?.namespaced && !parsed.metadata.namespace ) {\n      const err = this.$rootGetters['i18n/t']('resourceYaml.errors.namespaceRequired');\n\n      throw err;\n    }\n\n    let res;\n    const isCreate = !this.id;\n    const headers = {\n      'content-type': 'application/yaml',\n      accept:         'application/json',\n    };\n\n    if ( isCreate ) {\n      res = await this.schema.followLink('collection', {\n        method: 'POST',\n        headers,\n        data:   yaml\n      });\n    } else {\n      res = await this.followLink('update', {\n        method: 'PUT',\n        headers,\n        data:   yaml\n      });\n    }\n\n    await this.$dispatch(`load`, {\n      data:     res,\n      existing: (isCreate ? this : undefined)\n    });\n\n    if (this.isSpoofed) {\n      await this.$dispatch('cluster/findAll', { type: this.type, opt: { force: true } }, { root: true });\n    }\n  }\n\n  get modelValidationRules() {\n    const rules = [];\n\n    const customValidationRulesets = this?.customValidationRules\n      .filter((rule) => !!rule.validators || !!rule.required)\n      .map((rule) => {\n        const formRules = formRulesGenerator(this.t, { displayKey: rule?.translationKey ? this.t(rule.translationKey) : 'Value' });\n\n        return {\n          path:  rule.path,\n          rules: [\n            ...(rule.validators || []),\n            ...rule.required ? ['required'] : [],\n            ...['dnsLabel', 'dnsLabelRestricted', 'hostname'].includes(rule.type) ? [rule.type] : []\n          ]\n            .map((rule) => {\n              if (rule.includes(':')) {\n                const [ruleKey, ruleArg] = rule.split(':');\n\n                return formRules[ruleKey](ruleArg);\n              }\n\n              return formRules[rule];\n            }\n            )\n            .filter((rule) => !!rule)\n        };\n      })\n      .filter((ruleset) => ruleset.rules.length > 0);\n\n    rules.push(...customValidationRulesets);\n\n    return rules;\n  }\n\n  customValidationErrors(data, ignorePaths = []) {\n    const errors = [];\n\n    let { customValidationRules } = this;\n\n    if (!isEmpty(customValidationRules)) {\n      if (isFunction(customValidationRules)) {\n        customValidationRules = customValidationRules();\n      }\n\n      customValidationRules.filter((rule) => !ignorePaths.includes(rule.path)).forEach((rule) => {\n        const {\n          path,\n          requiredIf: requiredIfPath,\n          validators = [],\n          type: fieldType,\n        } = rule;\n        let pathValue = get(data, path);\n\n        const parsedRules = compact((validators || []));\n        let displayKey = path;\n\n        if (rule.translationKey && this.$rootGetters['i18n/exists'](rule.translationKey)) {\n          displayKey = this.t(rule.translationKey);\n        }\n\n        if (isString(pathValue)) {\n          pathValue = pathValue.trim();\n        }\n        if (requiredIfPath) {\n          const reqIfVal = get(data, requiredIfPath);\n\n          if (!isEmpty(reqIfVal) && (isEmpty(pathValue) && pathValue !== 0)) {\n            errors.push(this.t('validation.required', { key: displayKey }));\n          }\n        }\n\n        validateLength(pathValue, rule, displayKey, this.$rootGetters, errors);\n        validateChars(pathValue, rule, displayKey, this.$rootGetters, errors);\n\n        if ( !isEmpty(pathValue) && DNS_LIKE_TYPES.includes(fieldType) ) {\n          // DNS types should be lowercase\n          const tolower = (pathValue || '').toLowerCase();\n\n          if ( tolower !== pathValue ) {\n            pathValue = tolower;\n\n            Vue.set(data, path, pathValue);\n          }\n\n          errors.push(...validateDnsLikeTypes(pathValue, fieldType, displayKey, this.$rootGetters, errors));\n        }\n\n        parsedRules.forEach((validator) => {\n          const validatorAndArgs = validator.split(':');\n          const validatorName = validatorAndArgs.slice(0, 1);\n          const validatorArgs = validatorAndArgs.slice(1) || null;\n          const validatorExists = Object.prototype.hasOwnProperty.call(CustomValidators, validatorName);\n\n          if (!isEmpty(validatorName) && validatorExists) {\n            CustomValidators[validatorName](pathValue, this.$rootGetters, errors, validatorArgs, displayKey, data);\n          } else if (!isEmpty(validatorName) && !validatorExists) {\n            // Check if validator is imported from plugin\n            const pluginValidator = this.$rootState.$plugin?.getValidator(validatorName);\n\n            if (pluginValidator) {\n              pluginValidator(pathValue, this.$rootGetters, errors, validatorArgs, displayKey, data);\n            } else {\n              // eslint-disable-next-line\n              console.warn(this.t('validation.custom.missing', { validatorName }));\n            }\n          }\n        });\n      });\n    }\n\n    return errors;\n  }\n\n  /**\n   * Check this instance is valid against\n   * - any custom dashboard validation\n   *\n   * Models can override this and call super.validationErrors\n   */\n  validationErrors(data = this, opts = { }) {\n    return this.customValidationErrors(data);\n  }\n\n  get ownersByType() {\n    const ownerReferences = this.metadata?.ownerReferences || [];\n    const ownersByType = {};\n\n    ownerReferences.forEach((owner) => {\n      if (!ownersByType[owner.kind]) {\n        ownersByType[owner.kind] = [owner];\n      } else {\n        ownersByType[owner.kind].push(owner);\n      }\n    });\n\n    return ownersByType;\n  }\n\n  get owners() {\n    const owners = [];\n\n    for ( const kind in this.ownersByType) {\n      const schema = this.$rootGetters['cluster/schema'](kind);\n\n      if (schema) {\n        const type = schema.id;\n        const allOfResourceType = this.$rootGetters['cluster/all']( type );\n\n        this.ownersByType[kind].forEach((resource, idx) => {\n          const resourceInstance = allOfResourceType.find((resourceByType) => resourceByType?.metadata?.uid === resource.uid);\n\n          if (resourceInstance) {\n            owners.push(resourceInstance);\n          }\n        });\n      }\n    }\n\n    return owners;\n  }\n\n  get details() {\n    return this._details;\n  }\n\n  get _details() {\n    const details = [];\n\n    if (this.owners?.length > 0) {\n      details.push({\n        label:     this.t('resourceDetail.detailTop.ownerReferences', { count: this.owners.length }),\n        formatter: 'ListLinkDetail',\n        content:   this.owners.map((owner) => ({\n          key:   owner.id,\n          row:   owner,\n          col:   {},\n          value: owner.metadata.name\n        }))\n      });\n    }\n\n    if (get(this, 'metadata.deletionTimestamp')) {\n      details.push({\n        label:         this.t('resourceDetail.detailTop.deleted'),\n        formatter:     'LiveDate',\n        formatterOpts: { addSuffix: true },\n        content:       get(this, 'metadata.deletionTimestamp')\n      });\n    }\n\n    return details;\n  }\n\n  get t() {\n    return this.$rootGetters['i18n/t'];\n  }\n\n  // Returns array of MODELS that own this resource (async, network call)\n  findOwners() {\n    return this._getRelationship('owner', 'from');\n  }\n\n  // Returns array of {type, namespace, id} objects that own this resource (sync)\n  getOwners() {\n    return this._getRelationship('owner', 'from');\n  }\n\n  findOwned() {\n    return this._findRelationship('owner', 'to');\n  }\n\n  _relationshipsFor(rel, direction) {\n    const out = { selectors: [], ids: [] };\n\n    if ( !this.metadata?.relationships?.length ) {\n      return out;\n    }\n\n    for ( const r of this.metadata.relationships ) {\n      if ( rel !== 'any' && r.rel !== rel ) {\n        continue;\n      }\n\n      if ( !r[`${ direction }Type`] ) {\n        continue;\n      }\n\n      if ( r.selector ) {\n        addObjects(out.selectors, {\n          type:      r.toType,\n          namespace: r.toNamespace,\n          selector:  r.selector\n        });\n      } else {\n        const type = r[`${ direction }Type`];\n        let namespace = r[`${ direction }Namespace`];\n        let name = r[`${ direction }Id`];\n\n        if ( !namespace && name.includes('/') ) {\n          const idx = name.indexOf('/');\n\n          namespace = name.substr(0, idx);\n          name = name.substr(idx + 1);\n        }\n\n        const id = (namespace ? `${ namespace }/` : '') + name;\n\n        addObject(out.ids, {\n          type,\n          namespace,\n          name,\n          id,\n        });\n      }\n    }\n\n    return out;\n  }\n\n  _getRelationship(rel, direction) {\n    const res = this._relationshipsFor(rel, direction);\n\n    if ( res.selectors?.length ) {\n      // eslint-disable-next-line no-console\n      console.warn('Sync request for a relationship that is a selector');\n    }\n\n    return res.ids || [];\n  }\n\n  async _findRelationship(rel, direction) {\n    const { selectors, ids } = this._relationshipsFor(rel, direction);\n    const out = [];\n\n    for ( const sel of selectors ) {\n      const matching = await this.$dispatch('findMatching', sel);\n\n      addObjects(out, matching.data);\n    }\n\n    for ( const obj of ids ) {\n      const { type, id } = obj;\n      let matching = this.$getters['byId'](type, id);\n\n      if ( !matching ) {\n        try {\n          matching = await this.$dispatch('find', { type, id });\n        } catch {\n        }\n      }\n      if (matching) {\n        addObject(out, matching);\n      }\n    }\n\n    return out;\n  }\n\n  get shortId() {\n    const splitId = this.id.split('/');\n\n    return splitId.length > 1 ? splitId[1] : splitId[0];\n  }\n\n  toJSON() {\n    const out = {};\n    const keys = Object.keys(this);\n\n    for ( const k of keys ) {\n      if ( this[k]?.toJSON ) {\n        out[k] = this[k].toJSON();\n      } else {\n        out[k] = clone(this[k]);\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Allow models to override the object that is sent when saving this resource\n   */\n  toSave() {\n    return undefined;\n  }\n\n  get creationTimestamp() {\n    return this.metadata?.creationTimestamp;\n  }\n\n  /**\n   * Allows model to specify JSON Paths that should be folded in the YAML editor by default\n   */\n  get yamlFolding() {\n    return [];\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}