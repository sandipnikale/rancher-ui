{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/@rancher/shell/store/prefs.js","dependencies":[{"path":"/app/node_modules/@rancher/shell/store/prefs.js","mtime":1764054237091},{"path":"/app/pkg/rancher-support-ui/babel.config.js","mtime":1764051174054},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwppbXBvcnQgeyBNQU5BR0VNRU5ULCBTVEVWRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBjbG9uZSB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmNvbnN0IGRlZmluaXRpb25zID0ge307Ci8qKgogKiBLZXkvdmFsdWUgb2YgcHJlZnJlbmNlcyBhcmUgc3RvcmVkIGJlZm9yZSBsb2dpbiBoZXJlIGFuZCBjb29raWVzIGR1ZSBsYWNrIG9mIGFjY2VzcyBwZXJtaXNzaW9uLgogKiBPbmNlIHVzZXIgaXMgbG9nZ2VkIGluIHdoaWxlIHNldHRpbmcgYXNVc2VyUHJlZmVyZW5jZSwgdXBkYXRlIHN0b3JlZCBiZWZvcmUgbG9naW4gS2V5L3ZhbHVlIHRvIHRoZSBiYWNrZW5kIGluIGxvYWRTZXJ2ZXIgZnVuY3Rpb24uCiAqLwpsZXQgcHJlZnNCZWZvcmVMb2dpbiA9IHt9OwpleHBvcnQgY29uc3QgY3JlYXRlID0gZnVuY3Rpb24gKG5hbWUsIGRlZiwgb3B0ID0ge30pIHsKICBjb25zdCBwYXJzZUpTT04gPSBvcHQucGFyc2VKU09OID09PSB0cnVlOwogIGNvbnN0IGFzQ29va2llID0gb3B0LmFzQ29va2llID09PSB0cnVlOwogIGNvbnN0IGFzVXNlclByZWZlcmVuY2UgPSBvcHQuYXNVc2VyUHJlZmVyZW5jZSAhPT0gZmFsc2U7CiAgY29uc3Qgb3B0aW9ucyA9IG9wdC5vcHRpb25zOwogIGNvbnN0IGluaGVyaXRGcm9tID0gb3B0LmluaGVyaXRGcm9tOwogIGRlZmluaXRpb25zW25hbWVdID0gewogICAgZGVmLAogICAgb3B0aW9ucywKICAgIHBhcnNlSlNPTiwKICAgIGFzQ29va2llLAogICAgYXNVc2VyUHJlZmVyZW5jZSwKICAgIGluaGVyaXRGcm9tLAogICAgLy8gaWYgdmFsdWUgaXMgbm90IGRlZmluZWQgb24gc2VydmVyLCB3ZSBjYW4gZGVmYXVsdCBpdCB0byBhbm90aGVyIHByZWYKICAgIG1hbmdsZVJlYWQ6IG9wdC5tYW5nbGVSZWFkLAogICAgLy8gQWx0ZXIgdGhlIHZhbHVlIHJlYWQgZnJvbSB0aGUgQVBJICh0byBtYXRjaCBvbGQgUmFuY2hlciBleHBlY3RhdGlvbnMpCiAgICBtYW5nbGVXcml0ZTogb3B0Lm1hbmdsZVdyaXRlIC8vIEFsdGVyIHRoZSB2YWx1ZSB3cml0dGVuIGJhY2sgdG8gdGhlIEFQSSAoZGl0dG8pCiAgfTsKICByZXR1cm4gbmFtZTsKfTsKZXhwb3J0IGNvbnN0IG1hcFByZWYgPSBmdW5jdGlvbiAobmFtZSkgewogIHJldHVybiB7CiAgICBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcmVmcy9nZXQnXShuYW1lKTsKICAgIH0sCiAgICBzZXQodmFsdWUpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3ByZWZzL3NldCcsIHsKICAgICAgICBrZXk6IG5hbWUsCiAgICAgICAgdmFsdWUKICAgICAgfSk7CiAgICB9CiAgfTsKfTsKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnN0IHBhcnNlSlNPTiA9IHRydWU7IC8vIFNob3J0Y3V0IGZvciBzZXR0aW5nIGl0IGJlbG93CmNvbnN0IGFzQ29va2llID0gdHJ1ZTsgLy8gU3RvcmUgYXMgYSBjb29raWUgc28gdGhhdCBpdCdzIGF2YWlsYWJsZSBiZWZvcmUgYXV0aCArIG9uIHNlcnZlci1zaWRlCgovLyBLZXlzIG11c3QgYmUgbG93ZXJjYXNlIGFuZCB2YWxpZCBkbnMgbGFiZWwgKGEteiAwLTkgLSkKZXhwb3J0IGNvbnN0IENMVVNURVIgPSBjcmVhdGUoJ2NsdXN0ZXInLCAnJyk7CmV4cG9ydCBjb25zdCBMQVNUX05BTUVTUEFDRSA9IGNyZWF0ZSgnbGFzdC1uYW1lc3BhY2UnLCAnJyk7CmV4cG9ydCBjb25zdCBOQU1FU1BBQ0VfRklMVEVSUyA9IGNyZWF0ZSgnbnMtYnktY2x1c3RlcicsIHt9LCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgV09SS1NQQUNFID0gY3JlYXRlKCd3b3Jrc3BhY2UnLCAnJyk7CmV4cG9ydCBjb25zdCBFWFBBTkRFRF9HUk9VUFMgPSBjcmVhdGUoJ29wZW4tZ3JvdXBzJywgWydjbHVzdGVyJywgJ3BvbGljeScsICdyYmFjJywgJ3NlcnZpY2VEaXNjb3ZlcnknLCAnc3RvcmFnZScsICd3b3JrbG9hZCddLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgRkFWT1JJVEVfVFlQRVMgPSBjcmVhdGUoJ2Zhdi10eXBlJywgW10sIHsKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBQSU5ORURfQ0xVU1RFUlMgPSBjcmVhdGUoJ3Bpbm5lZC1jbHVzdGVycycsIFtdLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgR1JPVVBfUkVTT1VSQ0VTID0gY3JlYXRlKCdncm91cC1ieScsICduYW1lc3BhY2UnKTsKZXhwb3J0IGNvbnN0IERJRkYgPSBjcmVhdGUoJ2RpZmYnLCAndW5pZmllZCcsIHsKICBvcHRpb25zOiBbJ3VuaWZpZWQnLCAnc3BsaXQnXQp9KTsKZXhwb3J0IGNvbnN0IFRIRU1FID0gY3JlYXRlKCd0aGVtZScsICdhdXRvJywgewogIG9wdGlvbnM6IFsnbGlnaHQnLCAnYXV0bycsICdkYXJrJ10sCiAgYXNDb29raWUsCiAgcGFyc2VKU09OLAogIG1hbmdsZVJlYWQ6IHggPT4geC5yZXBsYWNlKC9edWktLywgJycpLAogIG1hbmdsZVdyaXRlOiB4ID0+IGB1aS0ke3h9YAp9KTsKZXhwb3J0IGNvbnN0IFBSRUZFUlNfU0NIRU1FID0gY3JlYXRlKCdwY3MnLCAnJywgewogIGFzQ29va2llLAogIGFzVXNlclByZWZlcmVuY2U6IGZhbHNlCn0pOwpleHBvcnQgY29uc3QgTE9DQUxFID0gY3JlYXRlKCdsb2NhbGUnLCAnZW4tdXMnLCB7CiAgYXNDb29raWUKfSk7CmV4cG9ydCBjb25zdCBLRVlNQVAgPSBjcmVhdGUoJ2tleW1hcCcsICdzdWJsaW1lJywgewogIG9wdGlvbnM6IFsnc3VibGltZScsICdlbWFjcycsICd2aW0nXQp9KTsKZXhwb3J0IGNvbnN0IFJPV1NfUEVSX1BBR0UgPSBjcmVhdGUoJ3Blci1wYWdlJywgMTAwLCB7CiAgb3B0aW9uczogWzEwLCAyNSwgNTAsIDEwMF0sCiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgTE9HU19XUkFQID0gY3JlYXRlKCdsb2dzLXdyYXAnLCB0cnVlLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgTE9HU19USU1FID0gY3JlYXRlKCdsb2dzLXRpbWUnLCB0cnVlLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgTE9HU19SQU5HRSA9IGNyZWF0ZSgnbG9ncy1yYW5nZScsICczMCBtaW51dGVzJywgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IEhJREVfUkVQT1MgPSBjcmVhdGUoJ2hpZGUtcmVwb3MnLCBbXSwgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IEhJREVfREVTQyA9IGNyZWF0ZSgnaGlkZS1kZXNjJywgW10sIHsKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBISURFX1NFTlNJVElWRSA9IGNyZWF0ZSgnaGlkZS1zZW5zaXRpdmUnLCB0cnVlLCB7CiAgb3B0aW9uczogW3RydWUsIGZhbHNlXSwKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBTSE9XX1BSRV9SRUxFQVNFID0gY3JlYXRlKCdzaG93LXByZS1yZWxlYXNlJywgZmFsc2UsIHsKICBvcHRpb25zOiBbZmFsc2UsIHRydWVdLAogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IFNIT1dfQ0hBUlRfTU9ERSA9IGNyZWF0ZSgnY2hhcnQtbW9kZScsICdmZWF0dXJlZCcsIHsKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBEQVRFX0ZPUk1BVCA9IGNyZWF0ZSgnZGF0ZS1mb3JtYXQnLCAnZGRkLCBNTU0gRCBZWVlZJywgewogIG9wdGlvbnM6IFsnZGRkLCBNTU0gRCBZWVlZJywgJ2RkZCwgRCBNTU0gWVlZWScsICdEL00vWVlZWScsICdNL0QvWVlZWScsICdZWVlZLU1NLUREJ10KfSk7CmV4cG9ydCBjb25zdCBUSU1FX0ZPUk1BVCA9IGNyZWF0ZSgndGltZS1mb3JtYXQnLCAnaDptbTpzcyBhJywgewogIG9wdGlvbnM6IFsnaDptbTpzcyBhJywgJ0hIOm1tOnNzJ10KfSk7CmV4cG9ydCBjb25zdCBUSU1FX1pPTkUgPSBjcmVhdGUoJ3RpbWUtem9uZScsICdsb2NhbCcpOwovLyBERVYgd2lsbCBiZSBkZXByZWNhdGVkIG9uIHYyLjcuMCwgYnV0IGlzIG5lZWRlZCBzbyB0aGF0IHdlIGNhbiBncmFiIHRoZSB2YWx1ZSBmb3IgdGhlIG5ldyBzZXR0aW5ncyB0aGF0IGRlcml2ZWQgZnJvbSBpdAovLyBzdWNoIGFzOiBWSUVXX0lOX0FQSSwgQUxMX05BTUVTUEFDRVMsIFRIRU1FX1NIT1JUQ1VUCmV4cG9ydCBjb25zdCBERVYgPSBjcmVhdGUoJ2RldicsIGZhbHNlLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgVklFV19JTl9BUEkgPSBjcmVhdGUoJ3ZpZXctaW4tYXBpJywgZmFsc2UsIHsKICBwYXJzZUpTT04sCiAgaW5oZXJpdEZyb206IERFVgp9KTsKZXhwb3J0IGNvbnN0IEFMTF9OQU1FU1BBQ0VTID0gY3JlYXRlKCdhbGwtbmFtZXNwYWNlcycsIGZhbHNlLCB7CiAgcGFyc2VKU09OLAogIGluaGVyaXRGcm9tOiBERVYKfSk7CmV4cG9ydCBjb25zdCBUSEVNRV9TSE9SVENVVCA9IGNyZWF0ZSgndGhlbWUtc2hvcnRjdXQnLCBmYWxzZSwgewogIHBhcnNlSlNPTiwKICBpbmhlcml0RnJvbTogREVWCn0pOwpleHBvcnQgY29uc3QgTEFTVF9WSVNJVEVEID0gY3JlYXRlKCdsYXN0LXZpc2l0ZWQnLCAnaG9tZScsIHsKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBTRUVOX1dIQVRTX05FVyA9IGNyZWF0ZSgnc2Vlbi13aGF0c25ldycsICcnLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgUkVBRF9XSEFUU19ORVcgPSBjcmVhdGUoJ3JlYWQtd2hhdHNuZXcnLCAnJywgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IEFGVEVSX0xPR0lOX1JPVVRFID0gY3JlYXRlKCdhZnRlci1sb2dpbi1yb3V0ZScsICdob21lJywgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IEhJREVfSE9NRV9QQUdFX0NBUkRTID0gY3JlYXRlKCdob21lLXBhZ2UtY2FyZHMnLCB7fSwgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IFBMVUdJTl9ERVZFTE9QRVIgPSBjcmVhdGUoJ3BsdWdpbi1kZXZlbG9wZXInLCBmYWxzZSwgewogIHBhcnNlSlNPTiwKICBpbmhlcml0RnJvbTogREVWCn0pOyAvLyBJcyB0aGUgdXNlciBhIHBsdWdpbiBkZXZlbG9wZXI/CgpleHBvcnQgY29uc3QgX1JLRTEgPSAncmtlMSc7CmV4cG9ydCBjb25zdCBfUktFMiA9ICdya2UyJzsKZXhwb3J0IGNvbnN0IFBST1ZJU0lPTkVSID0gY3JlYXRlKCdwcm92aXNpb25lcicsIF9SS0UyLCB7CiAgb3B0aW9uczogW19SS0UxLCBfUktFMl0KfSk7CgovLyBNYXhpbXVtIG51bWJlciBvZiBjbHVzdGVycyB0byBzaG93IGluIHRoZSBzbGlkZS1pbiBtZW51CmV4cG9ydCBjb25zdCBNRU5VX01BWF9DTFVTVEVSUyA9IDEwOwovLyBQcm9tcHQgZm9yIGNvbmZpcm0gd2hlbiBzY2FsaW5nIGRvd24gbm9kZSBwb29sIGluIEdVSSBhbmQgc2F2ZSB0aGUgcHJlZgpleHBvcnQgY29uc3QgU0NBTEVfUE9PTF9QUk9NUFQgPSBjcmVhdGUoJ3NjYWxlLXBvb2wtcHJvbXB0JywgbnVsbCwgewogIHBhcnNlSlNPTgp9KTsKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmNvbnN0IGNvb2tpZVByZWZpeCA9ICdSXyc7CmNvbnN0IGNvb2tpZU9wdGlvbnMgPSB7CiAgbWF4QWdlOiAzNjUgKiA4NjQwMCwKICBwYXRoOiAnLycsCiAgc2FtZVNpdGU6IHRydWUsCiAgc2VjdXJlOiB0cnVlCn07CmV4cG9ydCBjb25zdCBzdGF0ZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gewogICAgY29va2llc0xvYWRlZDogZmFsc2UsCiAgICBkYXRhOiB7fSwKICAgIGRlZmluaXRpb25zCiAgfTsKfTsKZXhwb3J0IGNvbnN0IGdldHRlcnMgPSB7CiAgZ2V0OiBzdGF0ZSA9PiBrZXkgPT4gewogICAgY29uc3QgZGVmaW5pdGlvbiA9IHN0YXRlLmRlZmluaXRpb25zW2tleV07CiAgICBpZiAoIWRlZmluaXRpb24pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHByZWZlcmVuY2U6ICR7a2V5fWApOwogICAgfQogICAgY29uc3QgdXNlciA9IHN0YXRlLmRhdGFba2V5XTsKICAgIGlmICh1c2VyICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIGNsb25lKHVzZXIpOwogICAgfQogICAgY29uc3QgZGVmID0gY2xvbmUoZGVmaW5pdGlvbi5kZWYpOwogICAgcmV0dXJuIGRlZjsKICB9LAogIGRlZmF1bHRWYWx1ZTogc3RhdGUgPT4ga2V5ID0+IHsKICAgIGNvbnN0IGRlZmluaXRpb24gPSBzdGF0ZS5kZWZpbml0aW9uc1trZXldOwogICAgaWYgKCFkZWZpbml0aW9uKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwcmVmZXJlbmNlOiAke2tleX1gKTsKICAgIH0KICAgIHJldHVybiBjbG9uZShkZWZpbml0aW9uLmRlZik7CiAgfSwKICBvcHRpb25zOiBzdGF0ZSA9PiBrZXkgPT4gewogICAgY29uc3QgZGVmaW5pdGlvbiA9IHN0YXRlLmRlZmluaXRpb25zW2tleV07CiAgICBpZiAoIWRlZmluaXRpb24pIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHByZWZlcmVuY2U6ICR7a2V5fWApOwogICAgfQogICAgaWYgKCFkZWZpbml0aW9uLm9wdGlvbnMpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBQcmVmZXJlbmNlIGRvZXMgbm90IGhhdmUgb3B0aW9uczogJHtrZXl9YCk7CiAgICB9CiAgICByZXR1cm4gZGVmaW5pdGlvbi5vcHRpb25zLnNsaWNlKCk7CiAgfSwKICB0aGVtZTogKHN0YXRlLCBnZXR0ZXJzLCByb290U3RhdGUsIHJvb3RHZXR0ZXJzKSA9PiB7CiAgICBjb25zdCBzZXR0aW5nID0gcm9vdEdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKE1BTkFHRU1FTlQuU0VUVElORywgU0VUVElORy5USEVNRSk7CiAgICBpZiAoc2V0dGluZyAhPT0gbnVsbCAmJiBzZXR0aW5nICE9PSB2b2lkIDAgJiYgc2V0dGluZy52YWx1ZSkgewogICAgICByZXR1cm4gc2V0dGluZyA9PT0gbnVsbCB8fCBzZXR0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZXR0aW5nLnZhbHVlOwogICAgfQogICAgbGV0IHRoZW1lID0gZ2V0dGVyc1snZ2V0J10oVEhFTUUpOwogICAgY29uc3QgcGNzID0gZ2V0dGVyc1snZ2V0J10oUFJFRkVSU19TQ0hFTUUpOwoKICAgIC8vIGNvbnNvbGUubG9nKCdHZXQgVGhlbWUnLCB0aGVtZSwgcGNzKTsKCiAgICAvLyBFbWJlciBVSSB1c2VzIHRoaXMgcHJlZml4CiAgICBpZiAodGhlbWUuc3RhcnRzV2l0aCgndWktJykpIHsKICAgICAgdGhlbWUgPSB0aGVtZS5zdWJzdHIoMyk7CiAgICB9CiAgICBpZiAodGhlbWUgPT09ICdhdXRvJykgewogICAgICBpZiAocGNzID09PSAnbGlnaHQnIHx8IHBjcyA9PT0gJ2RhcmsnKSB7CiAgICAgICAgcmV0dXJuIHBjczsKICAgICAgfQogICAgICByZXR1cm4gJ2RhcmsnOwogICAgfQogICAgcmV0dXJuIHRoZW1lOwogIH0sCiAgYWZ0ZXJMb2dpblJvdXRlOiAoc3RhdGUsIGdldHRlcnMpID0+IHsKICAgIGNvbnN0IGFmdGVyTG9naW5Sb3V0ZVByZWYgPSBnZXR0ZXJzWydnZXQnXShBRlRFUl9MT0dJTl9ST1VURSk7CiAgICBpZiAodHlwZW9mIGFmdGVyTG9naW5Sb3V0ZVByZWYgIT09ICdzdHJpbmcnKSB7CiAgICAgIHJldHVybiBhZnRlckxvZ2luUm91dGVQcmVmOwogICAgfQogICAgc3dpdGNoICh0cnVlKSB7CiAgICAgIGNhc2UgYWZ0ZXJMb2dpblJvdXRlUHJlZiA9PT0gJ2hvbWUnOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBuYW1lOiAnaG9tZScKICAgICAgICB9OwogICAgICBjYXNlIGFmdGVyTG9naW5Sb3V0ZVByZWYgPT09ICdsYXN0LXZpc2l0ZWQnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IGxhc3RWaXNpdGVkUHJlZiA9IGdldHRlcnNbJ2dldCddKExBU1RfVklTSVRFRCk7CiAgICAgICAgICBpZiAobGFzdFZpc2l0ZWRQcmVmKSB7CiAgICAgICAgICAgIHJldHVybiBsYXN0VmlzaXRlZFByZWY7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBjbHVzdGVyUHJlZiA9IGdldHRlcnNbJ2dldCddKENMVVNURVIpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbmFtZTogJ2MtY2x1c3Rlci1leHBsb3JlcicsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHByb2R1Y3Q6ICdleHBsb3JlcicsCiAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3RlclByZWYKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIGNhc2UgISFhZnRlckxvZ2luUm91dGVQcmVmLm1hdGNoKC8uKy1kYXNoYm9hcmQkLyk6CiAgICAgICAgewogICAgICAgICAgY29uc3QgY2x1c3RlcklkID0gYWZ0ZXJMb2dpblJvdXRlUHJlZi5zcGxpdCgnLWRhc2hib2FyZCcpWzBdOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbmFtZTogJ2MtY2x1c3Rlci1leHBsb3JlcicsCiAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgIHByb2R1Y3Q6ICdleHBsb3JlcicsCiAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3RlcklkCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiB7CiAgICAgICAgICBuYW1lOiBhZnRlckxvZ2luUm91dGVQcmVmCiAgICAgICAgfTsKICAgIH0KICB9Cn07CmV4cG9ydCBjb25zdCBtdXRhdGlvbnMgPSB7CiAgbG9hZChzdGF0ZSwgewogICAga2V5LAogICAgdmFsdWUKICB9KSB7CiAgICBWdWUuc2V0KHN0YXRlLmRhdGEsIGtleSwgdmFsdWUpOwogIH0sCiAgY29va2llc0xvYWRlZChzdGF0ZSkgewogICAgc3RhdGUuY29va2llc0xvYWRlZCA9IHRydWU7CiAgfSwKICByZXNldChzdGF0ZSkgewogICAgZm9yIChjb25zdCBrZXkgaW4gc3RhdGUuZGVmaW5pdGlvbnMpIHsKICAgICAgdmFyIF9zdGF0ZSRkZWZpbml0aW9ucyRrZTsKICAgICAgaWYgKChfc3RhdGUkZGVmaW5pdGlvbnMka2UgPSBzdGF0ZS5kZWZpbml0aW9uc1trZXldKSAhPT0gbnVsbCAmJiBfc3RhdGUkZGVmaW5pdGlvbnMka2UgIT09IHZvaWQgMCAmJiBfc3RhdGUkZGVmaW5pdGlvbnMka2UuYXNDb29raWUpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBkZWxldGUgc3RhdGUuZGF0YVtrZXldOwogICAgfQogIH0sCiAgc2V0RGVmaW5pdGlvbihzdGF0ZSwgewogICAgbmFtZSwKICAgIGRlZmluaXRpb24gPSB7fQogIH0pIHsKICAgIHN0YXRlLmRlZmluaXRpb25zW25hbWVdID0gZGVmaW5pdGlvbjsKICB9Cn07CmV4cG9ydCBjb25zdCBhY3Rpb25zID0gewogIGFzeW5jIHNldCh7CiAgICBkaXNwYXRjaCwKICAgIGNvbW1pdCwKICAgIHJvb3RHZXR0ZXJzLAogICAgc3RhdGUKICB9LCBvcHQpIHsKICAgIGxldCB7CiAgICAgIGtleSwKICAgICAgdmFsdWUKICAgIH0gPSBvcHQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJlZmVyLWNvbnN0CiAgICBjb25zdCBkZWZpbml0aW9uID0gc3RhdGUuZGVmaW5pdGlvbnNba2V5XTsKICAgIGxldCBzZXJ2ZXI7CiAgICBpZiAob3B0LnZhbCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZSB2YWx1ZSwgbm90IHZhbCcpOwogICAgfQogICAgY29tbWl0KCdsb2FkJywgewogICAgICBrZXksCiAgICAgIHZhbHVlCiAgICB9KTsKICAgIGlmIChkZWZpbml0aW9uLmFzQ29va2llKSB7CiAgICAgIGNvbnN0IG9wdCA9IHsKICAgICAgICAuLi5jb29raWVPcHRpb25zLAogICAgICAgIHBhcnNlSlNPTjogZGVmaW5pdGlvbi5wYXJzZUpTT04gPT09IHRydWUKICAgICAgfTsKICAgICAgdGhpcy4kY29va2llcy5zZXQoYCR7Y29va2llUHJlZml4fSR7a2V5fWAudG9VcHBlckNhc2UoKSwgdmFsdWUsIG9wdCk7CiAgICB9CiAgICBpZiAoZGVmaW5pdGlvbi5hc1VzZXJQcmVmZXJlbmNlKSB7CiAgICAgIGNvbnN0IGNoZWNrTG9naW4gPSByb290R2V0dGVyc1snYXV0aC9sb2dnZWRJbiddOwoKICAgICAgLy8gQ2hlY2sgZm9yIGxvZ2luIHN0YXR1cwogICAgICBpZiAoIWNoZWNrTG9naW4pIHsKICAgICAgICBwcmVmc0JlZm9yZUxvZ2luW2tleV0gPSB2YWx1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICB2YXIgX3NlcnZlcjsKICAgICAgICBzZXJ2ZXIgPSBhd2FpdCBkaXNwYXRjaCgnbG9hZFNlcnZlcicsIGtleSk7IC8vIFRoZXJlJ3Mgbm8gd2F0Y2ggb24gcHJlZnMsIHNvIGdldCBiZWZvcmUgc2V0Li4uCgogICAgICAgIGlmICgoX3NlcnZlciA9IHNlcnZlcikgIT09IG51bGwgJiYgX3NlcnZlciAhPT0gdm9pZCAwICYmIF9zZXJ2ZXIuZGF0YSkgewogICAgICAgICAgaWYgKGRlZmluaXRpb24ubWFuZ2xlV3JpdGUpIHsKICAgICAgICAgICAgdmFsdWUgPSBkZWZpbml0aW9uLm1hbmdsZVdyaXRlKHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChkZWZpbml0aW9uLnBhcnNlSlNPTikgewogICAgICAgICAgICBWdWUuc2V0KHNlcnZlci5kYXRhLCBrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBWdWUuc2V0KHNlcnZlci5kYXRhLCBrZXksIHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGF3YWl0IHNlcnZlci5zYXZlKHsKICAgICAgICAgICAgcmVkaXJlY3RVbmF1dGhvcml6ZWQ6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyBXZWxsIGl0IGZhaWxlZCwgYnV0IG5vdCBtdWNoIHRvIGRvIGFib3V0IGl0Li4uCgogICAgICAgIC8vIFJldHVybiB0aGUgZXJyb3IKICAgICAgICByZXR1cm4gewogICAgICAgICAgdHlwZTogZS50eXBlLAogICAgICAgICAgc3RhdHVzOiBlLnN0YXR1cwogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LAogIGFzeW5jIHNldFRoZW1lKHsKICAgIGRpc3BhdGNoCiAgfSwgdmFsKSB7CiAgICBhd2FpdCBkaXNwYXRjaCgnc2V0JywgewogICAgICBrZXk6IFRIRU1FLAogICAgICB2YWx1ZTogdmFsCiAgICB9KTsKICB9LAogIGxvYWRDb29raWVzKHsKICAgIHN0YXRlLAogICAgY29tbWl0CiAgfSkgewogICAgaWYgKHN0YXRlLmNvb2tpZXNMb2FkZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZm9yIChjb25zdCBrZXkgaW4gc3RhdGUuZGVmaW5pdGlvbnMpIHsKICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHN0YXRlLmRlZmluaXRpb25zW2tleV07CiAgICAgIGlmICghZGVmaW5pdGlvbi5hc0Nvb2tpZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGNvbnN0IG9wdCA9IHsKICAgICAgICBwYXJzZUpTT046IGRlZmluaXRpb24ucGFyc2VKU09OID09PSB0cnVlCiAgICAgIH07CiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy4kY29va2llcy5nZXQoYCR7Y29va2llUHJlZml4fSR7a2V5fWAudG9VcHBlckNhc2UoKSwgb3B0KTsKICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjb21taXQoJ2xvYWQnLCB7CiAgICAgICAgICBrZXksCiAgICAgICAgICB2YWx1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICBjb21taXQoJ2Nvb2tpZXNMb2FkZWQnKTsKICB9LAogIGxvYWRUaGVtZSh7CiAgICBkaXNwYXRjaAogIH0pIHsKICAgIGNvbnN0IHdhdGNoRGFyayA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJyk7CiAgICBjb25zdCB3YXRjaExpZ2h0ID0gd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogbGlnaHQpJyk7CiAgICBjb25zdCB3YXRjaE5vbmUgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBuby1wcmVmZXJlbmNlKScpOwogICAgY29uc3QgaW50ZXJ2YWwgPSAzMCAqIDYwICogMTAwMDsKICAgIGNvbnN0IG5leHRIYWxmSG91ciA9IGludGVydmFsIC0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSkgJSBpbnRlcnZhbDsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICBkaXNwYXRjaCgnbG9hZFRoZW1lJyk7CiAgICB9LCBuZXh0SGFsZkhvdXIpOwogICAgLy8gY29uc29sZS5sb2coJ1VwZGF0ZSB0aGVtZSBpbicsIG5leHRIYWxmSG91ciwgJ21zJyk7CgogICAgaWYgKHdhdGNoRGFyay5tYXRjaGVzKSB7CiAgICAgIGNoYW5nZWQoJ2RhcmsnKTsKICAgIH0gZWxzZSBpZiAod2F0Y2hMaWdodC5tYXRjaGVzKSB7CiAgICAgIGNoYW5nZWQoJ2xpZ2h0Jyk7CiAgICB9IGVsc2UgewogICAgICBjaGFuZ2VkKGZyb21DbG9jaygpKTsKICAgIH0KICAgIHdhdGNoRGFyay5hZGRMaXN0ZW5lcihlID0+IHsKICAgICAgaWYgKGUubWF0Y2hlcykgewogICAgICAgIGNoYW5nZWQoJ2RhcmsnKTsKICAgICAgfQogICAgfSk7CiAgICB3YXRjaExpZ2h0LmFkZExpc3RlbmVyKGUgPT4gewogICAgICBpZiAoZS5tYXRjaGVzKSB7CiAgICAgICAgY2hhbmdlZCgnbGlnaHQnKTsKICAgICAgfQogICAgfSk7CiAgICB3YXRjaE5vbmUuYWRkTGlzdGVuZXIoZSA9PiB7CiAgICAgIGlmIChlLm1hdGNoZXMpIHsKICAgICAgICBjaGFuZ2VkKGZyb21DbG9jaygpKTsKICAgICAgfQogICAgfSk7CiAgICBmdW5jdGlvbiBjaGFuZ2VkKHZhbHVlKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdQcmVmZXJzIFRoZW1lOicsIHZhbHVlKTsKICAgICAgZGlzcGF0Y2goJ3NldCcsIHsKICAgICAgICBrZXk6IFBSRUZFUlNfU0NIRU1FLAogICAgICAgIHZhbHVlCiAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gZnJvbUNsb2NrKCkgewogICAgICBjb25zdCBob3VyID0gbmV3IERhdGUoKS5nZXRIb3VycygpOwogICAgICBpZiAoaG91ciA8IDcgfHwgaG91ciA+PSAxOCkgewogICAgICAgIHJldHVybiAnZGFyayc7CiAgICAgIH0KICAgICAgcmV0dXJuICdsaWdodCc7CiAgICB9CiAgfSwKICBhc3luYyBsb2FkU2VydmVyKHsKICAgIHN0YXRlLAogICAgZGlzcGF0Y2gsCiAgICBjb21taXQsCiAgICByb290U3RhdGUsCiAgICByb290R2V0dGVycwogIH0sIGlnbm9yZUtleSkgewogICAgdmFyIF9zZXJ2ZXIyOwogICAgbGV0IHNlcnZlciA9IHsKICAgICAgZGF0YToge30KICAgIH07CiAgICB0cnkgewogICAgICBjb25zdCBhbGwgPSBhd2FpdCBkaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgIHR5cGU6IFNURVZFLlBSRUZFUkVOQ0UsCiAgICAgICAgb3B0OiB7CiAgICAgICAgICB1cmw6ICd1c2VycHJlZmVyZW5jZXMnLAogICAgICAgICAgZm9yY2U6IHRydWUsCiAgICAgICAgICB3YXRjaDogZmFsc2UsCiAgICAgICAgICByZWRpcmVjdFVuYXV0aG9yaXplZDogZmFsc2UsCiAgICAgICAgICBzdHJlYW06IGZhbHNlCiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgICAgc2VydmVyID0gYWxsID09PSBudWxsIHx8IGFsbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWxsWzBdOwogICAgfSBjYXRjaCAoZSkgewogICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHByZWZlcmVuY2VzJywgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKCEoKF9zZXJ2ZXIyID0gc2VydmVyKSAhPT0gbnVsbCAmJiBfc2VydmVyMiAhPT0gdm9pZCAwICYmIF9zZXJ2ZXIyLmRhdGEpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBpZiBwcmVmc0JlZm9yZUxvZ2luIGhhcyB2YWx1ZXMgZnJvbSBsb2dpbiBwYWdlLCB1cGRhdGUgdGhlIGJhY2tlbmQKICAgIGlmIChPYmplY3Qua2V5cyhwcmVmc0JlZm9yZUxvZ2luKS5sZW5ndGggPiAwKSB7CiAgICAgIE9iamVjdC5rZXlzKHByZWZzQmVmb3JlTG9naW4pLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBzZXJ2ZXIuZGF0YVtrZXldID0gcHJlZnNCZWZvcmVMb2dpbltrZXldOwogICAgICB9KTsKICAgICAgYXdhaXQgc2VydmVyLnNhdmUoewogICAgICAgIHJlZGlyZWN0VW5hdXRob3JpemVkOiBmYWxzZQogICAgICB9KTsKCiAgICAgIC8vIENsZWFyIHByZWZzQmVmb3JlTG9naW4sIGFzIHdlIGhhdmUgbm93IHNhdmVkIHRoZXNlcwogICAgICBwcmVmc0JlZm9yZUxvZ2luID0ge307CiAgICB9CiAgICBmb3IgKGNvbnN0IGtleSBpbiBzdGF0ZS5kZWZpbml0aW9ucykgewogICAgICBjb25zdCBkZWZpbml0aW9uID0gc3RhdGUuZGVmaW5pdGlvbnNba2V5XTsKICAgICAgbGV0IHZhbHVlID0gY2xvbmUoc2VydmVyLmRhdGFba2V5XSk7CiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGRlZmluaXRpb24uaW5oZXJpdEZyb20pIHsKICAgICAgICB2YWx1ZSA9IGNsb25lKHNlcnZlci5kYXRhW2RlZmluaXRpb24uaW5oZXJpdEZyb21dKTsKICAgICAgfQogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCBrZXkgPT09IGlnbm9yZUtleSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmIChkZWZpbml0aW9uLnBhcnNlSlNPTikgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YWx1ZSA9IEpTT04ucGFyc2UodmFsdWUpOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBzZXJ2ZXIgcHJlZicsIGtleSwgdmFsdWUsIGVycik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChkZWZpbml0aW9uLm1hbmdsZVJlYWQpIHsKICAgICAgICB2YWx1ZSA9IGRlZmluaXRpb24ubWFuZ2xlUmVhZCh2YWx1ZSk7CiAgICAgIH0KICAgICAgY29tbWl0KCdsb2FkJywgewogICAgICAgIGtleSwKICAgICAgICB2YWx1ZQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBzZXJ2ZXI7CiAgfSwKICBzZXRMYXN0VmlzaXRlZCh7CiAgICBzdGF0ZSwKICAgIGRpc3BhdGNoLAogICAgZ2V0dGVycwogIH0sIHJvdXRlKSB7CiAgICBpZiAoIXJvdXRlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBPbmx5IHNhdmUgdGhlIGxhc3QgdmlzaXRlZCBwYWdlIGlmIHRoZSB1c2VyIGhhcyB0aGF0IHNldCBhcyB0aGUgbG9naW4gcm91dGUgcHJlZmVyZW5jZQogICAgY29uc3QgYWZ0ZXJMb2dpblJvdXRlUHJlZiA9IGdldHRlcnNbJ2dldCddKEFGVEVSX0xPR0lOX1JPVVRFKTsKICAgIGNvbnN0IGRvTm90VHJhY2tMYXN0VmlzaXRlZCA9IHR5cGVvZiBhZnRlckxvZ2luUm91dGVQcmVmICE9PSAnc3RyaW5nJyB8fCBhZnRlckxvZ2luUm91dGVQcmVmICE9PSAnbGFzdC12aXNpdGVkJzsKICAgIGlmIChkb05vdFRyYWNrTGFzdFZpc2l0ZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgdG9TYXZlID0gZ2V0TG9naW5Sb3V0ZShyb3V0ZSk7CiAgICByZXR1cm4gZGlzcGF0Y2goJ3NldCcsIHsKICAgICAga2V5OiBMQVNUX1ZJU0lURUQsCiAgICAgIHZhbHVlOiB0b1NhdmUKICAgIH0pOwogIH0sCiAgdG9nZ2xlVGhlbWUoewogICAgZ2V0dGVycywKICAgIGRpc3BhdGNoCiAgfSkgewogICAgY29uc3QgdmFsdWUgPSBnZXR0ZXJzW1RIRU1FXSA9PT0gJ2xpZ2h0JyA/ICdkYXJrJyA6ICdsaWdodCc7CiAgICByZXR1cm4gZGlzcGF0Y2goJ3NldCcsIHsKICAgICAga2V5OiBUSEVNRSwKICAgICAgdmFsdWUKICAgIH0pOwogIH0sCiAgc2V0QnJhbmRTdHlsZSh7CiAgICByb290U3RhdGUsCiAgICByb290R2V0dGVycwogIH0sIGRhcmsgPSBmYWxzZSkgewogICAgaWYgKHJvb3RTdGF0ZS5tYW5hZ2VtZW50UmVhZHkpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBicmFuZFNldHRpbmcgPSByb290R2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5TRVRUSU5HLCBTRVRUSU5HLkJSQU5EKTsKICAgICAgICBpZiAoYnJhbmRTZXR0aW5nICYmIGJyYW5kU2V0dGluZy52YWx1ZSAmJiBicmFuZFNldHRpbmcudmFsdWUgIT09ICcnKSB7CiAgICAgICAgICBjb25zdCBicmFuZCA9IGJyYW5kU2V0dGluZy52YWx1ZTsKICAgICAgICAgIGNvbnN0IGJyYW5kTWV0YSA9IHJlcXVpcmUoYH5zaGVsbC9hc3NldHMvYnJhbmQvJHticmFuZH0vbWV0YWRhdGEuanNvbmApOwogICAgICAgICAgY29uc3QgaGFzU3R5bGVzaGVldCA9IGJyYW5kTWV0YS5oYXNTdHlsZXNoZWV0ID09PSAndHJ1ZSc7CiAgICAgICAgICBpZiAoaGFzU3R5bGVzaGVldCkgewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoYnJhbmQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gVE9ETyBvcHRpb24gYXBwbHkgY29sb3IgYXQgcnVudGltZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCB7fQogICAgfQogIH0KfTsKZnVuY3Rpb24gZ2V0TG9naW5Sb3V0ZShyb3V0ZSkgewogIHZhciBfcm91dGUkbmFtZTsKICBsZXQgcGFydHMgPSAoKF9yb3V0ZSRuYW1lID0gcm91dGUubmFtZSkgPT09IG51bGwgfHwgX3JvdXRlJG5hbWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb3V0ZSRuYW1lLnNwbGl0KCctJykpIHx8IFtdOwogIGNvbnN0IHBhcmFtcyA9IHt9OwogIGNvbnN0IHJvdXRlUGFyYW1zID0gcm91dGUucGFyYW1zIHx8IHt9OwoKICAvLyBGaW5kIHRoZSAncmVzb3VyY2UnIHBhcnQgb2YgdGhlIHJvdXRlLCBpZiBpdCBpcyB0aGVyZQogIGNvbnN0IGluZGV4ID0gcGFydHMuZmluZEluZGV4KHAgPT4gcCA9PT0gJ3Jlc291cmNlJyk7CiAgaWYgKGluZGV4ID49IDApIHsKICAgIHBhcnRzID0gcGFydHMuc2xpY2UoMCwgaW5kZXgpOwogIH0KCiAgLy8gSnVzdCBrZWVwIHRoZSBwYXJhbXMgdGhhdCBhcmUgbmVlZGVkCiAgcGFydHMuZm9yRWFjaChwYXJhbSA9PiB7CiAgICBpZiAocm91dGVQYXJhbXNbcGFyYW1dKSB7CiAgICAgIHBhcmFtc1twYXJhbV0gPSByb3V0ZVBhcmFtc1twYXJhbV07CiAgICB9CiAgfSk7CiAgcmV0dXJuIHsKICAgIG5hbWU6IHBhcnRzLmpvaW4oJy0nKSwKICAgIHBhcmFtcwogIH07Cn0="},{"version":3,"names":["SETTING","MANAGEMENT","STEVE","clone","Vue","definitions","prefsBeforeLogin","create","name","def","opt","parseJSON","asCookie","asUserPreference","options","inheritFrom","mangleRead","mangleWrite","mapPref","get","$store","getters","set","value","dispatch","key","CLUSTER","LAST_NAMESPACE","NAMESPACE_FILTERS","WORKSPACE","EXPANDED_GROUPS","FAVORITE_TYPES","PINNED_CLUSTERS","GROUP_RESOURCES","DIFF","THEME","x","replace","PREFERS_SCHEME","LOCALE","KEYMAP","ROWS_PER_PAGE","LOGS_WRAP","LOGS_TIME","LOGS_RANGE","HIDE_REPOS","HIDE_DESC","HIDE_SENSITIVE","SHOW_PRE_RELEASE","SHOW_CHART_MODE","DATE_FORMAT","TIME_FORMAT","TIME_ZONE","DEV","VIEW_IN_API","ALL_NAMESPACES","THEME_SHORTCUT","LAST_VISITED","SEEN_WHATS_NEW","READ_WHATS_NEW","AFTER_LOGIN_ROUTE","HIDE_HOME_PAGE_CARDS","PLUGIN_DEVELOPER","_RKE1","_RKE2","PROVISIONER","MENU_MAX_CLUSTERS","SCALE_POOL_PROMPT","cookiePrefix","cookieOptions","maxAge","path","sameSite","secure","state","cookiesLoaded","data","definition","Error","user","undefined","defaultValue","slice","theme","rootState","rootGetters","setting","pcs","startsWith","substr","afterLoginRoute","afterLoginRoutePref","lastVisitedPref","clusterPref","params","product","cluster","match","clusterId","split","mutations","load","reset","_state$definitions$ke","setDefinition","actions","commit","server","val","$cookies","toUpperCase","checkLogin","_server","JSON","stringify","save","redirectUnauthorized","e","type","status","setTheme","loadCookies","loadTheme","watchDark","window","matchMedia","watchLight","watchNone","interval","nextHalfHour","Math","round","Date","getTime","setTimeout","matches","changed","fromClock","addListener","hour","getHours","loadServer","ignoreKey","_server2","all","PREFERENCE","url","force","watch","stream","root","console","error","Object","keys","length","forEach","parse","err","setLastVisited","route","doNotTrackLastVisited","toSave","getLoginRoute","toggleTheme","setBrandStyle","dark","managementReady","brandSetting","BRAND","brand","brandMeta","require","hasStylesheet","document","body","classList","add","_route$name","parts","routeParams","index","findIndex","p","param","join"],"sources":["/app/node_modules/@rancher/shell/store/prefs.js"],"sourcesContent":["import { SETTING } from '@shell/config/settings';\nimport { MANAGEMENT, STEVE } from '@shell/config/types';\nimport { clone } from '@shell/utils/object';\nimport Vue from 'vue';\n\nconst definitions = {};\n/**\n * Key/value of prefrences are stored before login here and cookies due lack of access permission.\n * Once user is logged in while setting asUserPreference, update stored before login Key/value to the backend in loadServer function.\n */\nlet prefsBeforeLogin = {};\n\nexport const create = function(name, def, opt = {}) {\n  const parseJSON = opt.parseJSON === true;\n  const asCookie = opt.asCookie === true;\n  const asUserPreference = opt.asUserPreference !== false;\n  const options = opt.options;\n  const inheritFrom = opt.inheritFrom;\n\n  definitions[name] = {\n    def,\n    options,\n    parseJSON,\n    asCookie,\n    asUserPreference,\n    inheritFrom, // if value is not defined on server, we can default it to another pref\n    mangleRead:  opt.mangleRead, // Alter the value read from the API (to match old Rancher expectations)\n    mangleWrite: opt.mangleWrite, // Alter the value written back to the API (ditto)\n  };\n\n  return name;\n};\n\nexport const mapPref = function(name) {\n  return {\n    get() {\n      return this.$store.getters['prefs/get'](name);\n    },\n\n    set(value) {\n      this.$store.dispatch('prefs/set', { key: name, value });\n    }\n  };\n};\n\n// --------------------\nconst parseJSON = true; // Shortcut for setting it below\nconst asCookie = true; // Store as a cookie so that it's available before auth + on server-side\n\n// Keys must be lowercase and valid dns label (a-z 0-9 -)\nexport const CLUSTER = create('cluster', '');\nexport const LAST_NAMESPACE = create('last-namespace', '');\nexport const NAMESPACE_FILTERS = create('ns-by-cluster', {}, { parseJSON });\nexport const WORKSPACE = create('workspace', '');\nexport const EXPANDED_GROUPS = create('open-groups', ['cluster', 'policy', 'rbac', 'serviceDiscovery', 'storage', 'workload'], { parseJSON });\nexport const FAVORITE_TYPES = create('fav-type', [], { parseJSON });\nexport const PINNED_CLUSTERS = create('pinned-clusters', [], { parseJSON });\nexport const GROUP_RESOURCES = create('group-by', 'namespace');\nexport const DIFF = create('diff', 'unified', { options: ['unified', 'split'] });\nexport const THEME = create('theme', 'auto', {\n  options:     ['light', 'auto', 'dark'],\n  asCookie,\n  parseJSON,\n  mangleRead:  (x) => x.replace(/^ui-/, ''),\n  mangleWrite: (x) => `ui-${ x }`,\n});\nexport const PREFERS_SCHEME = create('pcs', '', { asCookie, asUserPreference: false });\nexport const LOCALE = create('locale', 'en-us', { asCookie });\nexport const KEYMAP = create('keymap', 'sublime', { options: ['sublime', 'emacs', 'vim'] });\nexport const ROWS_PER_PAGE = create('per-page', 100, { options: [10, 25, 50, 100], parseJSON });\nexport const LOGS_WRAP = create('logs-wrap', true, { parseJSON });\nexport const LOGS_TIME = create('logs-time', true, { parseJSON });\nexport const LOGS_RANGE = create('logs-range', '30 minutes', { parseJSON });\nexport const HIDE_REPOS = create('hide-repos', [], { parseJSON });\nexport const HIDE_DESC = create('hide-desc', [], { parseJSON });\nexport const HIDE_SENSITIVE = create('hide-sensitive', true, { options: [true, false], parseJSON });\nexport const SHOW_PRE_RELEASE = create('show-pre-release', false, { options: [false, true], parseJSON });\nexport const SHOW_CHART_MODE = create('chart-mode', 'featured', { parseJSON });\n\nexport const DATE_FORMAT = create('date-format', 'ddd, MMM D YYYY', {\n  options: [\n    'ddd, MMM D YYYY',\n    'ddd, D MMM YYYY',\n    'D/M/YYYY',\n    'M/D/YYYY',\n    'YYYY-MM-DD'\n  ]\n});\n\nexport const TIME_FORMAT = create('time-format', 'h:mm:ss a', {\n  options: [\n    'h:mm:ss a',\n    'HH:mm:ss'\n  ]\n});\n\nexport const TIME_ZONE = create('time-zone', 'local');\n// DEV will be deprecated on v2.7.0, but is needed so that we can grab the value for the new settings that derived from it\n// such as: VIEW_IN_API, ALL_NAMESPACES, THEME_SHORTCUT\nexport const DEV = create('dev', false, { parseJSON });\nexport const VIEW_IN_API = create('view-in-api', false, { parseJSON, inheritFrom: DEV });\nexport const ALL_NAMESPACES = create('all-namespaces', false, { parseJSON, inheritFrom: DEV });\nexport const THEME_SHORTCUT = create('theme-shortcut', false, { parseJSON, inheritFrom: DEV });\nexport const LAST_VISITED = create('last-visited', 'home', { parseJSON });\nexport const SEEN_WHATS_NEW = create('seen-whatsnew', '', { parseJSON });\nexport const READ_WHATS_NEW = create('read-whatsnew', '', { parseJSON });\nexport const AFTER_LOGIN_ROUTE = create('after-login-route', 'home', { parseJSON } );\nexport const HIDE_HOME_PAGE_CARDS = create('home-page-cards', {}, { parseJSON } );\nexport const PLUGIN_DEVELOPER = create('plugin-developer', false, { parseJSON, inheritFrom: DEV }); // Is the user a plugin developer?\n\nexport const _RKE1 = 'rke1';\nexport const _RKE2 = 'rke2';\nexport const PROVISIONER = create('provisioner', _RKE2, { options: [_RKE1, _RKE2] });\n\n// Maximum number of clusters to show in the slide-in menu\nexport const MENU_MAX_CLUSTERS = 10;\n// Prompt for confirm when scaling down node pool in GUI and save the pref\nexport const SCALE_POOL_PROMPT = create('scale-pool-prompt', null, { parseJSON });\n// --------------------\n\nconst cookiePrefix = 'R_';\nconst cookieOptions = {\n  maxAge:   365 * 86400,\n  path:     '/',\n  sameSite: true,\n  secure:   true,\n};\n\nexport const state = function() {\n  return {\n    cookiesLoaded: false,\n    data:          {},\n    definitions,\n  };\n};\n\nexport const getters = {\n  get: (state) => (key) => {\n    const definition = state.definitions[key];\n\n    if (!definition) {\n      throw new Error(`Unknown preference: ${ key }`);\n    }\n\n    const user = state.data[key];\n\n    if (user !== undefined) {\n      return clone(user);\n    }\n\n    const def = clone(definition.def);\n\n    return def;\n  },\n\n  defaultValue: (state) => (key) => {\n    const definition = state.definitions[key];\n\n    if (!definition) {\n      throw new Error(`Unknown preference: ${ key }`);\n    }\n\n    return clone(definition.def);\n  },\n\n  options: (state) => (key) => {\n    const definition = state.definitions[key];\n\n    if (!definition) {\n      throw new Error(`Unknown preference: ${ key }`);\n    }\n\n    if (!definition.options) {\n      throw new Error(`Preference does not have options: ${ key }`);\n    }\n\n    return definition.options.slice();\n  },\n\n  theme: (state, getters, rootState, rootGetters) => {\n    const setting = rootGetters['management/byId'](MANAGEMENT.SETTING, SETTING.THEME);\n\n    if (setting?.value) {\n      return setting?.value;\n    }\n\n    let theme = getters['get'](THEME);\n    const pcs = getters['get'](PREFERS_SCHEME);\n\n    // console.log('Get Theme', theme, pcs);\n\n    // Ember UI uses this prefix\n    if ( theme.startsWith('ui-') ) {\n      theme = theme.substr(3);\n    }\n\n    if ( theme === 'auto' ) {\n      if ( pcs === 'light' || pcs === 'dark' ) {\n        return pcs;\n      }\n\n      return 'dark';\n    }\n\n    return theme;\n  },\n\n  afterLoginRoute: (state, getters) => {\n    const afterLoginRoutePref = getters['get'](AFTER_LOGIN_ROUTE);\n\n    if (typeof afterLoginRoutePref !== 'string') {\n      return afterLoginRoutePref;\n    }\n\n    switch (true) {\n    case (afterLoginRoutePref === 'home'):\n      return { name: 'home' };\n    case (afterLoginRoutePref === 'last-visited'): {\n      const lastVisitedPref = getters['get'](LAST_VISITED);\n\n      if (lastVisitedPref) {\n        return lastVisitedPref;\n      }\n      const clusterPref = getters['get'](CLUSTER);\n\n      return { name: 'c-cluster-explorer', params: { product: 'explorer', cluster: clusterPref } };\n    }\n    case (!!afterLoginRoutePref.match(/.+-dashboard$/)):\n    {\n      const clusterId = afterLoginRoutePref.split('-dashboard')[0];\n\n      return { name: 'c-cluster-explorer', params: { product: 'explorer', cluster: clusterId } };\n    }\n    default:\n      return { name: afterLoginRoutePref };\n    }\n  }\n};\n\nexport const mutations = {\n  load(state, { key, value }) {\n    Vue.set(state.data, key, value);\n  },\n\n  cookiesLoaded(state) {\n    state.cookiesLoaded = true;\n  },\n\n  reset(state) {\n    for (const key in state.definitions) {\n      if ( state.definitions[key]?.asCookie ) {\n        continue;\n      }\n      delete state.data[key];\n    }\n  },\n\n  setDefinition(state, { name, definition = {} }) {\n    state.definitions[name] = definition;\n  },\n};\n\nexport const actions = {\n  async set({\n    dispatch, commit, rootGetters, state\n  }, opt) {\n    let { key, value } = opt; // eslint-disable-line prefer-const\n    const definition = state.definitions[key];\n    let server;\n\n    if ( opt.val ) {\n      throw new Error('Use value, not val');\n    }\n\n    commit('load', { key, value });\n\n    if ( definition.asCookie ) {\n      const opt = {\n        ...cookieOptions,\n        parseJSON: definition.parseJSON === true\n      };\n\n      this.$cookies.set(`${ cookiePrefix }${ key }`.toUpperCase(), value, opt);\n    }\n\n    if ( definition.asUserPreference ) {\n      const checkLogin = rootGetters['auth/loggedIn'];\n\n      // Check for login status\n      if (!checkLogin) {\n        prefsBeforeLogin[key] = value;\n\n        return;\n      }\n\n      try {\n        server = await dispatch('loadServer', key); // There's no watch on prefs, so get before set...\n\n        if ( server?.data ) {\n          if ( definition.mangleWrite ) {\n            value = definition.mangleWrite(value);\n          }\n\n          if ( definition.parseJSON ) {\n            Vue.set(server.data, key, JSON.stringify(value));\n          } else {\n            Vue.set(server.data, key, value);\n          }\n\n          await server.save({ redirectUnauthorized: false });\n        }\n      } catch (e) {\n        // Well it failed, but not much to do about it...\n\n        // Return the error\n        return { type: e.type, status: e.status };\n      }\n    }\n  },\n\n  async setTheme({ dispatch }, val) {\n    await dispatch('set', { key: THEME, value: val });\n  },\n\n  loadCookies({ state, commit }) {\n    if ( state.cookiesLoaded ) {\n      return;\n    }\n\n    for (const key in state.definitions) {\n      const definition = state.definitions[key];\n\n      if ( !definition.asCookie ) {\n        continue;\n      }\n\n      const opt = { parseJSON: definition.parseJSON === true };\n      const value = this.$cookies.get(`${ cookiePrefix }${ key }`.toUpperCase(), opt);\n\n      if (value !== undefined) {\n        commit('load', { key, value });\n      }\n    }\n\n    commit('cookiesLoaded');\n  },\n\n  loadTheme({ dispatch }) {\n    const watchDark = window.matchMedia('(prefers-color-scheme: dark)');\n    const watchLight = window.matchMedia('(prefers-color-scheme: light)');\n    const watchNone = window.matchMedia('(prefers-color-scheme: no-preference)');\n\n    const interval = 30 * 60 * 1000;\n    const nextHalfHour = interval - Math.round(new Date().getTime()) % interval;\n\n    setTimeout(() => {\n      dispatch('loadTheme');\n    }, nextHalfHour);\n    // console.log('Update theme in', nextHalfHour, 'ms');\n\n    if ( watchDark.matches ) {\n      changed('dark');\n    } else if ( watchLight.matches ) {\n      changed('light');\n    } else {\n      changed(fromClock());\n    }\n\n    watchDark.addListener((e) => {\n      if ( e.matches ) {\n        changed('dark');\n      }\n    });\n\n    watchLight.addListener((e) => {\n      if ( e.matches ) {\n        changed('light');\n      }\n    });\n\n    watchNone.addListener((e) => {\n      if ( e.matches ) {\n        changed(fromClock());\n      }\n    });\n\n    function changed(value) {\n      // console.log('Prefers Theme:', value);\n      dispatch('set', { key: PREFERS_SCHEME, value });\n    }\n\n    function fromClock() {\n      const hour = new Date().getHours();\n\n      if ( hour < 7 || hour >= 18 ) {\n        return 'dark';\n      }\n\n      return 'light';\n    }\n  },\n\n  async loadServer( {\n    state, dispatch, commit, rootState, rootGetters\n  }, ignoreKey) {\n    let server = { data: {} };\n\n    try {\n      const all = await dispatch('management/findAll', {\n        type: STEVE.PREFERENCE,\n        opt:  {\n          url:                  'userpreferences',\n          force:                true,\n          watch:                false,\n          redirectUnauthorized: false,\n          stream:               false,\n        }\n      }, { root: true });\n\n      server = all?.[0];\n    } catch (e) {\n      console.error('Error loading preferences', e); // eslint-disable-line no-console\n\n      return;\n    }\n\n    if ( !server?.data ) {\n      return;\n    }\n\n    // if prefsBeforeLogin has values from login page, update the backend\n    if (Object.keys(prefsBeforeLogin).length > 0) {\n      Object.keys(prefsBeforeLogin).forEach((key) => {\n        server.data[key] = prefsBeforeLogin[key];\n      });\n\n      await server.save({ redirectUnauthorized: false });\n\n      // Clear prefsBeforeLogin, as we have now saved theses\n      prefsBeforeLogin = {};\n    }\n\n    for (const key in state.definitions) {\n      const definition = state.definitions[key];\n      let value = clone(server.data[key]);\n\n      if (value === undefined && definition.inheritFrom) {\n        value = clone(server.data[definition.inheritFrom]);\n      }\n\n      if ( value === undefined || key === ignoreKey) {\n        continue;\n      }\n\n      if ( definition.parseJSON ) {\n        try {\n          value = JSON.parse(value);\n        } catch (err) {\n          console.error('Error parsing server pref', key, value, err); // eslint-disable-line no-console\n          continue;\n        }\n      }\n\n      if ( definition.mangleRead ) {\n        value = definition.mangleRead(value);\n      }\n\n      commit('load', { key, value });\n    }\n\n    return server;\n  },\n\n  setLastVisited({ state, dispatch, getters }, route) {\n    if (!route) {\n      return;\n    }\n\n    // Only save the last visited page if the user has that set as the login route preference\n    const afterLoginRoutePref = getters['get'](AFTER_LOGIN_ROUTE);\n    const doNotTrackLastVisited = typeof afterLoginRoutePref !== 'string' || afterLoginRoutePref !== 'last-visited';\n\n    if (doNotTrackLastVisited) {\n      return;\n    }\n\n    const toSave = getLoginRoute(route);\n\n    return dispatch('set', { key: LAST_VISITED, value: toSave });\n  },\n\n  toggleTheme({ getters, dispatch }) {\n    const value = getters[THEME] === 'light' ? 'dark' : 'light';\n\n    return dispatch('set', { key: THEME, value });\n  },\n\n  setBrandStyle({ rootState, rootGetters }, dark = false) {\n    if (rootState.managementReady) {\n      try {\n        const brandSetting = rootGetters['management/byId'](MANAGEMENT.SETTING, SETTING.BRAND);\n\n        if (brandSetting && brandSetting.value && brandSetting.value !== '') {\n          const brand = brandSetting.value;\n\n          const brandMeta = require(`~shell/assets/brand/${ brand }/metadata.json`);\n          const hasStylesheet = brandMeta.hasStylesheet === 'true';\n\n          if (hasStylesheet) {\n            document.body.classList.add(brand);\n          } else {\n            // TODO option apply color at runtime\n          }\n        }\n      } catch {}\n    }\n  }\n};\n\nfunction getLoginRoute(route) {\n  let parts = route.name?.split('-') || [];\n  const params = {};\n  const routeParams = route.params || {};\n\n  // Find the 'resource' part of the route, if it is there\n  const index = parts.findIndex((p) => p === 'resource');\n\n  if (index >= 0) {\n    parts = parts.slice(0, index);\n  }\n\n  // Just keep the params that are needed\n  parts.forEach((param) => {\n    if (routeParams[param]) {\n      params[param] = routeParams[param];\n    }\n  });\n\n  return {\n    name: parts.join('-'),\n    params\n  };\n}\n"],"mappings":"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","ignoreList":[]}]}