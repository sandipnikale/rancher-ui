{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--2-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/node_modules/@rancher/shell/promptRemove/pod.vue?vue&type=script&lang=js","dependencies":[{"path":"/app/node_modules/@rancher/shell/promptRemove/pod.vue","mtime":1764054237091},{"path":"/app/pkg/rancher-support-ui/babel.config.js","mtime":1764051174054},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1764054260995}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IENoZWNrYm94IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gvQ2hlY2tib3gudnVlJzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJ2xvZGFzaCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUHJvbXB0UmVtb3ZlUG9kRGlhbG9nJywKICBjb21wb25lbnRzOiB7CiAgICBCYW5uZXIsCiAgICBDaGVja2JveAogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgbmFtZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBjbG9zZTogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBkb25lTG9jYXRpb246IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yczogW10sCiAgICAgIGZvcmNlRGVsZXRlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgnYWN0aW9uLW1lbnUnLCBbJ3RvUmVtb3ZlJ10pLAogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIHQ6ICdpMThuL3QnCiAgICB9KSwKICAgIHBsdXNNb3JlKCkgewogICAgICBjb25zdCBjb3VudCA9IHRoaXMubmFtZXMubGVuZ3RoIC0gdGhpcy5uYW1lcy5sZW5ndGg7CiAgICAgIHJldHVybiB0aGlzLnQoJ3Byb21wdFJlbW92ZS5hbmRPdGhlcnMnLCB7CiAgICAgICAgY291bnQKICAgICAgfSk7CiAgICB9LAogICAgcG9kTmFtZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLm5hbWVzLnJlZHVjZSgocmVzLCBuYW1lLCBpKSA9PiB7CiAgICAgICAgaWYgKGkgPj0gNSkgewogICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICB9CiAgICAgICAgcmVzICs9IGA8Yj4ke25hbWV9PC9iPmA7CiAgICAgICAgaWYgKGkgPT09IHRoaXMubmFtZXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgcmVzICs9IHRoaXMucGx1c01vcmU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlcyArPSBpID09PSB0aGlzLnRvUmVtb3ZlLmxlbmd0aCAtIDIgPyAnIGFuZCAnIDogJywgJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlczsKICAgICAgfSwgJycpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgcmVtb3ZlKGNvbmZpcm0pIHsKICAgICAgbGV0IGdvVG87CiAgICAgIGlmICh0aGlzLmRvbmVMb2NhdGlvbikgewogICAgICAgIC8vIGRvbmVMb2NhdGlvbiB3aWxsIHJlY29tcHV0ZSB0byB1bmRlZmluZWQgd2hlbiBkZWxldGUgcmVxdWVzdCBjb21wbGV0ZXMKICAgICAgICBnb1RvID0gewogICAgICAgICAgLi4udGhpcy5kb25lTG9jYXRpb24KICAgICAgICB9OwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy52YWx1ZS5tYXAocmVzb3VyY2UgPT4gdGhpcy5yZW1vdmVQb2QocmVzb3VyY2UpKSk7CiAgICAgICAgaWYgKGdvVG8gJiYgIWlzRW1wdHkoZ29UbykpIHsKICAgICAgICAgIHZhciBfdGhpcyR2YWx1ZTsKICAgICAgICAgIChfdGhpcyR2YWx1ZSA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlID0gX3RoaXMkdmFsdWVbMF0pID09PSBudWxsIHx8IF90aGlzJHZhbHVlID09PSB2b2lkIDAgfHwgX3RoaXMkdmFsdWUuY3VycmVudFJvdXRlcigpLnB1c2goZ29Ubyk7CiAgICAgICAgfQogICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3JzJywgZXJyKTsKICAgICAgICBjb25maXJtKGZhbHNlKTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZVBvZChwb2QpIHsKICAgICAgY29uc3Qgb3B0ID0gdGhpcy5mb3JjZURlbGV0ZSA/IHsKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBncmFjZVBlcmlvZDogMCwKICAgICAgICAgIGZvcmNlOiB0cnVlCiAgICAgICAgfQogICAgICB9IDogdW5kZWZpbmVkOwogICAgICByZXR1cm4gcG9kLnJlbW92ZShvcHQpOwogICAgfQogIH0KfTs="},{"version":3,"names":["Banner","Checkbox","mapGetters","mapState","isEmpty","name","components","props","value","type","Array","default","names","String","required","close","Function","doneLocation","Object","data","errors","forceDelete","computed","t","plusMore","count","length","podNames","reduce","res","i","toRemove","methods","remove","confirm","goTo","Promise","all","map","resource","removePod","_this$value","currentRouter","push","err","$emit","pod","opt","gracePeriod","force","undefined"],"sources":["../../node_modules/@rancher/shell/promptRemove/pod.vue"],"sourcesContent":["<script>\nimport { Banner } from '@components/Banner';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport { mapGetters, mapState } from 'vuex';\nimport { isEmpty } from 'lodash';\n\nexport default {\n  name: 'PromptRemovePodDialog',\n\n  components: {\n    Banner,\n    Checkbox\n  },\n\n  props: {\n    value: {\n      type:    Array,\n      default: () => {\n        return [];\n      }\n    },\n\n    names: {\n      type:    Array,\n      default: () => {\n        return [];\n      }\n    },\n\n    type: {\n      type:     String,\n      required: true\n    },\n\n    close: {\n      type:     Function,\n      required: true\n    },\n\n    doneLocation: {\n      type:    Object,\n      default: () => {}\n    }\n  },\n\n  data() {\n    return {\n      errors:      [],\n      forceDelete: false\n    };\n  },\n\n  computed: {\n    ...mapState('action-menu', ['toRemove']),\n    ...mapGetters({ t: 'i18n/t' }),\n\n    plusMore() {\n      const count = this.names.length - this.names.length;\n\n      return this.t('promptRemove.andOthers', { count });\n    },\n\n    podNames() {\n      return this.names.reduce((res, name, i) => {\n        if (i >= 5) {\n          return res;\n        }\n        res += `<b>${ name }</b>`;\n        if (i === this.names.length - 1) {\n          res += this.plusMore;\n        } else {\n          res += i === this.toRemove.length - 2 ? ' and ' : ', ';\n        }\n\n        return res;\n      }, '');\n    },\n  },\n\n  methods: {\n    async remove(confirm) {\n      let goTo;\n\n      if (this.doneLocation) {\n        // doneLocation will recompute to undefined when delete request completes\n        goTo = { ...this.doneLocation };\n      }\n\n      try {\n        await Promise.all(this.value.map((resource) => this.removePod(resource)));\n        if ( goTo && !isEmpty(goTo) ) {\n          this.value?.[0]?.currentRouter().push(goTo);\n        }\n        this.close();\n      } catch (err) {\n        this.$emit('errors', err);\n        confirm(false);\n      }\n    },\n\n    removePod(pod) {\n      const opt = this.forceDelete ? {\n        data: {\n          gracePeriod: 0,\n          force:       true\n        }\n      } : undefined;\n\n      return pod.remove(opt);\n    },\n  }\n};\n</script>\n\n<template>\n  <div class=\"mt-10\">\n    <div class=\"mb-30\">\n      {{ t('promptRemove.attemptingToRemove', { type }) }} <span\n        v-clean-html=\"podNames\"\n        class=\"machine-name\"\n      />\n    </div>\n    <div class=\"mb-30\">\n      <Checkbox\n        v-model=\"forceDelete\"\n        :label=\"t('promptForceRemove.forceDelete')\"\n      />\n    </div>\n    <Banner\n      color=\"warning\"\n      label-key=\"promptForceRemove.podRemoveWarning\"\n    />\n    <Banner\n      v-for=\"(error, i) in errors\"\n      :key=\"i\"\n      class=\"\"\n      color=\"error\"\n      :label=\"error\"\n    />\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  .actions {\n    text-align: right;\n  }\n\n  .machine-name {\n    font-weight: 600;\n  }\n</style>\n"],"mappings":"AACA,SAAAA,MAAA;AACA,OAAAC,QAAA;AACA,SAAAC,UAAA,EAAAC,QAAA;AACA,SAAAC,OAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAN,MAAA;IACAC;EACA;EAEAM,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,KAAA;MACAC,OAAA,EAAAA,CAAA;QACA;MACA;IACA;IAEAC,KAAA;MACAH,IAAA,EAAAC,KAAA;MACAC,OAAA,EAAAA,CAAA;QACA;MACA;IACA;IAEAF,IAAA;MACAA,IAAA,EAAAI,MAAA;MACAC,QAAA;IACA;IAEAC,KAAA;MACAN,IAAA,EAAAO,QAAA;MACAF,QAAA;IACA;IAEAG,YAAA;MACAR,IAAA,EAAAS,MAAA;MACAP,OAAA,EAAAA,CAAA;IACA;EACA;EAEAQ,KAAA;IACA;MACAC,MAAA;MACAC,WAAA;IACA;EACA;EAEAC,QAAA;IACA,GAAAnB,QAAA;IACA,GAAAD,UAAA;MAAAqB,CAAA;IAAA;IAEAC,SAAA;MACA,MAAAC,KAAA,QAAAb,KAAA,CAAAc,MAAA,QAAAd,KAAA,CAAAc,MAAA;MAEA,YAAAH,CAAA;QAAAE;MAAA;IACA;IAEAE,SAAA;MACA,YAAAf,KAAA,CAAAgB,MAAA,EAAAC,GAAA,EAAAxB,IAAA,EAAAyB,CAAA;QACA,IAAAA,CAAA;UACA,OAAAD,GAAA;QACA;QACAA,GAAA,UAAAxB,IAAA;QACA,IAAAyB,CAAA,UAAAlB,KAAA,CAAAc,MAAA;UACAG,GAAA,SAAAL,QAAA;QACA;UACAK,GAAA,IAAAC,CAAA,UAAAC,QAAA,CAAAL,MAAA;QACA;QAEA,OAAAG,GAAA;MACA;IACA;EACA;EAEAG,OAAA;IACA,MAAAC,OAAAC,OAAA;MACA,IAAAC,IAAA;MAEA,SAAAlB,YAAA;QACA;QACAkB,IAAA;UAAA,QAAAlB;QAAA;MACA;MAEA;QACA,MAAAmB,OAAA,CAAAC,GAAA,MAAA7B,KAAA,CAAA8B,GAAA,CAAAC,QAAA,SAAAC,SAAA,CAAAD,QAAA;QACA,IAAAJ,IAAA,KAAA/B,OAAA,CAAA+B,IAAA;UAAA,IAAAM,WAAA;UACA,CAAAA,WAAA,QAAAjC,KAAA,cAAAiC,WAAA,gBAAAA,WAAA,GAAAA,WAAA,iBAAAA,WAAA,eAAAA,WAAA,CAAAC,aAAA,GAAAC,IAAA,CAAAR,IAAA;QACA;QACA,KAAApB,KAAA;MACA,SAAA6B,GAAA;QACA,KAAAC,KAAA,WAAAD,GAAA;QACAV,OAAA;MACA;IACA;IAEAM,UAAAM,GAAA;MACA,MAAAC,GAAA,QAAA1B,WAAA;QACAF,IAAA;UACA6B,WAAA;UACAC,KAAA;QACA;MACA,IAAAC,SAAA;MAEA,OAAAJ,GAAA,CAAAb,MAAA,CAAAc,GAAA;IACA;EACA;AACA","ignoreList":[]}]}