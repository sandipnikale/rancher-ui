{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/@rancher/shell/core/plugin-helpers.js","dependencies":[{"path":"/app/node_modules/@rancher/shell/core/plugin-helpers.js","mtime":1764054237091},{"path":"/app/pkg/rancher-support-ui/babel.config.js","mtime":1764051174054},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQWN0aW9uTG9jYXRpb24sIENhcmRMb2NhdGlvbiwgRXh0ZW5zaW9uUG9pbnQgfSBmcm9tICdAc2hlbGwvY29yZS90eXBlcyc7CmltcG9ydCB7IGlzTWFjIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3BsYXRmb3JtJzsKaW1wb3J0IHsgdWNGaXJzdCwgcmFuZG9tU3RyIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IF9FRElULCBfQ09ORklHLCBfREVUQUlMLCBfTElTVCwgX0NSRUFURSB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgZ2V0UHJvZHVjdEZyb21Sb3V0ZSB9IGZyb20gJ0BzaGVsbC91dGlscy9yb3V0ZXInOwppbXBvcnQgeyBpc0VxdWFsIH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmZ1bmN0aW9uIGNoZWNrUm91dGVQcm9kdWN0KCRyb3V0ZSwgbG9jYXRpb25Db25maWdQYXJhbSkgewogIGNvbnN0IHByb2R1Y3QgPSBnZXRQcm9kdWN0RnJvbVJvdXRlKCRyb3V0ZSk7CgogIC8vIGFsaWFzIGZvciB0aGUgaG9tZXBhZ2UKICBpZiAobG9jYXRpb25Db25maWdQYXJhbSA9PT0gJ2hvbWUnICYmICRyb3V0ZS5uYW1lID09PSAnaG9tZScpIHsKICAgIHJldHVybiB0cnVlOwogIH0gZWxzZSBpZiAobG9jYXRpb25Db25maWdQYXJhbSA9PT0gcHJvZHVjdCkgewogICAgcmV0dXJuIHRydWU7CiAgfQogIHJldHVybiBmYWxzZTsKfQpmdW5jdGlvbiBjaGVja1JvdXRlTW9kZSh7CiAgbmFtZSwKICBxdWVyeQp9LCBsb2NhdGlvbkNvbmZpZ1BhcmFtKSB7CiAgaWYgKGxvY2F0aW9uQ29uZmlnUGFyYW0gPT09IF9FRElUICYmIHF1ZXJ5Lm1vZGUgJiYgcXVlcnkubW9kZSA9PT0gX0VESVQgJiYgIXF1ZXJ5LmFzKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9IGVsc2UgaWYgKGxvY2F0aW9uQ29uZmlnUGFyYW0gPT09IF9DT05GSUcgJiYgcXVlcnkuYXMgJiYgcXVlcnkuYXMgPT09IF9DT05GSUcpIHsKICAgIHJldHVybiB0cnVlOwogIH0gZWxzZSBpZiAobG9jYXRpb25Db25maWdQYXJhbSA9PT0gX0RFVEFJTCAmJiAhcXVlcnkuYXMgJiYgbmFtZS5pbmNsdWRlcygnLWlkJykgJiYgKCFxdWVyeS5tb2RlIHx8IChxdWVyeSA9PT0gbnVsbCB8fCBxdWVyeSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcXVlcnkubW9kZSkgIT09IF9FRElUKSkgewogICAgcmV0dXJuIHRydWU7CiAgICAvLyBhbGlhcyB0byB0YXJnZXQgYWxsIGxpc3Qgdmlld3MKICB9IGVsc2UgaWYgKGxvY2F0aW9uQ29uZmlnUGFyYW0gPT09IF9MSVNUICYmICFuYW1lLmluY2x1ZGVzKCctaWQnKSAmJiBuYW1lLmluY2x1ZGVzKCctcmVzb3VyY2UnKSkgewogICAgcmV0dXJuIHRydWU7CiAgICAvLyBhbGlhcyB0byB0YXJnZXQgY3JlYXRlIHZpZXdzCiAgfSBlbHNlIGlmIChsb2NhdGlvbkNvbmZpZ1BhcmFtID09PSBfQ1JFQVRFICYmIG5hbWUuZW5kc1dpdGgoJy1jcmVhdGUnKSkgewogICAgcmV0dXJuIHRydWU7CiAgfQogIHJldHVybiBmYWxzZTsKfQpmdW5jdGlvbiBjaGVja0V4dGVuc2lvblJvdXRlQmluZGluZygkcm91dGUsIGxvY2F0aW9uQ29uZmlnLCBjb250ZXh0KSB7CiAgLy8gaWYgbm8gY29uZmlndXJhdGlvbiBpcyBwYXNzZWQsIGNvbnNpZGVyIGl0IGFzIGdsb2JhbAogIGlmICghT2JqZWN0LmtleXMobG9jYXRpb25Db25maWcpLmxlbmd0aCkgewogICAgcmV0dXJuIHRydWU7CiAgfQogIGNvbnN0IHsKICAgIHBhcmFtcwogIH0gPSAkcm91dGU7CgogIC8vICJwYXJhbXMiIHRvIGJlIGNoZWNrZWQgYmFzZWQgb24gdGhlIGxvY2F0aW9uQ29uZmlnCiAgLy8gVGhpcyBoYXMgYmVjb21lIG92ZXJsb2FkZWQgd2l0aCBtb2RlIGFuZCBjb250ZXh0CiAgY29uc3QgcGFyYW1zVG9DaGVjayA9IFsncHJvZHVjdCcsICdyZXNvdXJjZScsICduYW1lc3BhY2UnLCAnY2x1c3RlcicsICdpZCcsICdtb2RlJywgJ3BhdGgnLCAnaGFzaCcsCiAgLy8gdXJsIHF1ZXJ5IHBhcmFtcwogICdxdWVyeVBhcmFtJywKICAvLyBDdXN0b20gY29udGV4dCBzcGVjaWZpYyBwYXJhbXMgcHJvdmlkZWQgYnkgdGhlIGV4dGVuc2lvbiwgbm90IHRvIGJlIGNvbmZ1c2VkIHdpdGggbG9jYXRpb24gcGFyYW1zCiAgJ2NvbnRleHQnXTsKICBsZXQgcmVzID0gdHJ1ZTsKICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtc1RvQ2hlY2subGVuZ3RoOyBpKyspIHsKICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zVG9DaGVja1tpXTsKICAgIGlmIChsb2NhdGlvbkNvbmZpZ1twYXJhbV0pIHsKICAgICAgY29uc3QgYXNBcnJheSA9IEFycmF5LmlzQXJyYXkobG9jYXRpb25Db25maWdbcGFyYW1dKSA/IGxvY2F0aW9uQ29uZmlnW3BhcmFtXSA6IFtsb2NhdGlvbkNvbmZpZ1twYXJhbV1dOwogICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGFzQXJyYXkubGVuZ3RoOyB4KyspIHsKICAgICAgICBjb25zdCBsb2NhdGlvbkNvbmZpZ1BhcmFtID0gYXNBcnJheVt4XTsKICAgICAgICBpZiAobG9jYXRpb25Db25maWdQYXJhbSkgewogICAgICAgICAgaWYgKHBhcmFtID09PSAnaGFzaCcpIHsKICAgICAgICAgICAgcmVzID0gJHJvdXRlLmhhc2ggPyAkcm91dGUuaGFzaC5pbmNsdWRlcyhsb2NhdGlvbkNvbmZpZ1BhcmFtKSA6IGZhbHNlOwogICAgICAgICAgICAvLyBoYW5kbGUgInByb2R1Y3QiIGluIGEgc2VwYXJhdGUgd2F5Li4uCiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtID09PSAncHJvZHVjdCcpIHsKICAgICAgICAgICAgcmVzID0gY2hlY2tSb3V0ZVByb2R1Y3QoJHJvdXRlLCBsb2NhdGlvbkNvbmZpZ1BhcmFtKTsKICAgICAgICAgICAgLy8gYWxzbyBoYW5kbGUgIm1vZGUiIGluIGEgc2VwYXJhdGUgd2F5IGJlY2F1c2UgaXQgbWFpbmx5IGRlcGVuZHMgb24gcXVlcnkgcGFyYW1zCiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtID09PSAnbW9kZScpIHsKICAgICAgICAgICAgcmVzID0gY2hlY2tSb3V0ZU1vZGUoJHJvdXRlLCBsb2NhdGlvbkNvbmZpZ1BhcmFtKTsKICAgICAgICAgIH0gZWxzZSBpZiAocGFyYW0gPT09ICdyZXNvdXJjZScpIHsKICAgICAgICAgICAgLy8gTWF0Y2ggZXhhY3QgcmVzb3VyY2UgYnV0IGFsc28gYWxsb3cgcmVzb3VyY2Ugb2YgJyonIHRvIG1hdGNoIGFueSByZXNvdXJjZQogICAgICAgICAgICByZXMgPSBwYXJhbXNbcGFyYW1dICYmIGxvY2F0aW9uQ29uZmlnUGFyYW0gPT09ICcqJyB8fCBsb2NhdGlvbkNvbmZpZ1BhcmFtID09PSBwYXJhbXNbcGFyYW1dOwogICAgICAgICAgfSBlbHNlIGlmIChwYXJhbSA9PT0gJ2NvbnRleHQnKSB7CiAgICAgICAgICAgIC8vIE5lZWQgYWxsIGtleXMgYW5kIHZhbHVlcyB0byBtYXRjaAogICAgICAgICAgICByZXMgPSBpc0VxdWFsKGxvY2F0aW9uQ29uZmlnUGFyYW0sIGNvbnRleHQpOwogICAgICAgICAgICAvLyBldmFsdWF0ZSBxdWVyeVBhcmFtIGluIHJvdXRlCiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtID09PSAncXVlcnlQYXJhbScpIHsKICAgICAgICAgICAgcmVzID0gaXNFcXVhbChsb2NhdGlvbkNvbmZpZ1BhcmFtLCAkcm91dGUucXVlcnkpOwogICAgICAgICAgICAvLyBldmFsdWF0ZSBwYXRoIGluIHJvdXRlCiAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtID09PSAncGF0aCcgJiYgbG9jYXRpb25Db25maWdQYXJhbS51cmxQYXRoKSB7CiAgICAgICAgICAgIGlmIChsb2NhdGlvbkNvbmZpZ1BhcmFtLmVuZHNXaXRoKSB7CiAgICAgICAgICAgICAgcmVzID0gJHJvdXRlLnBhdGguZW5kc1dpdGgobG9jYXRpb25Db25maWdQYXJhbS51cmxQYXRoKTsKICAgICAgICAgICAgfSBlbHNlIGlmICghT2JqZWN0LmtleXMobG9jYXRpb25Db25maWdQYXJhbSkuaW5jbHVkZXMoJ2V4YWN0JykgfHwgbG9jYXRpb25Db25maWdQYXJhbS5leGFjdCkgewogICAgICAgICAgICAgIHJlcyA9IGxvY2F0aW9uQ29uZmlnUGFyYW0udXJsUGF0aCA9PT0gJHJvdXRlLnBhdGg7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzID0gJHJvdXRlLnBhdGguaW5jbHVkZXMobG9jYXRpb25Db25maWdQYXJhbS51cmxQYXRoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChsb2NhdGlvbkNvbmZpZ1BhcmFtID09PSBwYXJhbXNbcGFyYW1dKSB7CiAgICAgICAgICAgIHJlcyA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXMgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIElmIGEgc2luZ2xlIGxvY2F0aW9uIGNvbmZpZyBwYXJhbSBpcyBnb29kIHRoZW4gdGhpcyBpcyBhbiBwYXJhbSAoYWthIFsncG9kcycsICdjb25maWdtYXAnXSA9IHBvZHMgb3IgY29uZmlnbWFwcykKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIElmIGEgc2luZ2xlIHBhcmFtIChzZXQgb2YgbG9jYXRpb24gY29uZmlnIHBhcmFtcykgaXMgYmFkIHRoZW4gdGhpcyBpcyBub3QgYW4gYWNjZXB0YWJsZSBsb2NhdGlvbgogICAgICBpZiAoIXJlcykgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiByZXM7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldEFwcGxpY2FibGVFeHRlbnNpb25FbmhhbmNlbWVudHMocGx1Z2luQ3R4LCBhY3Rpb25UeXBlLCB1aUFyZWEsIGN1cnJSb3V0ZSwgdHJhbnNsYXRpb25DdHggPSBwbHVnaW5DdHgsIGNvbnRleHQpIHsKICB2YXIgX3BsdWdpbkN0eCQkcGx1Z2luOwogIGNvbnN0IGV4dGVuc2lvbkVuaGFuY2VtZW50cyA9IFtdOwoKICAvLyBnYXRlIGl0IHNvIHRoYXQgd2UgcHJldmVudCBlcnJvcnMgb24gb2xkZXIgdmVyc2lvbnMgb2YgZGFzaGJvYXJkCiAgaWYgKChfcGx1Z2luQ3R4JCRwbHVnaW4gPSBwbHVnaW5DdHguJHBsdWdpbikgIT09IG51bGwgJiYgX3BsdWdpbkN0eCQkcGx1Z2luICE9PSB2b2lkIDAgJiYgX3BsdWdpbkN0eCQkcGx1Z2luLmdldFVJQ29uZmlnKSB7CiAgICBjb25zdCBhY3Rpb25zID0gcGx1Z2luQ3R4LiRwbHVnaW4uZ2V0VUlDb25maWcoYWN0aW9uVHlwZSwgdWlBcmVhKTsKICAgIGFjdGlvbnMuZm9yRWFjaCgoYWN0aW9uLCBpKSA9PiB7CiAgICAgIGlmIChjaGVja0V4dGVuc2lvblJvdXRlQmluZGluZyhjdXJyUm91dGUsIGFjdGlvbi5sb2NhdGlvbkNvbmZpZywgY29udGV4dCB8fCB7fSkpIHsKICAgICAgICAvLyBBREQgQ0FSRCBQTFVHSU4gVUkgRU5IQU5DRU1FTlQKICAgICAgICBpZiAoYWN0aW9uVHlwZSA9PT0gRXh0ZW5zaW9uUG9pbnQuQ0FSRCkgewogICAgICAgICAgLy8gaW50ZXJjZXB0IHRvIGFwcGx5IHRyYW5zbGF0aW9uCiAgICAgICAgICBpZiAodWlBcmVhID09PSBDYXJkTG9jYXRpb24uQ0xVU1RFUl9EQVNIQk9BUkRfQ0FSRCAmJiBhY3Rpb24ubGFiZWxLZXkpIHsKICAgICAgICAgICAgYWN0aW9uc1tpXS5sYWJlbCA9IHRyYW5zbGF0aW9uQ3R4LnQoYWN0aW9uLmxhYmVsS2V5KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBBREQgQUNUSU9OIFBMVUdJTiBVSSBFTkhBTkNFTUVOVAogICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uVHlwZSA9PT0gRXh0ZW5zaW9uUG9pbnQuQUNUSU9OKSB7CiAgICAgICAgICAvLyBUQUJMRSBBQ1RJT04KICAgICAgICAgIGlmICh1aUFyZWEgPT09IEFjdGlvbkxvY2F0aW9uLlRBQkxFKSB7CiAgICAgICAgICAgIC8vIGludGVyY2VwdCB0byBhcHBseSB0cmFuc2xhdGlvbgogICAgICAgICAgICBpZiAoYWN0aW9uLmxhYmVsS2V5KSB7CiAgICAgICAgICAgICAgYWN0aW9uc1tpXS5sYWJlbCA9IHRyYW5zbGF0aW9uQ3R4LnQoYWN0aW9uLmxhYmVsS2V5KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gYnVsa2FibGUgZmxhZwogICAgICAgICAgICBhY3Rpb25zW2ldLmJ1bGthYmxlID0gYWN0aW9uc1tpXS5tdWx0aXBsZSB8fCBhY3Rpb25zW2ldLmJ1bGthYmxlOwoKICAgICAgICAgICAgLy8gcG9wdWxhdGUgYWN0aW9uIGlkZW50aWZpZXIgdG8gcHJldmVudCBlcnJvcnMKICAgICAgICAgICAgaWYgKCFhY3Rpb25zW2ldLmFjdGlvbikgewogICAgICAgICAgICAgIGFjdGlvbnNbaV0uYWN0aW9uID0gYGN1c3RvbS10YWJsZS1hY3Rpb24tJHtyYW5kb21TdHIoMTApLnRvTG93ZXJDYXNlKCl9YDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIC8vIGV4dHJhY3Qgc2ltcGxpZmllZCBzaG9ydGN1dCBkZWZpbml0aW9uIG9uIHBsdWdpbiAtIEhFQURFUiBBQ1RJT04KICAgICAgICAgIGlmICh1aUFyZWEgPT09IEFjdGlvbkxvY2F0aW9uLkhFQURFUiAmJiBhY3Rpb24uc2hvcnRjdXQpIHsKICAgICAgICAgICAgLy8gaWYgaXQncyBhIHN0cmluZywgdGhlbiBhc3N1bWUgQ1RSTCBmb3Igd2luZG93cyBhbmQgTUVUQSBmb3IgbWFjCiAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uLnNob3J0Y3V0ID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgIGFjdGlvbnNbaV0uc2hvcnRjdXRMYWJlbCA9ICgpID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBpc01hYyA/IGAoXHUyMzE4LSR7YWN0aW9uLnNob3J0Y3V0LnRvVXBwZXJDYXNlKCl9KWAgOiBgKEN0cmwtJHthY3Rpb24uc2hvcnRjdXQudG9VcHBlckNhc2UoKX0pYDsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGFjdGlvbnNbaV0uc2hvcnRjdXRLZXkgPSB7CiAgICAgICAgICAgICAgICB3aW5kb3dzOiBbJ2N0cmwnLCBhY3Rpb24uc2hvcnRjdXRdLAogICAgICAgICAgICAgICAgbWFjOiBbJ21ldGEnLCBhY3Rpb24uc2hvcnRjdXRdCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAvLyBjb3JyZWN0IGNoZWNrIGZvciBhbiBPYmplY3QgdHlwZSBpbiBKUy4uLiBoYW5kbGUgdGhlIG9iamVjdCBwYXNzZWQKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYWN0aW9uLnNob3J0Y3V0ID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShhY3Rpb24uc2hvcnRjdXQpICYmIGFjdGlvbi5zaG9ydGN1dCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIGFjdGlvbnNbaV0uc2hvcnRjdXRLZXkgPSBhY3Rpb24uc2hvcnRjdXQ7CiAgICAgICAgICAgICAgY29uc3Qga2V5Ym9hcmRDb21ibyA9IGlzTWFjID8gYWN0aW9uc1tpXS5zaG9ydGN1dC5tYWMgOiBhY3Rpb25zW2ldLnNob3J0Y3V0LndpbmRvd3MgPyBhY3Rpb25zW2ldLnNob3J0Y3V0LndpbmRvd3MgOiBbXTsKICAgICAgICAgICAgICBsZXQgc2NMYWJlbCA9ICcnOwogICAgICAgICAgICAgIGtleWJvYXJkQ29tYm8uZm9yRWFjaCgoa2V5LCBpKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaSA8IGtleWJvYXJkQ29tYm8ubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnbWV0YScpIHsKICAgICAgICAgICAgICAgICAgICBrZXkgPSAnXHUyMzE4JzsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBrZXkgPSB1Y0ZpcnN0KGtleSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgc2NMYWJlbCArPSBgJHtrZXl9YDsKICAgICAgICAgICAgICAgICAgc2NMYWJlbCArPSAnLSc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBzY0xhYmVsICs9IGAke2tleS50b1VwcGVyQ2FzZSgpfWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYWN0aW9uc1tpXS5zaG9ydGN1dExhYmVsID0gKCkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIGAoJHtzY0xhYmVsfSlgOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZXh0ZW5zaW9uRW5oYW5jZW1lbnRzLnB1c2goYWN0aW9uc1tpXSk7CiAgICAgIH0KICAgIH0pOwogIH0KICByZXR1cm4gZXh0ZW5zaW9uRW5oYW5jZW1lbnRzOwp9"},{"version":3,"names":["ActionLocation","CardLocation","ExtensionPoint","isMac","ucFirst","randomStr","_EDIT","_CONFIG","_DETAIL","_LIST","_CREATE","getProductFromRoute","isEqual","checkRouteProduct","$route","locationConfigParam","product","name","checkRouteMode","query","mode","as","includes","endsWith","checkExtensionRouteBinding","locationConfig","context","Object","keys","length","params","paramsToCheck","res","i","param","asArray","Array","isArray","x","hash","urlPath","path","exact","getApplicableExtensionEnhancements","pluginCtx","actionType","uiArea","currRoute","translationCtx","_pluginCtx$$plugin","extensionEnhancements","$plugin","getUIConfig","actions","forEach","action","CARD","CLUSTER_DASHBOARD_CARD","labelKey","label","t","ACTION","TABLE","bulkable","multiple","toLowerCase","HEADER","shortcut","shortcutLabel","toUpperCase","shortcutKey","windows","mac","keyboardCombo","scLabel","key","push"],"sources":["/app/node_modules/@rancher/shell/core/plugin-helpers.js"],"sourcesContent":["import { ActionLocation, CardLocation, ExtensionPoint } from '@shell/core/types';\nimport { isMac } from '@shell/utils/platform';\nimport { ucFirst, randomStr } from '@shell/utils/string';\nimport {\n  _EDIT, _CONFIG, _DETAIL, _LIST, _CREATE\n} from '@shell/config/query-params';\nimport { getProductFromRoute } from '@shell/utils/router';\nimport { isEqual } from '@shell/utils/object';\n\nfunction checkRouteProduct($route, locationConfigParam) {\n  const product = getProductFromRoute($route);\n\n  // alias for the homepage\n  if (locationConfigParam === 'home' && $route.name === 'home') {\n    return true;\n  } else if (locationConfigParam === product) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction checkRouteMode({ name, query }, locationConfigParam) {\n  if (locationConfigParam === _EDIT && query.mode && query.mode === _EDIT && !query.as) {\n    return true;\n  } else if (locationConfigParam === _CONFIG && query.as && query.as === _CONFIG) {\n    return true;\n  } else if (locationConfigParam === _DETAIL && !query.as && name.includes('-id') && (!query.mode || query?.mode !== _EDIT)) {\n    return true;\n    // alias to target all list views\n  } else if (locationConfigParam === _LIST && !name.includes('-id') && name.includes('-resource')) {\n    return true;\n    // alias to target create views\n  } else if (locationConfigParam === _CREATE && name.endsWith('-create')) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction checkExtensionRouteBinding($route, locationConfig, context) {\n  // if no configuration is passed, consider it as global\n  if (!Object.keys(locationConfig).length) {\n    return true;\n  }\n\n  const { params } = $route;\n\n  // \"params\" to be checked based on the locationConfig\n  // This has become overloaded with mode and context\n  const paramsToCheck = [\n    'product',\n    'resource',\n    'namespace',\n    'cluster',\n    'id',\n    'mode',\n    'path',\n    'hash',\n    // url query params\n    'queryParam',\n    // Custom context specific params provided by the extension, not to be confused with location params\n    'context',\n  ];\n\n  let res = true;\n\n  for (let i = 0; i < paramsToCheck.length; i++) {\n    const param = paramsToCheck[i];\n\n    if (locationConfig[param]) {\n      const asArray = Array.isArray(locationConfig[param]) ? locationConfig[param] : [locationConfig[param]];\n\n      for (let x = 0; x < asArray.length; x++) {\n        const locationConfigParam = asArray[x];\n\n        if (locationConfigParam) {\n          if (param === 'hash') {\n            res = $route.hash ? $route.hash.includes(locationConfigParam) : false;\n          // handle \"product\" in a separate way...\n          } else if (param === 'product') {\n            res = checkRouteProduct($route, locationConfigParam);\n          // also handle \"mode\" in a separate way because it mainly depends on query params\n          } else if (param === 'mode') {\n            res = checkRouteMode($route, locationConfigParam);\n          } else if (param === 'resource') {\n            // Match exact resource but also allow resource of '*' to match any resource\n            res = (params[param] && locationConfigParam === '*') || locationConfigParam === params[param];\n          } else if (param === 'context') {\n            // Need all keys and values to match\n            res = isEqual(locationConfigParam, context);\n            // evaluate queryParam in route\n          } else if (param === 'queryParam') {\n            res = isEqual(locationConfigParam, $route.query);\n            // evaluate path in route\n          } else if (param === 'path' && locationConfigParam.urlPath) {\n            if (locationConfigParam.endsWith) {\n              res = $route.path.endsWith(locationConfigParam.urlPath);\n            } else if (!Object.keys(locationConfigParam).includes('exact') || locationConfigParam.exact) {\n              res = locationConfigParam.urlPath === $route.path;\n            } else {\n              res = $route.path.includes(locationConfigParam.urlPath);\n            }\n          } else if (locationConfigParam === params[param]) {\n            res = true;\n          } else {\n            res = false;\n          }\n        }\n\n        // If a single location config param is good then this is an param (aka ['pods', 'configmap'] = pods or configmaps)\n        if (res) {\n          break;\n        }\n      }\n\n      // If a single param (set of location config params) is bad then this is not an acceptable location\n      if (!res) {\n        break;\n      }\n    }\n  }\n\n  return res;\n}\n\nexport function getApplicableExtensionEnhancements(pluginCtx, actionType, uiArea, currRoute, translationCtx = pluginCtx, context) {\n  const extensionEnhancements = [];\n\n  // gate it so that we prevent errors on older versions of dashboard\n  if (pluginCtx.$plugin?.getUIConfig) {\n    const actions = pluginCtx.$plugin.getUIConfig(actionType, uiArea);\n\n    actions.forEach((action, i) => {\n      if (checkExtensionRouteBinding(currRoute, action.locationConfig, context || {})) {\n        // ADD CARD PLUGIN UI ENHANCEMENT\n        if (actionType === ExtensionPoint.CARD) {\n          // intercept to apply translation\n          if (uiArea === CardLocation.CLUSTER_DASHBOARD_CARD && action.labelKey) {\n            actions[i].label = translationCtx.t(action.labelKey);\n          }\n\n        // ADD ACTION PLUGIN UI ENHANCEMENT\n        } else if (actionType === ExtensionPoint.ACTION) {\n          // TABLE ACTION\n          if (uiArea === ActionLocation.TABLE) {\n            // intercept to apply translation\n            if (action.labelKey) {\n              actions[i].label = translationCtx.t(action.labelKey);\n            }\n\n            // bulkable flag\n            actions[i].bulkable = actions[i].multiple || actions[i].bulkable;\n\n            // populate action identifier to prevent errors\n            if (!actions[i].action) {\n              actions[i].action = `custom-table-action-${ randomStr(10).toLowerCase() }`;\n            }\n          }\n\n          // extract simplified shortcut definition on plugin - HEADER ACTION\n          if (uiArea === ActionLocation.HEADER && action.shortcut) {\n            // if it's a string, then assume CTRL for windows and META for mac\n            if (typeof action.shortcut === 'string') {\n              actions[i].shortcutLabel = () => {\n                return isMac ? `(\\u2318-${ action.shortcut.toUpperCase() })` : `(Ctrl-${ action.shortcut.toUpperCase() })`;\n              };\n              actions[i].shortcutKey = { windows: ['ctrl', action.shortcut], mac: ['meta', action.shortcut] };\n            // correct check for an Object type in JS... handle the object passed\n            } else if (typeof action.shortcut === 'object' && !Array.isArray(action.shortcut) && action.shortcut !== null) {\n              actions[i].shortcutKey = action.shortcut;\n              const keyboardCombo = isMac ? actions[i].shortcut.mac : actions[i].shortcut.windows ? actions[i].shortcut.windows : [];\n              let scLabel = '';\n\n              keyboardCombo.forEach((key, i) => {\n                if (i < keyboardCombo.length - 1) {\n                  if (key === 'meta') {\n                    key = '\\u2318';\n                  } else {\n                    key = ucFirst(key);\n                  }\n                  scLabel += `${ key }`;\n                  scLabel += '-';\n                } else {\n                  scLabel += `${ key.toUpperCase() }`;\n                }\n              });\n\n              actions[i].shortcutLabel = () => {\n                return `(${ scLabel })`;\n              };\n            }\n          }\n        }\n\n        extensionEnhancements.push(actions[i]);\n      }\n    });\n  }\n\n  return extensionEnhancements;\n}\n"],"mappings":"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","ignoreList":[]}]}