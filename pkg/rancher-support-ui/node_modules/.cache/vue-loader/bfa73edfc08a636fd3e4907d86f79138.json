{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/node_modules/@rancher/shell/promptRemove/pod.vue?vue&type=script&lang=js","dependencies":[{"path":"/app/node_modules/@rancher/shell/promptRemove/pod.vue","mtime":1764054237091},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1764054260995}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCBDaGVja2JveCBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94L0NoZWNrYm94LnZ1ZSc7CmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdsb2Rhc2gnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQcm9tcHRSZW1vdmVQb2REaWFsb2cnLAoKICBjb21wb25lbnRzOiB7CiAgICBCYW5uZXIsCiAgICBDaGVja2JveAogIH0sCgogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKCiAgICBuYW1lczogewogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6ICAgICBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAoKICAgIGNsb3NlOiB7CiAgICAgIHR5cGU6ICAgICBGdW5jdGlvbiwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCgogICAgZG9uZUxvY2F0aW9uOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4ge30KICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3JzOiAgICAgIFtdLAogICAgICBmb3JjZURlbGV0ZTogZmFsc2UKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdhY3Rpb24tbWVudScsIFsndG9SZW1vdmUnXSksCiAgICAuLi5tYXBHZXR0ZXJzKHsgdDogJ2kxOG4vdCcgfSksCgogICAgcGx1c01vcmUoKSB7CiAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5uYW1lcy5sZW5ndGggLSB0aGlzLm5hbWVzLmxlbmd0aDsKCiAgICAgIHJldHVybiB0aGlzLnQoJ3Byb21wdFJlbW92ZS5hbmRPdGhlcnMnLCB7IGNvdW50IH0pOwogICAgfSwKCiAgICBwb2ROYW1lcygpIHsKICAgICAgcmV0dXJuIHRoaXMubmFtZXMucmVkdWNlKChyZXMsIG5hbWUsIGkpID0+IHsKICAgICAgICBpZiAoaSA+PSA1KSB7CiAgICAgICAgICByZXR1cm4gcmVzOwogICAgICAgIH0KICAgICAgICByZXMgKz0gYDxiPiR7IG5hbWUgfTwvYj5gOwogICAgICAgIGlmIChpID09PSB0aGlzLm5hbWVzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHJlcyArPSB0aGlzLnBsdXNNb3JlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXMgKz0gaSA9PT0gdGhpcy50b1JlbW92ZS5sZW5ndGggLSAyID8gJyBhbmQgJyA6ICcsICc7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9LCAnJyk7CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHJlbW92ZShjb25maXJtKSB7CiAgICAgIGxldCBnb1RvOwoKICAgICAgaWYgKHRoaXMuZG9uZUxvY2F0aW9uKSB7CiAgICAgICAgLy8gZG9uZUxvY2F0aW9uIHdpbGwgcmVjb21wdXRlIHRvIHVuZGVmaW5lZCB3aGVuIGRlbGV0ZSByZXF1ZXN0IGNvbXBsZXRlcwogICAgICAgIGdvVG8gPSB7IC4uLnRoaXMuZG9uZUxvY2F0aW9uIH07CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy52YWx1ZS5tYXAoKHJlc291cmNlKSA9PiB0aGlzLnJlbW92ZVBvZChyZXNvdXJjZSkpKTsKICAgICAgICBpZiAoIGdvVG8gJiYgIWlzRW1wdHkoZ29UbykgKSB7CiAgICAgICAgICB0aGlzLnZhbHVlPy5bMF0/LmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGdvVG8pOwogICAgICAgIH0KICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIHRoaXMuJGVtaXQoJ2Vycm9ycycsIGVycik7CiAgICAgICAgY29uZmlybShmYWxzZSk7CiAgICAgIH0KICAgIH0sCgogICAgcmVtb3ZlUG9kKHBvZCkgewogICAgICBjb25zdCBvcHQgPSB0aGlzLmZvcmNlRGVsZXRlID8gewogICAgICAgIGRhdGE6IHsKICAgICAgICAgIGdyYWNlUGVyaW9kOiAwLAogICAgICAgICAgZm9yY2U6ICAgICAgIHRydWUKICAgICAgICB9CiAgICAgIH0gOiB1bmRlZmluZWQ7CgogICAgICByZXR1cm4gcG9kLnJlbW92ZShvcHQpOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["pod.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"pod.vue","sourceRoot":"../../node_modules/@rancher/shell/promptRemove","sourcesContent":["<script>\nimport { Banner } from '@components/Banner';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport { mapGetters, mapState } from 'vuex';\nimport { isEmpty } from 'lodash';\n\nexport default {\n  name: 'PromptRemovePodDialog',\n\n  components: {\n    Banner,\n    Checkbox\n  },\n\n  props: {\n    value: {\n      type:    Array,\n      default: () => {\n        return [];\n      }\n    },\n\n    names: {\n      type:    Array,\n      default: () => {\n        return [];\n      }\n    },\n\n    type: {\n      type:     String,\n      required: true\n    },\n\n    close: {\n      type:     Function,\n      required: true\n    },\n\n    doneLocation: {\n      type:    Object,\n      default: () => {}\n    }\n  },\n\n  data() {\n    return {\n      errors:      [],\n      forceDelete: false\n    };\n  },\n\n  computed: {\n    ...mapState('action-menu', ['toRemove']),\n    ...mapGetters({ t: 'i18n/t' }),\n\n    plusMore() {\n      const count = this.names.length - this.names.length;\n\n      return this.t('promptRemove.andOthers', { count });\n    },\n\n    podNames() {\n      return this.names.reduce((res, name, i) => {\n        if (i >= 5) {\n          return res;\n        }\n        res += `<b>${ name }</b>`;\n        if (i === this.names.length - 1) {\n          res += this.plusMore;\n        } else {\n          res += i === this.toRemove.length - 2 ? ' and ' : ', ';\n        }\n\n        return res;\n      }, '');\n    },\n  },\n\n  methods: {\n    async remove(confirm) {\n      let goTo;\n\n      if (this.doneLocation) {\n        // doneLocation will recompute to undefined when delete request completes\n        goTo = { ...this.doneLocation };\n      }\n\n      try {\n        await Promise.all(this.value.map((resource) => this.removePod(resource)));\n        if ( goTo && !isEmpty(goTo) ) {\n          this.value?.[0]?.currentRouter().push(goTo);\n        }\n        this.close();\n      } catch (err) {\n        this.$emit('errors', err);\n        confirm(false);\n      }\n    },\n\n    removePod(pod) {\n      const opt = this.forceDelete ? {\n        data: {\n          gracePeriod: 0,\n          force:       true\n        }\n      } : undefined;\n\n      return pod.remove(opt);\n    },\n  }\n};\n</script>\n\n<template>\n  <div class=\"mt-10\">\n    <div class=\"mb-30\">\n      {{ t('promptRemove.attemptingToRemove', { type }) }} <span\n        v-clean-html=\"podNames\"\n        class=\"machine-name\"\n      />\n    </div>\n    <div class=\"mb-30\">\n      <Checkbox\n        v-model=\"forceDelete\"\n        :label=\"t('promptForceRemove.forceDelete')\"\n      />\n    </div>\n    <Banner\n      color=\"warning\"\n      label-key=\"promptForceRemove.podRemoveWarning\"\n    />\n    <Banner\n      v-for=\"(error, i) in errors\"\n      :key=\"i\"\n      class=\"\"\n      color=\"error\"\n      :label=\"error\"\n    />\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  .actions {\n    text-align: right;\n  }\n\n  .machine-name {\n    font-weight: 600;\n  }\n</style>\n"]}]}