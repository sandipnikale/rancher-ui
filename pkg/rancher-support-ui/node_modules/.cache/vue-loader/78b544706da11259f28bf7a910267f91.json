{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/node_modules/@rancher/shell/rancher-components/Form/TextArea/TextAreaAutoGrow.vue?vue&type=script&lang=ts","dependencies":[{"path":"/app/node_modules/@rancher/shell/rancher-components/Form/TextArea/TextAreaAutoGrow.vue","mtime":1764054237091},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910},{"path":"/app/node_modules/ts-loader/index.js","mtime":1764054259329},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1764054260995}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnOwppbXBvcnQgeyBfRURJVCwgX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CgpkZWNsYXJlIG1vZHVsZSAndnVlL3R5cGVzL3Z1ZScgewogIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovCiAgaW50ZXJmYWNlIFZ1ZSB7CiAgICBxdWV1ZVJlc2l6ZSgpOiB2b2lkOwogIH0KfQoKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBpbmhlcml0QXR0cnM6IGZhbHNlLAoKICBwcm9wczogewogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBlZGl0IG1vZGUgZm9yIFRleHQgQXJlYS4KICAgICAqIEB2YWx1ZXMgX0VESVQsIF9WSUVXCiAgICAgKi8KICAgIG1vZGU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiBfRURJVAogICAgfSwKCiAgICAvKioKICAgICAqIFNldHMgdGhlIE1pbmltdW0gaGVpZ2h0IGZvciBUZXh0IEFyZWEuIFByZXZlbnRzIHRoZSBoZWlnaHQgZnJvbSBiZWNvbWluZwogICAgICogc21hbGxlciB0aGFuIHRoZSB2YWx1ZSBzcGVjaWZpZWQgaW4gbWluSGVpZ2h0LgogICAgICovCiAgICBtaW5IZWlnaHQ6IHsKICAgICAgdHlwZTogICAgTnVtYmVyLAogICAgICBkZWZhdWx0OiAyNQogICAgfSwKCiAgICAvKioKICAgICAqIFNldHMgdGhlIG1heGltdW0gaGVpZ2h0IGZvciBUZXh0IEFyZWEuIFByZXZlbnRzIHRoZSBoZWlnaHQgZnJvbSBiZWNvbWluZwogICAgICogbGFyZ2VyIHRoYW4gdGhlIHZhbHVlIHNwZWNpZmllZCBpbiBtYXhIZWlnaHQuCiAgICAgKi8KICAgIG1heEhlaWdodDogewogICAgICB0eXBlOiAgICBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDIwMAogICAgfSwKCiAgICAvKioKICAgICAqIFRleHQgdGhhdCBhcHBlYXJzIGluIHRoZSBUZXh0IEFyZWEgd2hlbiBpdCBoYXMgbm8gdmFsdWUgc2V0LgogICAgICovCiAgICBwbGFjZWhvbGRlcjogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAoKICAgIC8qKgogICAgICogU3BlY2lmaWVzIHdoZXRoZXIgVGV4dCBBcmVhIGlzIHN1YmplY3QgdG8gc3BlbGwgY2hlY2tpbmcgYnkgdGhlCiAgICAgKiB1bmRlcmx5aW5nIGJyb3dzZXIvT1MuCiAgICAgKi8KICAgIHNwZWxsY2hlY2s6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKCiAgICAvKioKICAgICAqIERpc2FibGVzIHRoZSBUZXh0IEFyZWEuCiAgICAgKi8KICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1ckhlaWdodDogdGhpcy5taW5IZWlnaHQsCiAgICAgIG92ZXJmbG93OiAgJ2hpZGRlbicKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIC8qKgogICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgVGV4dCBBcmVhIHNob3VsZCBiZSBkaXNhYmxlZC4KICAgICAqLwogICAgaXNEaXNhYmxlZCgpOiBib29sZWFuIHsKICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0sCgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBoZWlnaHQgdG8gb25lLWxpbmUgZm9yIFNTUiBwYWdlbG9hZCBzbyB0aGF0IGl0J3MgYWxyZWFkeSByaWdodAogICAgICogKHVubGVzcyB0aGUgaW5wdXQgaXMgbG9uZykKICAgICAqLwogICAgc3R5bGUoKTogc3RyaW5nIHsKICAgICAgcmV0dXJuIGBoZWlnaHQ6ICR7IHRoaXMuY3VySGVpZ2h0IH1weDsgb3ZlcmZsb3c6ICR7IHRoaXMub3ZlcmZsb3cgfTtgOwogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICAkYXR0cnM6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcigpIHsKICAgICAgICB0aGlzLnF1ZXVlUmVzaXplKCk7CiAgICAgIH0KICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5xdWV1ZVJlc2l6ZSA9IGRlYm91bmNlKHRoaXMuYXV0b1NpemUsIDEwMCk7CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgICh0aGlzLiRyZWZzLnRhIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5oZWlnaHQgPSBgJHsgdGhpcy5jdXJIZWlnaHQgfXB4YDsKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy5hdXRvU2l6ZSgpOwogICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgLyoqCiAgICAgKiBFbWl0cyB0aGUgaW5wdXQgZXZlbnQgYW5kIHJlc2l6ZXMgdGhlIFRleHQgQXJlYS4KICAgICovCiAgICBvbklucHV0KGV2ZW50OiBFdmVudCk6IHZvaWQgewogICAgICBjb25zdCB2YWwgPSAoZXZlbnQ/LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KT8udmFsdWU7CgogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHZhbCk7CiAgICAgIHRoaXMucXVldWVSZXNpemUoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBHaXZlcyBmb2N1cyB0byB0aGUgVGV4dCBBcmVhLgogICAgICovCiAgICBmb2N1cygpOiB2b2lkIHsKICAgICAgKHRoaXMuJHJlZnM/LnRhIGFzIEhUTUxFbGVtZW50KS5mb2N1cygpOwogICAgfSwKCiAgICAvKioKICAgICAqIFNldHMgdGhlIG92ZXJmbG93WSBhbmQgaGVpZ2h0IG9mIHRoZSBUZXh0IEFyZWEgYmFzZWQgb24gdGhlIGNvbnRlbnQKICAgICAqIGVudGVyZWQgKGNhbGN1bGF0ZWQgdmlhIHNjcm9sbCBoZWlnaHQpLgogICAgICovCiAgICBhdXRvU2l6ZSgpOiB2b2lkIHsKICAgICAgY29uc3QgZWwgPSB0aGlzLiRyZWZzLnRhIGFzIEhUTUxFbGVtZW50OwoKICAgICAgaWYgKCFlbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gJzFweCc7CgogICAgICBjb25zdCBib3JkZXIgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGVsKS5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXJUb3BXaWR0aCcpLCAxMCkgfHwgMCArIHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZWwpLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlckJvdHRvbVdpZHRoJyksIDEwKSB8fCAwOwogICAgICBjb25zdCBuZXUgPSBNYXRoLm1heCh0aGlzLm1pbkhlaWdodCwgTWF0aC5taW4oZWwuc2Nyb2xsSGVpZ2h0ICsgYm9yZGVyLCB0aGlzLm1heEhlaWdodCkpOwoKICAgICAgZWwuc3R5bGUub3ZlcmZsb3dZID0gZWwuc2Nyb2xsSGVpZ2h0ID4gbmV1ID8gJ2F1dG8nIDogJ2hpZGRlbic7CiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IGAkeyBuZXUgfXB4YDsKCiAgICAgIHRoaXMuY3VySGVpZ2h0ID0gbmV1OwogICAgfQogIH0KfSk7Cg=="},{"version":3,"sources":["TextAreaAutoGrow.vue"],"names":[],"mappings":";AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"TextAreaAutoGrow.vue","sourceRoot":"../../node_modules/@rancher/shell/rancher-components/Form/TextArea","sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport debounce from 'lodash/debounce';\nimport { _EDIT, _VIEW } from '@shell/config/query-params';\n\ndeclare module 'vue/types/vue' {\n  /* eslint-disable no-unused-vars */\n  interface Vue {\n    queueResize(): void;\n  }\n}\n\nexport default defineComponent({\n  inheritAttrs: false,\n\n  props: {\n    /**\n     * Sets the edit mode for Text Area.\n     * @values _EDIT, _VIEW\n     */\n    mode: {\n      type:    String,\n      default: _EDIT\n    },\n\n    /**\n     * Sets the Minimum height for Text Area. Prevents the height from becoming\n     * smaller than the value specified in minHeight.\n     */\n    minHeight: {\n      type:    Number,\n      default: 25\n    },\n\n    /**\n     * Sets the maximum height for Text Area. Prevents the height from becoming\n     * larger than the value specified in maxHeight.\n     */\n    maxHeight: {\n      type:    Number,\n      default: 200\n    },\n\n    /**\n     * Text that appears in the Text Area when it has no value set.\n     */\n    placeholder: {\n      type:    String,\n      default: ''\n    },\n\n    /**\n     * Specifies whether Text Area is subject to spell checking by the\n     * underlying browser/OS.\n     */\n    spellcheck: {\n      type:    Boolean,\n      default: true\n    },\n\n    /**\n     * Disables the Text Area.\n     */\n    disabled: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      curHeight: this.minHeight,\n      overflow:  'hidden'\n    };\n  },\n\n  computed: {\n    /**\n     * Determines if the Text Area should be disabled.\n     */\n    isDisabled(): boolean {\n      return this.disabled || this.mode === _VIEW;\n    },\n\n    /**\n     * Sets the height to one-line for SSR pageload so that it's already right\n     * (unless the input is long)\n     */\n    style(): string {\n      return `height: ${ this.curHeight }px; overflow: ${ this.overflow };`;\n    }\n  },\n\n  watch: {\n    $attrs: {\n      deep: true,\n      handler() {\n        this.queueResize();\n      }\n    }\n  },\n\n  created() {\n    this.queueResize = debounce(this.autoSize, 100);\n  },\n\n  mounted() {\n    (this.$refs.ta as HTMLElement).style.height = `${ this.curHeight }px`;\n    this.$nextTick(() => {\n      this.autoSize();\n    });\n  },\n\n  methods: {\n    /**\n     * Emits the input event and resizes the Text Area.\n    */\n    onInput(event: Event): void {\n      const val = (event?.target as HTMLInputElement)?.value;\n\n      this.$emit('input', val);\n      this.queueResize();\n    },\n\n    /**\n     * Gives focus to the Text Area.\n     */\n    focus(): void {\n      (this.$refs?.ta as HTMLElement).focus();\n    },\n\n    /**\n     * Sets the overflowY and height of the Text Area based on the content\n     * entered (calculated via scroll height).\n     */\n    autoSize(): void {\n      const el = this.$refs.ta as HTMLElement;\n\n      if (!el) {\n        return;\n      }\n\n      el.style.height = '1px';\n\n      const border = parseInt(getComputedStyle(el).getPropertyValue('borderTopWidth'), 10) || 0 + parseInt(getComputedStyle(el).getPropertyValue('borderBottomWidth'), 10) || 0;\n      const neu = Math.max(this.minHeight, Math.min(el.scrollHeight + border, this.maxHeight));\n\n      el.style.overflowY = el.scrollHeight > neu ? 'auto' : 'hidden';\n      el.style.height = `${ neu }px`;\n\n      this.curHeight = neu;\n    }\n  }\n});\n</script>\n\n<template>\n  <textarea\n    ref=\"ta\"\n    :data-testid=\"$attrs['data-testid'] ? $attrs['data-testid'] : 'text-area-auto-grow'\"\n    :disabled=\"isDisabled\"\n    :style=\"style\"\n    :placeholder=\"placeholder\"\n    class=\"no-resize no-ease\"\n    v-bind=\"$attrs\"\n    :spellcheck=\"spellcheck\"\n    @paste=\"$emit('paste', $event)\"\n    @input=\"onInput($event)\"\n    @focus=\"$emit('focus', $event)\"\n    @blur=\"$emit('blur', $event)\"\n  />\n</template>\n"]}]}