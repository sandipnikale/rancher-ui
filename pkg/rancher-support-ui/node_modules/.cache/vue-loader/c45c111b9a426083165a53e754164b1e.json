{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/node_modules/@rancher/shell/components/ResourceTable.vue?vue&type=script&lang=js","dependencies":[{"path":"/app/node_modules/@rancher/shell/components/ResourceTable.vue","mtime":1764054237091},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1764054259111},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1764054258910},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1764054259024},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1764054260995}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IG1hcFByZWYsIEdST1VQX1JFU09VUkNFUyB9IGZyb20gJ0BzaGVsbC9zdG9yZS9wcmVmcyc7CmltcG9ydCBCdXR0b25Hcm91cCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9CdXR0b25Hcm91cCc7CmltcG9ydCBTb3J0YWJsZVRhYmxlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1NvcnRhYmxlVGFibGUnOwppbXBvcnQgeyBOQU1FU1BBQ0UsIEFHRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdGFibGUtaGVhZGVycyc7CmltcG9ydCB7IGZpbmRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7IEV4dGVuc2lvblBvaW50LCBUYWJsZUNvbHVtbkxvY2F0aW9uIH0gZnJvbSAnQHNoZWxsL2NvcmUvdHlwZXMnOwppbXBvcnQgeyBnZXRBcHBsaWNhYmxlRXh0ZW5zaW9uRW5oYW5jZW1lbnRzIH0gZnJvbSAnQHNoZWxsL2NvcmUvcGx1Z2luLWhlbHBlcnMnOwoKLy8gRGVmYXVsdCBncm91cC1ieSBpbiB0aGUgY2FzZSB0aGUgZ3JvdXAgc3RvcmVkIGluIHRoZSBwcmVmZXJlbmNlIGRvZXMgbm90IGFwcGx5CmNvbnN0IERFRkFVTFRfR1JPVVAgPSAnbmFtZXNwYWNlJzsKCmV4cG9ydCBjb25zdCBkZWZhdWx0VGFibGVTb3J0R2VuZXJhdGlvbkZuID0gKHNjaGVtYSwgJHN0b3JlKSA9PiB7CiAgaWYgKCAhc2NoZW1hICkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICBjb25zdCByZXNvdXJjZSA9IHNjaGVtYS5pZDsKICBsZXQgc29ydEtleSA9IHJlc291cmNlOwoKICBjb25zdCBpblN0b3JlID0gJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKHJlc291cmNlKTsKICBjb25zdCBnZW5lcmF0aW9uID0gJHN0b3JlLmdldHRlcnNbYCR7IGluU3RvcmUgfS9jdXJyZW50R2VuZXJhdGlvbmBdPy4ocmVzb3VyY2UpOwoKICBpZiAoIGdlbmVyYXRpb24gKSB7CiAgICBzb3J0S2V5ICs9IGAvJHsgZ2VuZXJhdGlvbiB9YDsKICB9CgogIGNvbnN0IG5zRmlsdGVyS2V5ID0gJHN0b3JlLmdldHRlcnNbJ2FjdGl2ZU5hbWVzcGFjZUNhY2hlS2V5J107CgogIGlmICggbnNGaWx0ZXJLZXkgKSB7CiAgICByZXR1cm4gYCR7IHNvcnRLZXkgfS8keyBuc0ZpbHRlcktleSB9YDsKICB9CgogIC8vIGNvdmVycyBjYXNlIHdoZXJlIHdlIGhhdmUgbm8gY3VycmVudCBjbHVzdGVyJ3MgbnMgY2FjaGUKICByZXR1cm4gc29ydEtleTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKCiAgbmFtZTogJ1Jlc291cmNlVGFibGUnLAoKICBjb21wb25lbnRzOiB7IEJ1dHRvbkdyb3VwLCBTb3J0YWJsZVRhYmxlIH0sCgogIHByb3BzOiB7CiAgICBzY2hlbWE6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKCiAgICByb3dzOiB7CiAgICAgIHR5cGU6ICAgICBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCgogICAgbG9hZGluZzogewogICAgICB0eXBlOiAgICAgQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9LAoKICAgIGFsdExvYWRpbmc6IHsKICAgICAgdHlwZTogICAgIEJvb2xlYW4sCiAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgfSwKCiAgICBrZXlGaWVsZDogewogICAgICAvLyBGaWVsZCB0aGF0IGlzIHVuaXF1ZSBmb3IgZWFjaCByb3cuCiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ19rZXknLAogICAgfSwKCiAgICBoZWFkZXJzOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKCiAgICBncm91cEJ5OiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKCiAgICBuYW1lc3BhY2VkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IG51bGwsIC8vIEF1dG9tYXRpYyBmcm9tIHNjaGVtYQogICAgfSwKCiAgICBzZWFyY2g6IHsKICAgICAgLy8gU2hvdyBzZWFyY2ggaW5wdXQgdG8gZmlsdGVyIHJvd3MKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKCiAgICB0YWJsZUFjdGlvbnM6IHsKICAgICAgLy8gU2hvdyBidWxrIHRhYmxlIGFjdGlvbnMKICAgICAgdHlwZTogICAgW0Jvb2xlYW4sIG51bGxdLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAoKICAgIHBhZ2luZ0xhYmVsOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ3NvcnRhYmxlVGFibGUucGFnaW5nLnJlc291cmNlJywKICAgIH0sCgogICAgLyoqCiAgICAgKiBBZGRpdGlvbmFsIHBhcmFtcyB0byBwYXNzIHRvIHRoZSBwYWdpbmdMYWJlbCB0cmFuc2xhdGlvbgogICAgICovCiAgICBwYWdpbmdQYXJhbXM6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKCiAgICByb3dBY3Rpb25zOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAoKICAgIGdyb3VwYWJsZTogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBudWxsLCAvLyBOdWxsOiBhdXRvIGJhc2VkIG9uIG5hbWVzcGFjZWQgYW5kIHR5cGUgY3VzdG9tIGdyb3VwaW5ncwogICAgfSwKCiAgICBncm91cFRvb2x0aXA6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAncmVzb3VyY2VUYWJsZS5ncm91cEJ5Lm5hbWVzcGFjZScsCiAgICB9LAoKICAgIG92ZXJmbG93WDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIG92ZXJmbG93WTogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHNvcnRHZW5lcmF0aW9uRm46IHsKICAgICAgdHlwZTogICAgRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgZ2V0Q3VzdG9tRGV0YWlsTGluazogewogICAgICB0eXBlOiAgICBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKCiAgICBpZ25vcmVGaWx0ZXI6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBoYXNBZHZhbmNlZEZpbHRlcmluZzogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGFkdkZpbHRlckhpZGVMYWJlbHNBc0NvbHM6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBhZHZGaWx0ZXJQcmV2ZW50RmlsdGVyaW5nTGFiZWxzOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLyoqCiAgICAgKiBBbGxvd3MgZm9yIHRoZSB1c2FnZSBvZiBhIHF1ZXJ5IHBhcmFtIHRvIHdvcmsgZm9yIHNpbXBsZSBmaWx0ZXJpbmcgKHEpCiAgICAgKi8KICAgIHVzZVF1ZXJ5UGFyYW1zRm9yU2ltcGxlRmlsdGVyaW5nOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLyoqCiAgICAgKiBNYW5hdWwgZm9yY2UgdGhlIHVwZGF0ZSBvZiBsaXZlIGFuZCBkZWxheWVkIGNlbGxzLiBDaGFuZ2UgdGhpcyBudW1iZXIgdG8ga2ljayBvZmYgdGhlIHVwZGF0ZQogICAgICovCiAgICBmb3JjZVVwZGF0ZUxpdmVBbmREZWxheWVkOiB7CiAgICAgIHR5cGU6ICAgIE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKCiAgICBleHRlcm5hbFBhZ2luYXRpb25FbmFibGVkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAoKICAgIGV4dGVybmFsUGFnaW5hdGlvblJlc3VsdDogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgLyoqCiAgICAgKiB2LXNob3J0a2V5IHByZXZlbnRzIHRoZSBldmVudCdzIHByb3BhZ2F0aW9uOgogICAgICogaHR0cHM6Ly9naXRodWIuY29tL2Znci1hcmF1am8vdnVlLXNob3J0a2V5L2Jsb2IvNTVkODAyZWEzMDVjYWRjYzJlYTk3MGI1NWEzYjhiODZjN2I0NGMwNS9zcmMvaW5kZXguanMjTDE1Ni1MMTU3CiAgICAgKgogICAgICogJ0VudGVyJyBrZXkgcHJlc3MgaXMgaGFuZGxlZCB2aWEgZXZlbnQgbGlzdGVuZXIgaW4gb3JkZXIgdG8gYWxsb3cgdGhlIGV2ZW50IHByb3BhZ2F0aW9uCiAgICAgKi8KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuaGFuZGxlRW50ZXJLZXlQcmVzcyk7CiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuaGFuZGxlRW50ZXJLZXlQcmVzcyk7CiAgfSwKCiAgZGF0YSgpIHsKICAgIC8vIENvbmZpcm0gd2hpY2ggc3RvcmUgd2UncmUgaW4sIGlmIHNjaGVtYSBpc24ndCBhdmFpbGFibGUgd2UncmUgcHJvYmFibHkgc2hvd2luZyBhIGxpc3Qgd2l0aCBkaWZmZXJlbnQgdHlwZXMKICAgIGNvbnN0IGluU3RvcmUgPSB0aGlzLnNjaGVtYT8uaWQgPyB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50U3RvcmUnXSh0aGlzLnNjaGVtYS5pZCkgOiB1bmRlZmluZWQ7CgogICAgcmV0dXJuIHsgaW5TdG9yZSB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBvcHRpb25zKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgdHlwZS1tYXAvb3B0aW9uc0ZvcmBdKHRoaXMuc2NoZW1hLCB0aGlzLmV4dGVybmFsUGFnaW5hdGlvbkVuYWJsZWQpOwogICAgfSwKCiAgICBfbGlzdEdyb3VwTWFwcGVkKCkgewogICAgICByZXR1cm4gdGhpcy5vcHRpb25zPy5saXN0R3JvdXBzPy5yZWR1Y2UoKGFjYywgZ3JwKSA9PiB7CiAgICAgICAgYWNjW2dycC52YWx1ZV0gPSBncnA7CgogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0sIHt9KTsKICAgIH0sCgogICAgX21hbmRhdG9yeVNvcnQoKSB7CiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM/Lmxpc3RNYW5kYXRvcnlTb3J0OwogICAgfSwKCiAgICAuLi5tYXBHZXR0ZXJzKFsnY3VycmVudFByb2R1Y3QnXSksCgogICAgaXNOYW1lc3BhY2VkKCkgewogICAgICBpZiAoIHRoaXMubmFtZXNwYWNlZCAhPT0gbnVsbCApIHsKICAgICAgICByZXR1cm4gdGhpcy5uYW1lc3BhY2VkOwogICAgICB9CgogICAgICByZXR1cm4gISFnZXQoIHRoaXMuc2NoZW1hLCAnYXR0cmlidXRlcy5uYW1lc3BhY2VkJyk7CiAgICB9LAoKICAgIHNob3dOYW1lc3BhY2VDb2x1bW4oKSB7CiAgICAgIGNvbnN0IGdyb3VwTmFtZXNwYWNlcyA9IHRoaXMuZ3JvdXAgPT09ICduYW1lc3BhY2UnOwogICAgICBjb25zdCBvdXQgPSAhdGhpcy5zaG93R3JvdXBpbmcgfHwgIWdyb3VwTmFtZXNwYWNlczsKCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIF9zaG93QnVsa0FjdGlvbnMoKSB7CiAgICAgIGlmICh0aGlzLnRhYmxlQWN0aW9ucyAhPT0gbnVsbCkgewogICAgICAgIHJldHVybiB0aGlzLnRhYmxlQWN0aW9uczsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNjaGVtYSkgewogICAgICAgIGNvbnN0IGhpZGVUYWJsZUFjdGlvbnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9oaWRlQnVsa0FjdGlvbnNGb3InXSh0aGlzLnNjaGVtYSk7CgogICAgICAgIHJldHVybiAhaGlkZVRhYmxlQWN0aW9uczsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKCiAgICBfaGVhZGVycygpIHsKICAgICAgbGV0IGhlYWRlcnM7CiAgICAgIGNvbnN0IHNob3dOYW1lc3BhY2UgPSB0aGlzLnNob3dOYW1lc3BhY2VDb2x1bW47CgogICAgICBpZiAoIHRoaXMuaGVhZGVycyApIHsKICAgICAgICBoZWFkZXJzID0gdGhpcy5oZWFkZXJzLnNsaWNlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGVhZGVycyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2hlYWRlcnNGb3InXSh0aGlzLnNjaGVtYSwgdGhpcy5leHRlcm5hbFBhZ2luYXRpb25FbmFibGVkKTsKICAgICAgfQoKICAgICAgLy8gYWRkIGN1c3RvbSB0YWJsZSBjb2x1bW5zIHByb3ZpZGVkIGJ5IHRoZSBleHRlbnNpb25zIEV4dGVuc2lvblBvaW50LlRBQkxFX0NPTCBob29rCiAgICAgIC8vIGdhdGUgaXQgc28gdGhhdCB3ZSBwcmV2ZW50IGVycm9ycyBvbiBvbGRlciB2ZXJzaW9ucyBvZiBkYXNoYm9hcmQKICAgICAgaWYgKHRoaXMuJHN0b3JlLiRwbHVnaW4/LmdldFVJQ29uZmlnKSB7CiAgICAgICAgY29uc3QgZXh0ZW5zaW9uQ29scyA9IGdldEFwcGxpY2FibGVFeHRlbnNpb25FbmhhbmNlbWVudHModGhpcywgRXh0ZW5zaW9uUG9pbnQuVEFCTEVfQ09MLCBUYWJsZUNvbHVtbkxvY2F0aW9uLlJFU09VUkNFLCB0aGlzLiRyb3V0ZSk7CgogICAgICAgIC8vIFRyeSBhbmQgaW5zZXJ0IHRoZSBjb2x1bW5zIGJlZm9yZSB0aGUgQWdlIGNvbHVtbgogICAgICAgIGxldCBpbnNlcnRQb3NpdGlvbiA9IGhlYWRlcnMubGVuZ3RoOwoKICAgICAgICBpZiAoaGVhZGVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBjb25zdCBhZ2VDb2xJbmRleCA9IGhlYWRlcnMuZmluZEluZGV4KChoKSA9PiBoLm5hbWUgPT09IEFHRS5uYW1lKTsKCiAgICAgICAgICBpZiAoYWdlQ29sSW5kZXggPj0gMCkgewogICAgICAgICAgICBpbnNlcnRQb3NpdGlvbiA9IGFnZUNvbEluZGV4OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gd2UndmUgZm91bmQgc29tZSBsYWJlbHMgd2l0aCAnICcsIHdoaWNoIGlzbid0IG5lY2Vzc2FyaWx5IGVtcHR5IChleHBsb3JlIGFjdGlvbi9idXR0b24pCiAgICAgICAgICAgIC8vIGlmIHdlIGFyZSB0byBhZGQgY29scywgbGV0J3MgcHVzaCB0aGVtIGJlZm9yZSB0aGVzZSBzbyB0aGF0IHRoZSBVSSBkb2Vzbid0IGxvb2sgd2VpcmQKICAgICAgICAgICAgY29uc3QgbGFzdFZpYWJsZUNvbEluZGV4ID0gaGVhZGVycy5maW5kSW5kZXgoKGgpID0+ICghaC5sYWJlbCB8fCAhaC5sYWJlbD8udHJpbSgpKSAmJiAoIWgubGFiZWxLZXkgfHwgIWgubGFiZWxLZXk/LnRyaW0oKSkpOwoKICAgICAgICAgICAgaWYgKGxhc3RWaWFibGVDb2xJbmRleCA+PSAwKSB7CiAgICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb24gPSBsYXN0VmlhYmxlQ29sSW5kZXg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIGFkZGluZyBleHRlbnNpb24gZGVmaW5lZCBjb2xzIHRvIHRoZSBjb3JyZWN0IGhlYWRlciBjb25maWcKICAgICAgICBleHRlbnNpb25Db2xzLmZvckVhY2goKGNvbCkgPT4gewogICAgICAgICAgLy8gd2UgbmVlZCB0aGUgJ3ZhbHVlJyBwcm9wIHRvIGJlIHBvcHVsYXRlZCBpbiBvcmRlciBmb3IgdGhlIHJvd3MgdG8gc2hvdyB0aGUgdmFsdWVzCiAgICAgICAgICBpZiAoIWNvbC52YWx1ZSAmJiBjb2wuZ2V0VmFsdWUpIHsKICAgICAgICAgICAgY29sLnZhbHVlID0gY29sLmdldFZhbHVlOwogICAgICAgICAgfQogICAgICAgICAgaGVhZGVycy5zcGxpY2UoaW5zZXJ0UG9zaXRpb24sIDAsIGNvbCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIElmIG9ubHkgb25lIG5hbWVzcGFjZSBpcyBzZWxlY3RlZCwgaGlkZSB0aGUgbmFtZXNwYWNlIGNvbHVtbgogICAgICBpZiAoICFzaG93TmFtZXNwYWNlICkgewogICAgICAgIGNvbnN0IGlkeCA9IGhlYWRlcnMuZmluZEluZGV4KChoZWFkZXIpID0+IGhlYWRlci5uYW1lID09PSBOQU1FU1BBQ0UubmFtZSk7CgogICAgICAgIGlmICggaWR4ID49IDAgKSB7CiAgICAgICAgICBoZWFkZXJzLnNwbGljZShpZHgsIDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gSWYgd2UgYXJlIGdyb3VwaW5nIGJ5IGEgY3VzdG9tIGdyb3VwLCBpdCBtYXkgc3BlY2lmeSB0aGF0IHdlIGhpZGUgYSBzcGVjaWZpYyBjb2x1bW4KICAgICAgY29uc3QgY3VzdG9tID0gdGhpcy5fbGlzdEdyb3VwTWFwcGVkPy5bdGhpcy5ncm91cF07CgogICAgICBpZiAoY3VzdG9tPy5oaWRlQ29sdW1uKSB7CiAgICAgICAgY29uc3QgaWR4ID0gaGVhZGVycy5maW5kSW5kZXgoKGhlYWRlcikgPT4gaGVhZGVyLm5hbWUgPT09IGN1c3RvbS5oaWRlQ29sdW1uKTsKCiAgICAgICAgaWYgKCBpZHggPj0gMCApIHsKICAgICAgICAgIGhlYWRlcnMuc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gaGVhZGVyczsKICAgIH0sCgogICAgLyoqCiAgICAgKiBUYWtlIHJvd3MgYW5kIGZpbHRlciBvdXQgZW50cmllcyBnaXZlbiB0aGUgbmFtZXNwYWNlIGZpbHRlcgogICAgICovCiAgICBmaWx0ZXJlZFJvd3MoKSB7CiAgICAgIGNvbnN0IGlzQWxsID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaXNBbGxOYW1lc3BhY2VzJ107CgogICAgICAvLyBEbyB3ZSBuZWVkIHRvIGZpbHRlciBieSBuYW1lc3BhY2UgbGlrZSB0aGluZ3M/CiAgICAgIGlmICgKICAgICAgICAhdGhpcy5pc05hbWVzcGFjZWQgfHwgLy8gUmVzb3VyY2UgdHlwZSBpc24ndCBuYW1lc3BhY2VkCiAgICAgICAgdGhpcy5pZ25vcmVGaWx0ZXIgfHwgLy8gQ29tcG9uZW50IG93bmVyIHN0cmljdGx5IHN0YXRlcyBubyBmaWx0ZXJpbmcKICAgICAgICB0aGlzLmV4dGVybmFsUGFnaW5hdGlvbkVuYWJsZWQgfHwKICAgICAgICAoaXNBbGwgJiYgIXRoaXMuY3VycmVudFByb2R1Y3Q/LmhpZGVTeXN0ZW1SZXNvdXJjZXMpIHx8IC8vIE5lZWQgYWxsCiAgICAgICAgKHRoaXMuaW5TdG9yZSA/IHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7IHRoaXMuaW5TdG9yZSB9L2hhdmVOYW1lc3BhY2VgXSh0aGlzLnNjaGVtYS5pZCk/Lmxlbmd0aCA6IGZhbHNlKS8vIFN0b3JlIHJlcG9ydHMgdHlwZSBoYXMgbmFtZXNwYWNlIGZpbHRlciwgc28gcm93cyBhbHJlYWR5IGNvbnRhaW4gdGhlIGNvcnJlY3RseSBmaWx0ZXJlZCByZXNvdXJjZXMKICAgICAgKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucm93cyB8fCBbXTsKICAgICAgfQoKICAgICAgY29uc3QgaW5jbHVkZWROYW1lc3BhY2VzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbmFtZXNwYWNlcyddKCk7CgogICAgICAvLyBTaG91bGRuJ3QgaGFwcGVuLCBidXQgZG9lcyBmb3IgcmVzb3VyY2VzIGxpa2UgbWFuYWdlbWVudC5jYXR0bGUuaW8ucHJlZmVyZW5jZQogICAgICBpZiAoIXRoaXMucm93cykgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgICAgY29uc3QgaGF2ZUFsbE5hbWVzcGFjZSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2hhdmVBbGxOYW1lc3BhY2UnXTsKCiAgICAgIHJldHVybiB0aGlzLnJvd3MuZmlsdGVyKChyb3cpID0+IHsKICAgICAgICBpZiAodGhpcy5jdXJyZW50UHJvZHVjdD8uaGlkZVN5c3RlbVJlc291cmNlcyAmJiB0aGlzLmlzTmFtZXNwYWNlZCkgewogICAgICAgICAgcmV0dXJuICEhaW5jbHVkZWROYW1lc3BhY2VzW3Jvdy5tZXRhZGF0YS5uYW1lc3BhY2VdICYmICFyb3cuaXNTeXN0ZW1SZXNvdXJjZTsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzTmFtZXNwYWNlZCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChoYXZlQWxsTmFtZXNwYWNlKSB7CiAgICAgICAgICAvLyBgcm93c2Agb25seSBjb250YWlucyByZXNvdXJjZSBmcm9tIGEgc2luZ2xlIG5hbWVzcGFjZQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAhIWluY2x1ZGVkTmFtZXNwYWNlc1tyb3cubWV0YWRhdGEubmFtZXNwYWNlXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBfZ3JvdXA6IG1hcFByZWYoR1JPVVBfUkVTT1VSQ0VTKSwKCiAgICAvLyBUaGUgZ3JvdXAgc3RvcmVkIGluIHRoZSBwcmVmZXJlbmNlIChhYm92ZSkgbWlnaHQgbm90IGJlIHZhbGlkIGZvciB0aGlzIHJlc291cmNlIHRhYmxlIC0gc28gZW5zdXJlIHdlCiAgICAvLyBjaG9vc2UgYSBncm91cCB0aGF0IGlzIGFwcGxpY2FibGUgKHRoZSBkZWZhdWx0KQogICAgLy8gVGhpcyBzYXZlcyB1cyBmcm9tIGhhdmluZyB0byBzdG9yZSBhIGdyb3VwIHByZWZlcmVuY2UgcGVyIHJlc291cmNlIHR5cGUgLSBnaXZlbiB0aGF0IGN1c3RvbSBncm91cGluZ3MgYWVyIG5vdCB1c2VkIG11Y2gKICAgIC8vIGFuZCBpdCBmZWVscyBsaWtlIGEgZ29vZCBVWCB0byBiZSBhYmxlIHRvIGtlZXAgdGhlIG5hbWVzcGFjZS9mbGF0IGdyb3VwaW5nIGFjcm9zcyB0YWJsZXMKICAgIGdyb3VwOiB7CiAgICAgIGdldCgpIHsKICAgICAgICAvLyBDaGVjayBncm91cCBpcyB2YWxpZAogICAgICAgIGNvbnN0IGV4aXN0cyA9IHRoaXMuZ3JvdXBPcHRpb25zLmZpbmQoKGcpID0+IGcudmFsdWUgPT09IHRoaXMuX2dyb3VwKTsKCiAgICAgICAgaWYgKCFleGlzdHMpIHsKICAgICAgICAgIC8vIEF0dGVtcHQgdG8gZmluZCB0aGUgZGVmYXVsdCBvcHRpb24gaW4gYXZhaWxhYmxlIG9wdGlvbnMuLi4KICAgICAgICAgIC8vIGlmIG5vdCB1c2UgdGhlIGZpcnN0IHZhbHVlIGluIHRoZSBvcHRpb25zIGNvbGxlY3Rpb24uLi4KICAgICAgICAgIC8vIGFuZCBpZiBub3QgdGhhdCBqdXN0IGZhbGwgYmFjayB0byB0aGUgZGVmYXVsdAogICAgICAgICAgaWYgKHRoaXMuZ3JvdXBPcHRpb25zLmZpbmQoKGcpID0+IGcudmFsdWUgPT09IERFRkFVTFRfR1JPVVApKSB7CiAgICAgICAgICAgIHJldHVybiBERUZBVUxUX0dST1VQOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0aGlzLmdyb3VwT3B0aW9uc1swXT8udmFsdWUgfHwgREVGQVVMVF9HUk9VUDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLl9ncm91cDsKICAgICAgfSwKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy5fZ3JvdXAgPSB2YWx1ZTsKICAgICAgfQogICAgfSwKCiAgICBzaG93R3JvdXBpbmcoKSB7CiAgICAgIGlmICggdGhpcy5ncm91cGFibGUgPT09IG51bGwgKSB7CiAgICAgICAgY29uc3QgbmFtZXNwYWNlR3JvdXBhYmxlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaXNNdWx0aXBsZU5hbWVzcGFjZXMnXSAmJiB0aGlzLmlzTmFtZXNwYWNlZDsKICAgICAgICBjb25zdCBjdXN0b21Hcm91cGFibGUgPSAhIXRoaXMub3B0aW9ucz8ubGlzdEdyb3Vwcz8ubGVuZ3RoOwoKICAgICAgICByZXR1cm4gbmFtZXNwYWNlR3JvdXBhYmxlIHx8IGN1c3RvbUdyb3VwYWJsZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZ3JvdXBhYmxlIHx8IGZhbHNlOwogICAgfSwKCiAgICBjb21wdXRlZEdyb3VwQnkoKSB7CiAgICAgIGlmICggdGhpcy5ncm91cEJ5ICkgewogICAgICAgIC8vIFRoaXMgcHJvYmFibHkgY29tZXMgZnJvbSB0aGUgdHlwZS1tYXAgY29uZmlnIGZvciB0aGUgcmVzb3VyY2UgKHNlZSBSZXNvdXJjZUxpc3QpCiAgICAgICAgcmV0dXJuIHRoaXMuZ3JvdXBCeTsKICAgICAgfQoKICAgICAgaWYgKCB0aGlzLmdyb3VwID09PSAnbmFtZXNwYWNlJyAmJiB0aGlzLnNob3dHcm91cGluZyApIHsKICAgICAgICAvLyBUaGlzIHN3aXRjaGVzIHRvIGdyb3VwIHJvd3MgYnkgYSBrZXkgd2hpY2ggaXMgdGhlIGxhYmVsIGZvciB0aGUgZ3JvdXAgKD8/KQogICAgICAgIHJldHVybiAnZ3JvdXBCeUxhYmVsJzsKICAgICAgfQoKICAgICAgY29uc3QgY3VzdG9tID0gdGhpcy5fbGlzdEdyb3VwTWFwcGVkPy5bdGhpcy5ncm91cF07CgogICAgICBpZiAoY3VzdG9tPy5maWVsZCkgewogICAgICAgIC8vIE92ZXJyaWRlIHRoZSBub3JtYWwgZmlsdGVyaW5nCiAgICAgICAgcmV0dXJuIGN1c3RvbS5maWVsZDsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAoKICAgIGdyb3VwT3B0aW9ucygpIHsKICAgICAgLy8gSWdub3JlIHRoZSBkZWZhdWx0cyBiZWxvdywgd2UgaGF2ZSBhbiBvdmVycmlkZSBzZXQgb2YgZ3JvdXBzCiAgICAgIC8vIFJFUExBQ0UgKGluc3RlYWQgb2YgU1VQUExFTUVOVCkgZGVmYXVsdHMgd2l0aCBsaXN0R3JvdXBzIChnaXZlbiBsaXN0R3JvdXBzV2lsbE92ZXJyaWRlIGlzIHRydWUpCiAgICAgIGlmICh0aGlzLm9wdGlvbnM/Lmxpc3RHcm91cHNXaWxsT3ZlcnJpZGUgJiYgISF0aGlzLm9wdGlvbnM/Lmxpc3RHcm91cHM/Lmxlbmd0aCkgewogICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM/Lmxpc3RHcm91cHM7CiAgICAgIH0KCiAgICAgIGNvbnN0IHN0YW5kYXJkID0gWwogICAgICAgIHsKICAgICAgICAgIHRvb2x0aXBLZXk6ICdyZXNvdXJjZVRhYmxlLmdyb3VwQnkubm9uZScsCiAgICAgICAgICBpY29uOiAgICAgICAnaWNvbi1saXN0LWZsYXQnLAogICAgICAgICAgdmFsdWU6ICAgICAgJ25vbmUnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdG9vbHRpcEtleTogdGhpcy5ncm91cFRvb2x0aXAsCiAgICAgICAgICBpY29uOiAgICAgICAnaWNvbi1mb2xkZXInLAogICAgICAgICAgdmFsdWU6ICAgICAgJ25hbWVzcGFjZScsCiAgICAgICAgfSwKICAgICAgXTsKCiAgICAgIC8vIFNVUFBMRU1FTlQgKGluc3RlYWQgb2YgUkVQTEFDRSkgZGVmYXVsdHMgd2l0aCBsaXN0R3JvdXBzIChnaXZlbiBsaXN0R3JvdXBzV2lsbE92ZXJyaWRlIGlzIGZhbHNlKQogICAgICBpZiAoISF0aGlzLm9wdGlvbnM/Lmxpc3RHcm91cHM/Lmxlbmd0aCkgewogICAgICAgIHJldHVybiBzdGFuZGFyZC5jb25jYXQodGhpcy5vcHRpb25zLmxpc3RHcm91cHMpOwogICAgICB9CgogICAgICByZXR1cm4gc3RhbmRhcmQ7CiAgICB9LAoKICAgIHBhcnNlZFBhZ2luZ1BhcmFtcygpIHsKICAgICAgaWYgKHRoaXMucGFnaW5nUGFyYW1zKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGFnaW5nUGFyYW1zOwogICAgICB9CgogICAgICBpZiAoICF0aGlzLnNjaGVtYSApIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc2luZ3VsYXJMYWJlbDogJycsCiAgICAgICAgICBwbHVyYWxMYWJlbDogICAnJwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgc2luZ3VsYXJMYWJlbDogdGhpcy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvbGFiZWxGb3InXSh0aGlzLnNjaGVtYSksCiAgICAgICAgcGx1cmFsTGFiZWw6ICAgdGhpcy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvbGFiZWxGb3InXSh0aGlzLnNjaGVtYSwgOTkpLAogICAgICB9OwogICAgfSwKCiAgfSwKCiAgbWV0aG9kczogewogICAga2V5QWN0aW9uKGFjdGlvbikgewogICAgICBjb25zdCB0YWJsZSA9IHRoaXMuJHJlZnMudGFibGU7CgogICAgICBpZiAoICF0YWJsZSApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHRhYmxlLnNlbGVjdGVkUm93czsKCiAgICAgIGlmICggYWN0aW9uID09PSAncmVtb3ZlJyApIHsKICAgICAgICBjb25zdCBhY3QgPSBmaW5kQnkodGFibGUuYXZhaWxhYmxlQWN0aW9ucywgJ2FjdGlvbicsICdwcm9tcHRSZW1vdmUnKTsKCiAgICAgICAgaWYgKCBhY3QgKSB7CiAgICAgICAgICB0YWJsZS5zZXRCdWxrQWN0aW9uT2ZJbnRlcmVzdChhY3QpOwogICAgICAgICAgdGFibGUuYXBwbHlUYWJsZUFjdGlvbihhY3QpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIHNlbGVjdGlvbi5sZW5ndGggIT09IDEgKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzd2l0Y2ggKCBhY3Rpb24gKSB7CiAgICAgIGNhc2UgJ2RldGFpbCc6CiAgICAgICAgc2VsZWN0aW9uWzBdLmdvVG9EZXRhaWwoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZWRpdCc6CiAgICAgICAgc2VsZWN0aW9uWzBdLmdvVG9FZGl0KCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3lhbWwnOgogICAgICAgIHNlbGVjdGlvblswXS5nb1RvVmlld1lhbWwoKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKCiAgICBjbGVhclNlbGVjdGlvbigpIHsKICAgICAgdGhpcy4kcmVmcy50YWJsZS5jbGVhclNlbGVjdGlvbigpOwogICAgfSwKCiAgICBzYWZlU29ydEdlbmVyYXRpb25GbigpIHsKICAgICAgaWYgKHRoaXMuc29ydEdlbmVyYXRpb25GbikgewogICAgICAgIHJldHVybiB0aGlzLnNvcnRHZW5lcmF0aW9uRm4odGhpcy5zY2hlbWEsIHRoaXMuJHN0b3JlKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRlZmF1bHRUYWJsZVNvcnRHZW5lcmF0aW9uRm4odGhpcy5zY2hlbWEsIHRoaXMuJHN0b3JlKTsKICAgIH0sCgogICAgaGFuZGxlQWN0aW9uQnV0dG9uQ2xpY2soZXZlbnQpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xpY2tlZEFjdGlvbkJ1dHRvbicsIGV2ZW50KTsKICAgIH0sCgogICAgaGFuZGxlRW50ZXJLZXlQcmVzcyhldmVudCkgewogICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7CiAgICAgICAgdGhpcy5rZXlBY3Rpb24oJ2RldGFpbCcpOwogICAgICB9CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["ResourceTable.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResourceTable.vue","sourceRoot":"../../node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { get } from '@shell/utils/object';\nimport { mapPref, GROUP_RESOURCES } from '@shell/store/prefs';\nimport ButtonGroup from '@shell/components/ButtonGroup';\nimport SortableTable from '@shell/components/SortableTable';\nimport { NAMESPACE, AGE } from '@shell/config/table-headers';\nimport { findBy } from '@shell/utils/array';\nimport { ExtensionPoint, TableColumnLocation } from '@shell/core/types';\nimport { getApplicableExtensionEnhancements } from '@shell/core/plugin-helpers';\n\n// Default group-by in the case the group stored in the preference does not apply\nconst DEFAULT_GROUP = 'namespace';\n\nexport const defaultTableSortGenerationFn = (schema, $store) => {\n  if ( !schema ) {\n    return null;\n  }\n\n  const resource = schema.id;\n  let sortKey = resource;\n\n  const inStore = $store.getters['currentStore'](resource);\n  const generation = $store.getters[`${ inStore }/currentGeneration`]?.(resource);\n\n  if ( generation ) {\n    sortKey += `/${ generation }`;\n  }\n\n  const nsFilterKey = $store.getters['activeNamespaceCacheKey'];\n\n  if ( nsFilterKey ) {\n    return `${ sortKey }/${ nsFilterKey }`;\n  }\n\n  // covers case where we have no current cluster's ns cache\n  return sortKey;\n};\n\nexport default {\n\n  name: 'ResourceTable',\n\n  components: { ButtonGroup, SortableTable },\n\n  props: {\n    schema: {\n      type:    Object,\n      default: null,\n    },\n\n    rows: {\n      type:     Array,\n      required: true\n    },\n\n    loading: {\n      type:     Boolean,\n      required: false\n    },\n\n    altLoading: {\n      type:     Boolean,\n      required: false\n    },\n\n    keyField: {\n      // Field that is unique for each row.\n      type:    String,\n      default: '_key',\n    },\n\n    headers: {\n      type:    Array,\n      default: null,\n    },\n\n    groupBy: {\n      type:    String,\n      default: null\n    },\n\n    namespaced: {\n      type:    Boolean,\n      default: null, // Automatic from schema\n    },\n\n    search: {\n      // Show search input to filter rows\n      type:    Boolean,\n      default: true\n    },\n\n    tableActions: {\n      // Show bulk table actions\n      type:    [Boolean, null],\n      default: null\n    },\n\n    pagingLabel: {\n      type:    String,\n      default: 'sortableTable.paging.resource',\n    },\n\n    /**\n     * Additional params to pass to the pagingLabel translation\n     */\n    pagingParams: {\n      type:    Object,\n      default: null,\n    },\n\n    rowActions: {\n      type:    Boolean,\n      default: true,\n    },\n\n    groupable: {\n      type:    Boolean,\n      default: null, // Null: auto based on namespaced and type custom groupings\n    },\n\n    groupTooltip: {\n      type:    String,\n      default: 'resourceTable.groupBy.namespace',\n    },\n\n    overflowX: {\n      type:    Boolean,\n      default: false\n    },\n    overflowY: {\n      type:    Boolean,\n      default: false\n    },\n    sortGenerationFn: {\n      type:    Function,\n      default: null,\n    },\n    getCustomDetailLink: {\n      type:    Function,\n      default: null\n    },\n\n    ignoreFilter: {\n      type:    Boolean,\n      default: false\n    },\n    hasAdvancedFiltering: {\n      type:    Boolean,\n      default: false\n    },\n    advFilterHideLabelsAsCols: {\n      type:    Boolean,\n      default: false\n    },\n    advFilterPreventFilteringLabels: {\n      type:    Boolean,\n      default: false\n    },\n    /**\n     * Allows for the usage of a query param to work for simple filtering (q)\n     */\n    useQueryParamsForSimpleFiltering: {\n      type:    Boolean,\n      default: false\n    },\n    /**\n     * Manaul force the update of live and delayed cells. Change this number to kick off the update\n     */\n    forceUpdateLiveAndDelayed: {\n      type:    Number,\n      default: 0\n    },\n\n    externalPaginationEnabled: {\n      type:    Boolean,\n      default: false\n    },\n\n    externalPaginationResult: {\n      type:    Object,\n      default: null\n    }\n  },\n\n  mounted() {\n    /**\n     * v-shortkey prevents the event's propagation:\n     * https://github.com/fgr-araujo/vue-shortkey/blob/55d802ea305cadcc2ea970b55a3b8b86c7b44c05/src/index.js#L156-L157\n     *\n     * 'Enter' key press is handled via event listener in order to allow the event propagation\n     */\n    window.addEventListener('keyup', this.handleEnterKeyPress);\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('keyup', this.handleEnterKeyPress);\n  },\n\n  data() {\n    // Confirm which store we're in, if schema isn't available we're probably showing a list with different types\n    const inStore = this.schema?.id ? this.$store.getters['currentStore'](this.schema.id) : undefined;\n\n    return { inStore };\n  },\n\n  computed: {\n    options() {\n      return this.$store.getters[`type-map/optionsFor`](this.schema, this.externalPaginationEnabled);\n    },\n\n    _listGroupMapped() {\n      return this.options?.listGroups?.reduce((acc, grp) => {\n        acc[grp.value] = grp;\n\n        return acc;\n      }, {});\n    },\n\n    _mandatorySort() {\n      return this.options?.listMandatorySort;\n    },\n\n    ...mapGetters(['currentProduct']),\n\n    isNamespaced() {\n      if ( this.namespaced !== null ) {\n        return this.namespaced;\n      }\n\n      return !!get( this.schema, 'attributes.namespaced');\n    },\n\n    showNamespaceColumn() {\n      const groupNamespaces = this.group === 'namespace';\n      const out = !this.showGrouping || !groupNamespaces;\n\n      return out;\n    },\n\n    _showBulkActions() {\n      if (this.tableActions !== null) {\n        return this.tableActions;\n      } else if (this.schema) {\n        const hideTableActions = this.$store.getters['type-map/hideBulkActionsFor'](this.schema);\n\n        return !hideTableActions;\n      }\n\n      return false;\n    },\n\n    _headers() {\n      let headers;\n      const showNamespace = this.showNamespaceColumn;\n\n      if ( this.headers ) {\n        headers = this.headers.slice();\n      } else {\n        headers = this.$store.getters['type-map/headersFor'](this.schema, this.externalPaginationEnabled);\n      }\n\n      // add custom table columns provided by the extensions ExtensionPoint.TABLE_COL hook\n      // gate it so that we prevent errors on older versions of dashboard\n      if (this.$store.$plugin?.getUIConfig) {\n        const extensionCols = getApplicableExtensionEnhancements(this, ExtensionPoint.TABLE_COL, TableColumnLocation.RESOURCE, this.$route);\n\n        // Try and insert the columns before the Age column\n        let insertPosition = headers.length;\n\n        if (headers.length > 0) {\n          const ageColIndex = headers.findIndex((h) => h.name === AGE.name);\n\n          if (ageColIndex >= 0) {\n            insertPosition = ageColIndex;\n          } else {\n            // we've found some labels with ' ', which isn't necessarily empty (explore action/button)\n            // if we are to add cols, let's push them before these so that the UI doesn't look weird\n            const lastViableColIndex = headers.findIndex((h) => (!h.label || !h.label?.trim()) && (!h.labelKey || !h.labelKey?.trim()));\n\n            if (lastViableColIndex >= 0) {\n              insertPosition = lastViableColIndex;\n            }\n          }\n        }\n\n        // adding extension defined cols to the correct header config\n        extensionCols.forEach((col) => {\n          // we need the 'value' prop to be populated in order for the rows to show the values\n          if (!col.value && col.getValue) {\n            col.value = col.getValue;\n          }\n          headers.splice(insertPosition, 0, col);\n        });\n      }\n\n      // If only one namespace is selected, hide the namespace column\n      if ( !showNamespace ) {\n        const idx = headers.findIndex((header) => header.name === NAMESPACE.name);\n\n        if ( idx >= 0 ) {\n          headers.splice(idx, 1);\n        }\n      }\n\n      // If we are grouping by a custom group, it may specify that we hide a specific column\n      const custom = this._listGroupMapped?.[this.group];\n\n      if (custom?.hideColumn) {\n        const idx = headers.findIndex((header) => header.name === custom.hideColumn);\n\n        if ( idx >= 0 ) {\n          headers.splice(idx, 1);\n        }\n      }\n\n      return headers;\n    },\n\n    /**\n     * Take rows and filter out entries given the namespace filter\n     */\n    filteredRows() {\n      const isAll = this.$store.getters['isAllNamespaces'];\n\n      // Do we need to filter by namespace like things?\n      if (\n        !this.isNamespaced || // Resource type isn't namespaced\n        this.ignoreFilter || // Component owner strictly states no filtering\n        this.externalPaginationEnabled ||\n        (isAll && !this.currentProduct?.hideSystemResources) || // Need all\n        (this.inStore ? this.$store.getters[`${ this.inStore }/haveNamespace`](this.schema.id)?.length : false)// Store reports type has namespace filter, so rows already contain the correctly filtered resources\n      ) {\n        return this.rows || [];\n      }\n\n      const includedNamespaces = this.$store.getters['namespaces']();\n\n      // Shouldn't happen, but does for resources like management.cattle.io.preference\n      if (!this.rows) {\n        return [];\n      }\n\n      const haveAllNamespace = this.$store.getters['haveAllNamespace'];\n\n      return this.rows.filter((row) => {\n        if (this.currentProduct?.hideSystemResources && this.isNamespaced) {\n          return !!includedNamespaces[row.metadata.namespace] && !row.isSystemResource;\n        } else if (!this.isNamespaced) {\n          return true;\n        } else if (haveAllNamespace) {\n          // `rows` only contains resource from a single namespace\n          return true;\n        } else {\n          return !!includedNamespaces[row.metadata.namespace];\n        }\n      });\n    },\n\n    _group: mapPref(GROUP_RESOURCES),\n\n    // The group stored in the preference (above) might not be valid for this resource table - so ensure we\n    // choose a group that is applicable (the default)\n    // This saves us from having to store a group preference per resource type - given that custom groupings aer not used much\n    // and it feels like a good UX to be able to keep the namespace/flat grouping across tables\n    group: {\n      get() {\n        // Check group is valid\n        const exists = this.groupOptions.find((g) => g.value === this._group);\n\n        if (!exists) {\n          // Attempt to find the default option in available options...\n          // if not use the first value in the options collection...\n          // and if not that just fall back to the default\n          if (this.groupOptions.find((g) => g.value === DEFAULT_GROUP)) {\n            return DEFAULT_GROUP;\n          }\n\n          return this.groupOptions[0]?.value || DEFAULT_GROUP;\n        }\n\n        return this._group;\n      },\n      set(value) {\n        this._group = value;\n      }\n    },\n\n    showGrouping() {\n      if ( this.groupable === null ) {\n        const namespaceGroupable = this.$store.getters['isMultipleNamespaces'] && this.isNamespaced;\n        const customGroupable = !!this.options?.listGroups?.length;\n\n        return namespaceGroupable || customGroupable;\n      }\n\n      return this.groupable || false;\n    },\n\n    computedGroupBy() {\n      if ( this.groupBy ) {\n        // This probably comes from the type-map config for the resource (see ResourceList)\n        return this.groupBy;\n      }\n\n      if ( this.group === 'namespace' && this.showGrouping ) {\n        // This switches to group rows by a key which is the label for the group (??)\n        return 'groupByLabel';\n      }\n\n      const custom = this._listGroupMapped?.[this.group];\n\n      if (custom?.field) {\n        // Override the normal filtering\n        return custom.field;\n      }\n\n      return null;\n    },\n\n    groupOptions() {\n      // Ignore the defaults below, we have an override set of groups\n      // REPLACE (instead of SUPPLEMENT) defaults with listGroups (given listGroupsWillOverride is true)\n      if (this.options?.listGroupsWillOverride && !!this.options?.listGroups?.length) {\n        return this.options?.listGroups;\n      }\n\n      const standard = [\n        {\n          tooltipKey: 'resourceTable.groupBy.none',\n          icon:       'icon-list-flat',\n          value:      'none',\n        },\n        {\n          tooltipKey: this.groupTooltip,\n          icon:       'icon-folder',\n          value:      'namespace',\n        },\n      ];\n\n      // SUPPLEMENT (instead of REPLACE) defaults with listGroups (given listGroupsWillOverride is false)\n      if (!!this.options?.listGroups?.length) {\n        return standard.concat(this.options.listGroups);\n      }\n\n      return standard;\n    },\n\n    parsedPagingParams() {\n      if (this.pagingParams) {\n        return this.pagingParams;\n      }\n\n      if ( !this.schema ) {\n        return {\n          singularLabel: '',\n          pluralLabel:   ''\n        };\n      }\n\n      return {\n        singularLabel: this.$store.getters['type-map/labelFor'](this.schema),\n        pluralLabel:   this.$store.getters['type-map/labelFor'](this.schema, 99),\n      };\n    },\n\n  },\n\n  methods: {\n    keyAction(action) {\n      const table = this.$refs.table;\n\n      if ( !table ) {\n        return;\n      }\n\n      const selection = table.selectedRows;\n\n      if ( action === 'remove' ) {\n        const act = findBy(table.availableActions, 'action', 'promptRemove');\n\n        if ( act ) {\n          table.setBulkActionOfInterest(act);\n          table.applyTableAction(act);\n        }\n\n        return;\n      }\n\n      if ( selection.length !== 1 ) {\n        return;\n      }\n\n      switch ( action ) {\n      case 'detail':\n        selection[0].goToDetail();\n        break;\n      case 'edit':\n        selection[0].goToEdit();\n        break;\n      case 'yaml':\n        selection[0].goToViewYaml();\n        break;\n      }\n    },\n\n    clearSelection() {\n      this.$refs.table.clearSelection();\n    },\n\n    safeSortGenerationFn() {\n      if (this.sortGenerationFn) {\n        return this.sortGenerationFn(this.schema, this.$store);\n      }\n\n      return defaultTableSortGenerationFn(this.schema, this.$store);\n    },\n\n    handleActionButtonClick(event) {\n      this.$emit('clickedActionButton', event);\n    },\n\n    handleEnterKeyPress(event) {\n      if (event.key === 'Enter') {\n        this.keyAction('detail');\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <SortableTable\n    ref=\"table\"\n    v-bind=\"$attrs\"\n    :headers=\"_headers\"\n    :rows=\"filteredRows\"\n    :loading=\"loading\"\n    :alt-loading=\"altLoading\"\n    :group-by=\"computedGroupBy\"\n    :group=\"group\"\n    :group-options=\"groupOptions\"\n    :search=\"search\"\n    :paging=\"true\"\n    :paging-params=\"parsedPagingParams\"\n    :paging-label=\"pagingLabel\"\n    :row-actions=\"rowActions\"\n    :table-actions=\"_showBulkActions\"\n    :overflow-x=\"overflowX\"\n    :overflow-y=\"overflowY\"\n    :get-custom-detail-link=\"getCustomDetailLink\"\n    :has-advanced-filtering=\"hasAdvancedFiltering\"\n    :adv-filter-hide-labels-as-cols=\"advFilterHideLabelsAsCols\"\n    :adv-filter-prevent-filtering-labels=\"advFilterPreventFilteringLabels\"\n    :key-field=\"keyField\"\n    :sort-generation-fn=\"safeSortGenerationFn\"\n    :use-query-params-for-simple-filtering=\"useQueryParamsForSimpleFiltering\"\n    :force-update-live-and-delayed=\"forceUpdateLiveAndDelayed\"\n    :external-pagination-enabled=\"externalPaginationEnabled\"\n    :external-pagination-result=\"externalPaginationResult\"\n    :mandatory-sort=\"_mandatorySort\"\n    @clickedActionButton=\"handleActionButtonClick\"\n    @group-value-change=\"group = $event\"\n\n    v-on=\"$listeners\"\n  >\n    <template\n      v-if=\"showGrouping\"\n      #header-middle\n    >\n      <slot name=\"more-header-middle\" />\n\n      <ButtonGroup\n        v-model=\"group\"\n        :options=\"groupOptions\"\n      />\n    </template>\n\n    <template\n      v-if=\"showGrouping\"\n      #header-right\n    >\n      <slot name=\"header-right\" />\n    </template>\n\n    <template #group-by=\"{group: thisGroup}\">\n      <div\n        v-clean-html=\"thisGroup.ref\"\n        class=\"group-tab\"\n      />\n    </template>\n\n    <!-- Pass down templates provided by the caller -->\n    <template\n      v-for=\"(_, slot) of $scopedSlots\"\n      v-slot:[slot]=\"scope\"\n    >\n      <slot\n        :name=\"slot\"\n        v-bind=\"scope\"\n      />\n    </template>\n\n    <template #shortkeys>\n      <button\n        v-shortkey.once=\"['e']\"\n        class=\"hide\"\n        @shortkey=\"keyAction('edit')\"\n      />\n      <button\n        v-shortkey.once=\"['y']\"\n        class=\"hide\"\n        @shortkey=\"keyAction('yaml')\"\n      />\n      <button\n        v-if=\"_showBulkActions\"\n        v-shortkey.once=\"['del']\"\n        class=\"hide\"\n        @shortkey=\"keyAction('remove')\"\n      />\n      <button\n        v-if=\"_showBulkActions\"\n        v-shortkey.once=\"['backspace']\"\n        class=\"hide\"\n        @shortkey=\"keyAction('remove')\"\n      />\n    </template>\n  </SortableTable>\n</template>\n"]}]}